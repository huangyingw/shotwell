/* EditingTools.c generated by valac 0.36.6, the Vala compiler
 * generated from EditingTools.vala, do not modify */

/* Copyright 2016 Software Freedom Conservancy Inc.
 *
 * This software is licensed under the GNU Lesser General Public License
 * (version 2.1 or later).  See the COPYING file in this distribution.
 */
/* This file is the master unit file for the EditingTools unit.  It should be edited to include
 * whatever code is deemed necessary.
 *
 * The init() and terminate() methods are mandatory.
 *
 * If the unit needs to be configured prior to initialization, add the proper parameters to
 * the preconfigure() method, implement it, and ensure in init() that it's been called.
 */

#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gdk/gdk.h>
#include <stdlib.h>
#include <string.h>
#include <float.h>
#include <math.h>
#include <cairo.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <glib/gi18n-lib.h>
#include <gee.h>
#include <gio/gio.h>
#include <gobject/gvaluecollector.h>


#define EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW (editing_tools_editing_tool_window_get_type ())
#define EDITING_TOOLS_EDITING_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow))
#define EDITING_TOOLS_EDITING_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindowClass))
#define EDITING_TOOLS_IS_EDITING_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW))
#define EDITING_TOOLS_IS_EDITING_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW))
#define EDITING_TOOLS_EDITING_TOOL_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindowClass))

typedef struct _EditingToolsEditingToolWindow EditingToolsEditingToolWindow;
typedef struct _EditingToolsEditingToolWindowClass EditingToolsEditingToolWindowClass;
typedef struct _EditingToolsEditingToolWindowPrivate EditingToolsEditingToolWindowPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define TYPE_PAGE_WINDOW (page_window_get_type ())
#define PAGE_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PAGE_WINDOW, PageWindow))
#define PAGE_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PAGE_WINDOW, PageWindowClass))
#define IS_PAGE_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PAGE_WINDOW))
#define IS_PAGE_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PAGE_WINDOW))
#define PAGE_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PAGE_WINDOW, PageWindowClass))

typedef struct _PageWindow PageWindow;
typedef struct _PageWindowClass PageWindowClass;

#define TYPE_APP_WINDOW (app_window_get_type ())
#define APP_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_APP_WINDOW, AppWindow))
#define APP_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_APP_WINDOW, AppWindowClass))
#define IS_APP_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_APP_WINDOW))
#define IS_APP_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_APP_WINDOW))
#define APP_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_APP_WINDOW, AppWindowClass))

typedef struct _AppWindow AppWindow;
typedef struct _AppWindowClass AppWindowClass;

#define EDITING_TOOLS_TYPE_PHOTO_CANVAS (editing_tools_photo_canvas_get_type ())
#define EDITING_TOOLS_PHOTO_CANVAS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_PHOTO_CANVAS, EditingToolsPhotoCanvas))
#define EDITING_TOOLS_PHOTO_CANVAS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_PHOTO_CANVAS, EditingToolsPhotoCanvasClass))
#define EDITING_TOOLS_IS_PHOTO_CANVAS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_PHOTO_CANVAS))
#define EDITING_TOOLS_IS_PHOTO_CANVAS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_PHOTO_CANVAS))
#define EDITING_TOOLS_PHOTO_CANVAS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_PHOTO_CANVAS, EditingToolsPhotoCanvasClass))

typedef struct _EditingToolsPhotoCanvas EditingToolsPhotoCanvas;
typedef struct _EditingToolsPhotoCanvasClass EditingToolsPhotoCanvasClass;
typedef struct _EditingToolsPhotoCanvasPrivate EditingToolsPhotoCanvasPrivate;

#define TYPE_DATA_OBJECT (data_object_get_type ())
#define DATA_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DATA_OBJECT, DataObject))
#define DATA_OBJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DATA_OBJECT, DataObjectClass))
#define IS_DATA_OBJECT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DATA_OBJECT))
#define IS_DATA_OBJECT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DATA_OBJECT))
#define DATA_OBJECT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DATA_OBJECT, DataObjectClass))

typedef struct _DataObject DataObject;
typedef struct _DataObjectClass DataObjectClass;

#define TYPE_DATA_SOURCE (data_source_get_type ())
#define DATA_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DATA_SOURCE, DataSource))
#define DATA_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DATA_SOURCE, DataSourceClass))
#define IS_DATA_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DATA_SOURCE))
#define IS_DATA_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DATA_SOURCE))
#define DATA_SOURCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DATA_SOURCE, DataSourceClass))

typedef struct _DataSource DataSource;
typedef struct _DataSourceClass DataSourceClass;

#define TYPE_THUMBNAIL_SOURCE (thumbnail_source_get_type ())
#define THUMBNAIL_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_THUMBNAIL_SOURCE, ThumbnailSource))
#define THUMBNAIL_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_THUMBNAIL_SOURCE, ThumbnailSourceClass))
#define IS_THUMBNAIL_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_THUMBNAIL_SOURCE))
#define IS_THUMBNAIL_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_THUMBNAIL_SOURCE))
#define THUMBNAIL_SOURCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_THUMBNAIL_SOURCE, ThumbnailSourceClass))

typedef struct _ThumbnailSource ThumbnailSource;
typedef struct _ThumbnailSourceClass ThumbnailSourceClass;

#define TYPE_MEDIA_SOURCE (media_source_get_type ())
#define MEDIA_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_MEDIA_SOURCE, MediaSource))
#define MEDIA_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_MEDIA_SOURCE, MediaSourceClass))
#define IS_MEDIA_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_MEDIA_SOURCE))
#define IS_MEDIA_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_MEDIA_SOURCE))
#define MEDIA_SOURCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_MEDIA_SOURCE, MediaSourceClass))

typedef struct _MediaSource MediaSource;
typedef struct _MediaSourceClass MediaSourceClass;

#define TYPE_PHOTO_SOURCE (photo_source_get_type ())
#define PHOTO_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PHOTO_SOURCE, PhotoSource))
#define PHOTO_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PHOTO_SOURCE, PhotoSourceClass))
#define IS_PHOTO_SOURCE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PHOTO_SOURCE))
#define IS_PHOTO_SOURCE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PHOTO_SOURCE))
#define PHOTO_SOURCE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PHOTO_SOURCE, PhotoSourceClass))

typedef struct _PhotoSource PhotoSource;
typedef struct _PhotoSourceClass PhotoSourceClass;

#define TYPE_PHOTO (photo_get_type ())
#define PHOTO(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PHOTO, Photo))
#define PHOTO_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PHOTO, PhotoClass))
#define IS_PHOTO(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PHOTO))
#define IS_PHOTO_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PHOTO))
#define PHOTO_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PHOTO, PhotoClass))

typedef struct _Photo Photo;
typedef struct _PhotoClass PhotoClass;

#define TYPE_DIMENSIONS (dimensions_get_type ())
typedef struct _Dimensions Dimensions;
#define _cairo_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_destroy (var), NULL)))
#define _cairo_surface_destroy0(var) ((var == NULL) ? NULL : (var = (cairo_surface_destroy (var), NULL)))

#define PHOTO_TYPE_EXCEPTION (photo_exception_get_type ())

#define TYPE_SCALING (scaling_get_type ())

#define TYPE_SCALE_CONSTRAINT (scale_constraint_get_type ())
typedef struct _Scaling Scaling;

#define TYPE_BOX (box_get_type ())
typedef struct _Box Box;
typedef struct _EditingToolsParamSpecPhotoCanvas EditingToolsParamSpecPhotoCanvas;
enum  {
	EDITING_TOOLS_PHOTO_CANVAS_NEW_SURFACE_SIGNAL,
	EDITING_TOOLS_PHOTO_CANVAS_RESIZED_SCALED_PIXBUF_SIGNAL,
	EDITING_TOOLS_PHOTO_CANVAS_LAST_SIGNAL
};
static guint editing_tools_photo_canvas_signals[EDITING_TOOLS_PHOTO_CANVAS_LAST_SIGNAL] = {0};

#define EDITING_TOOLS_TYPE_EDITING_TOOL (editing_tools_editing_tool_get_type ())
#define EDITING_TOOLS_EDITING_TOOL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool))
#define EDITING_TOOLS_EDITING_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingToolClass))
#define EDITING_TOOLS_IS_EDITING_TOOL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL))
#define EDITING_TOOLS_IS_EDITING_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_EDITING_TOOL))
#define EDITING_TOOLS_EDITING_TOOL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingToolClass))

typedef struct _EditingToolsEditingTool EditingToolsEditingTool;
typedef struct _EditingToolsEditingToolClass EditingToolsEditingToolClass;
typedef struct _EditingToolsEditingToolPrivate EditingToolsEditingToolPrivate;
#define _editing_tools_photo_canvas_unref0(var) ((var == NULL) ? NULL : (var = (editing_tools_photo_canvas_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define TYPE_COMMAND (command_get_type ())
#define COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMMAND, Command))
#define COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMMAND, CommandClass))
#define IS_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMMAND))
#define IS_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMMAND))
#define COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMMAND, CommandClass))

typedef struct _Command Command;
typedef struct _CommandClass CommandClass;
typedef struct _EditingToolsParamSpecEditingTool EditingToolsParamSpecEditingTool;
enum  {
	EDITING_TOOLS_EDITING_TOOL_ACTIVATED_SIGNAL,
	EDITING_TOOLS_EDITING_TOOL_DEACTIVATED_SIGNAL,
	EDITING_TOOLS_EDITING_TOOL_APPLIED_SIGNAL,
	EDITING_TOOLS_EDITING_TOOL_CANCELLED_SIGNAL,
	EDITING_TOOLS_EDITING_TOOL_ABORTED_SIGNAL,
	EDITING_TOOLS_EDITING_TOOL_LAST_SIGNAL
};
static guint editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_LAST_SIGNAL] = {0};

#define EDITING_TOOLS_TYPE_CROP_TOOL (editing_tools_crop_tool_get_type ())
#define EDITING_TOOLS_CROP_TOOL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool))
#define EDITING_TOOLS_CROP_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropToolClass))
#define EDITING_TOOLS_IS_CROP_TOOL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_CROP_TOOL))
#define EDITING_TOOLS_IS_CROP_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_CROP_TOOL))
#define EDITING_TOOLS_CROP_TOOL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropToolClass))

typedef struct _EditingToolsCropTool EditingToolsCropTool;
typedef struct _EditingToolsCropToolClass EditingToolsCropToolClass;
typedef struct _EditingToolsCropToolPrivate EditingToolsCropToolPrivate;

#define EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW (editing_tools_crop_tool_crop_tool_window_get_type ())
#define EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW, EditingToolsCropToolCropToolWindow))
#define EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW, EditingToolsCropToolCropToolWindowClass))
#define EDITING_TOOLS_CROP_TOOL_IS_CROP_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW))
#define EDITING_TOOLS_CROP_TOOL_IS_CROP_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW))
#define EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW, EditingToolsCropToolCropToolWindowClass))

typedef struct _EditingToolsCropToolCropToolWindow EditingToolsCropToolCropToolWindow;
typedef struct _EditingToolsCropToolCropToolWindowClass EditingToolsCropToolCropToolWindowClass;

#define TYPE_BOX_LOCATION (box_location_get_type ())

#define EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION (editing_tools_crop_tool_constraint_description_get_type ())
#define EDITING_TOOLS_CROP_TOOL_CONSTRAINT_DESCRIPTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION, EditingToolsCropToolConstraintDescription))
#define EDITING_TOOLS_CROP_TOOL_CONSTRAINT_DESCRIPTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION, EditingToolsCropToolConstraintDescriptionClass))
#define EDITING_TOOLS_CROP_TOOL_IS_CONSTRAINT_DESCRIPTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION))
#define EDITING_TOOLS_CROP_TOOL_IS_CONSTRAINT_DESCRIPTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION))
#define EDITING_TOOLS_CROP_TOOL_CONSTRAINT_DESCRIPTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION, EditingToolsCropToolConstraintDescriptionClass))

typedef struct _EditingToolsCropToolConstraintDescription EditingToolsCropToolConstraintDescription;
typedef struct _EditingToolsCropToolConstraintDescriptionClass EditingToolsCropToolConstraintDescriptionClass;

#define EDITING_TOOLS_CROP_TOOL_TYPE_RETICLE_ORIENTATION (editing_tools_crop_tool_reticle_orientation_get_type ())

#define EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_MODE (editing_tools_crop_tool_constraint_mode_get_type ())
typedef struct _EditingToolsCropToolConstraintDescriptionPrivate EditingToolsCropToolConstraintDescriptionPrivate;
#define _editing_tools_crop_tool_constraint_description_unref0(var) ((var == NULL) ? NULL : (var = (editing_tools_crop_tool_constraint_description_unref (var), NULL)))
typedef struct _EditingToolsCropToolCropToolWindowPrivate EditingToolsCropToolCropToolWindowPrivate;

#define TYPE_CONFIGURATION_FACADE (configuration_facade_get_type ())
#define CONFIGURATION_FACADE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CONFIGURATION_FACADE, ConfigurationFacade))
#define CONFIGURATION_FACADE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CONFIGURATION_FACADE, ConfigurationFacadeClass))
#define IS_CONFIGURATION_FACADE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CONFIGURATION_FACADE))
#define IS_CONFIGURATION_FACADE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CONFIGURATION_FACADE))
#define CONFIGURATION_FACADE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CONFIGURATION_FACADE, ConfigurationFacadeClass))

typedef struct _ConfigurationFacade ConfigurationFacade;
typedef struct _ConfigurationFacadeClass ConfigurationFacadeClass;

#define CONFIG_TYPE_FACADE (config_facade_get_type ())
#define CONFIG_FACADE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CONFIG_TYPE_FACADE, ConfigFacade))
#define CONFIG_FACADE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CONFIG_TYPE_FACADE, ConfigFacadeClass))
#define CONFIG_IS_FACADE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CONFIG_TYPE_FACADE))
#define CONFIG_IS_FACADE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CONFIG_TYPE_FACADE))
#define CONFIG_FACADE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CONFIG_TYPE_FACADE, ConfigFacadeClass))

typedef struct _ConfigFacade ConfigFacade;
typedef struct _ConfigFacadeClass ConfigFacadeClass;

#define TYPE_BACKING_FETCH_MODE (backing_fetch_mode_get_type ())

#define TYPE_PAGE_COMMAND (page_command_get_type ())
#define PAGE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PAGE_COMMAND, PageCommand))
#define PAGE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PAGE_COMMAND, PageCommandClass))
#define IS_PAGE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PAGE_COMMAND))
#define IS_PAGE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PAGE_COMMAND))
#define PAGE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PAGE_COMMAND, PageCommandClass))

typedef struct _PageCommand PageCommand;
typedef struct _PageCommandClass PageCommandClass;

#define TYPE_SINGLE_DATA_SOURCE_COMMAND (single_data_source_command_get_type ())
#define SINGLE_DATA_SOURCE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SINGLE_DATA_SOURCE_COMMAND, SingleDataSourceCommand))
#define SINGLE_DATA_SOURCE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SINGLE_DATA_SOURCE_COMMAND, SingleDataSourceCommandClass))
#define IS_SINGLE_DATA_SOURCE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SINGLE_DATA_SOURCE_COMMAND))
#define IS_SINGLE_DATA_SOURCE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SINGLE_DATA_SOURCE_COMMAND))
#define SINGLE_DATA_SOURCE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SINGLE_DATA_SOURCE_COMMAND, SingleDataSourceCommandClass))

typedef struct _SingleDataSourceCommand SingleDataSourceCommand;
typedef struct _SingleDataSourceCommandClass SingleDataSourceCommandClass;

#define TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND (generic_photo_transformation_command_get_type ())
#define GENERIC_PHOTO_TRANSFORMATION_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND, GenericPhotoTransformationCommand))
#define GENERIC_PHOTO_TRANSFORMATION_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND, GenericPhotoTransformationCommandClass))
#define IS_GENERIC_PHOTO_TRANSFORMATION_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND))
#define IS_GENERIC_PHOTO_TRANSFORMATION_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND))
#define GENERIC_PHOTO_TRANSFORMATION_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_GENERIC_PHOTO_TRANSFORMATION_COMMAND, GenericPhotoTransformationCommandClass))

typedef struct _GenericPhotoTransformationCommand GenericPhotoTransformationCommand;
typedef struct _GenericPhotoTransformationCommandClass GenericPhotoTransformationCommandClass;

#define TYPE_CROP_COMMAND (crop_command_get_type ())
#define CROP_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CROP_COMMAND, CropCommand))
#define CROP_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CROP_COMMAND, CropCommandClass))
#define IS_CROP_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CROP_COMMAND))
#define IS_CROP_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CROP_COMMAND))
#define CROP_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CROP_COMMAND, CropCommandClass))

typedef struct _CropCommand CropCommand;
typedef struct _CropCommandClass CropCommandClass;

#define TYPE_BOX_COMPLEMENTS (box_complements_get_type ())
typedef struct _EditingToolsCropToolParamSpecConstraintDescription EditingToolsCropToolParamSpecConstraintDescription;

#define EDITING_TOOLS_TYPE_REDEYE_INSTANCE (editing_tools_redeye_instance_get_type ())
typedef struct _EditingToolsRedeyeInstance EditingToolsRedeyeInstance;

#define EDITING_TOOLS_TYPE_REDEYE_TOOL (editing_tools_redeye_tool_get_type ())
#define EDITING_TOOLS_REDEYE_TOOL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool))
#define EDITING_TOOLS_REDEYE_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeToolClass))
#define EDITING_TOOLS_IS_REDEYE_TOOL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_REDEYE_TOOL))
#define EDITING_TOOLS_IS_REDEYE_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_REDEYE_TOOL))
#define EDITING_TOOLS_REDEYE_TOOL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeToolClass))

typedef struct _EditingToolsRedeyeTool EditingToolsRedeyeTool;
typedef struct _EditingToolsRedeyeToolClass EditingToolsRedeyeToolClass;
typedef struct _EditingToolsRedeyeToolPrivate EditingToolsRedeyeToolPrivate;

#define EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW (editing_tools_redeye_tool_redeye_tool_window_get_type ())
#define EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, EditingToolsRedeyeToolRedeyeToolWindow))
#define EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, EditingToolsRedeyeToolRedeyeToolWindowClass))
#define EDITING_TOOLS_REDEYE_TOOL_IS_REDEYE_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW))
#define EDITING_TOOLS_REDEYE_TOOL_IS_REDEYE_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW))
#define EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, EditingToolsRedeyeToolRedeyeToolWindowClass))

typedef struct _EditingToolsRedeyeToolRedeyeToolWindow EditingToolsRedeyeToolRedeyeToolWindow;
typedef struct _EditingToolsRedeyeToolRedeyeToolWindowClass EditingToolsRedeyeToolRedeyeToolWindowClass;
typedef struct _EditingToolsRedeyeToolRedeyeToolWindowPrivate EditingToolsRedeyeToolRedeyeToolWindowPrivate;

#define TYPE_REDEYE_COMMAND (redeye_command_get_type ())
#define REDEYE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_REDEYE_COMMAND, RedeyeCommand))
#define REDEYE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_REDEYE_COMMAND, RedeyeCommandClass))
#define IS_REDEYE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_REDEYE_COMMAND))
#define IS_REDEYE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_REDEYE_COMMAND))
#define REDEYE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_REDEYE_COMMAND, RedeyeCommandClass))

typedef struct _RedeyeCommand RedeyeCommand;
typedef struct _RedeyeCommandClass RedeyeCommandClass;

#define TYPE_COMMAND_MANAGER (command_manager_get_type ())
#define COMMAND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMMAND_MANAGER, CommandManager))
#define COMMAND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_COMMAND_MANAGER, CommandManagerClass))
#define IS_COMMAND_MANAGER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMMAND_MANAGER))
#define IS_COMMAND_MANAGER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_COMMAND_MANAGER))
#define COMMAND_MANAGER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_COMMAND_MANAGER, CommandManagerClass))

typedef struct _CommandManager CommandManager;
typedef struct _CommandManagerClass CommandManagerClass;
#define _command_manager_unref0(var) ((var == NULL) ? NULL : (var = (command_manager_unref (var), NULL)))

#define TYPE_ALTERATION (alteration_get_type ())
#define ALTERATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ALTERATION, Alteration))
#define ALTERATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ALTERATION, AlterationClass))
#define IS_ALTERATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ALTERATION))
#define IS_ALTERATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ALTERATION))
#define ALTERATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ALTERATION, AlterationClass))

typedef struct _Alteration Alteration;
typedef struct _AlterationClass AlterationClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define TYPE_DATA_COLLECTION (data_collection_get_type ())
#define DATA_COLLECTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_DATA_COLLECTION, DataCollection))
#define DATA_COLLECTION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_DATA_COLLECTION, DataCollectionClass))
#define IS_DATA_COLLECTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_DATA_COLLECTION))
#define IS_DATA_COLLECTION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_DATA_COLLECTION))
#define DATA_COLLECTION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_DATA_COLLECTION, DataCollectionClass))

typedef struct _DataCollection DataCollection;
typedef struct _DataCollectionClass DataCollectionClass;
#define _data_collection_unref0(var) ((var == NULL) ? NULL : (var = (data_collection_unref (var), NULL)))

#define EDITING_TOOLS_TYPE_ADJUST_TOOL (editing_tools_adjust_tool_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool))
#define EDITING_TOOLS_ADJUST_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustToolClass))
#define EDITING_TOOLS_IS_ADJUST_TOOL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_TYPE_ADJUST_TOOL))
#define EDITING_TOOLS_IS_ADJUST_TOOL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_TYPE_ADJUST_TOOL))
#define EDITING_TOOLS_ADJUST_TOOL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustToolClass))

typedef struct _EditingToolsAdjustTool EditingToolsAdjustTool;
typedef struct _EditingToolsAdjustToolClass EditingToolsAdjustToolClass;
typedef struct _EditingToolsAdjustToolPrivate EditingToolsAdjustToolPrivate;

#define EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW (editing_tools_adjust_tool_adjust_tool_window_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW, EditingToolsAdjustToolAdjustToolWindow))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW, EditingToolsAdjustToolAdjustToolWindowClass))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_TOOL_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_TOOL_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW, EditingToolsAdjustToolAdjustToolWindowClass))

typedef struct _EditingToolsAdjustToolAdjustToolWindow EditingToolsAdjustToolAdjustToolWindow;
typedef struct _EditingToolsAdjustToolAdjustToolWindowClass EditingToolsAdjustToolAdjustToolWindowClass;

#define TYPE_PIXEL_TRANSFORMER (pixel_transformer_get_type ())
#define PIXEL_TRANSFORMER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PIXEL_TRANSFORMER, PixelTransformer))
#define PIXEL_TRANSFORMER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PIXEL_TRANSFORMER, PixelTransformerClass))
#define IS_PIXEL_TRANSFORMER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PIXEL_TRANSFORMER))
#define IS_PIXEL_TRANSFORMER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PIXEL_TRANSFORMER))
#define PIXEL_TRANSFORMER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PIXEL_TRANSFORMER, PixelTransformerClass))

typedef struct _PixelTransformer PixelTransformer;
typedef struct _PixelTransformerClass PixelTransformerClass;

#define TYPE_PIXEL_TRANSFORMATION_BUNDLE (pixel_transformation_bundle_get_type ())
#define PIXEL_TRANSFORMATION_BUNDLE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PIXEL_TRANSFORMATION_BUNDLE, PixelTransformationBundle))
#define PIXEL_TRANSFORMATION_BUNDLE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PIXEL_TRANSFORMATION_BUNDLE, PixelTransformationBundleClass))
#define IS_PIXEL_TRANSFORMATION_BUNDLE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PIXEL_TRANSFORMATION_BUNDLE))
#define IS_PIXEL_TRANSFORMATION_BUNDLE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PIXEL_TRANSFORMATION_BUNDLE))
#define PIXEL_TRANSFORMATION_BUNDLE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PIXEL_TRANSFORMATION_BUNDLE, PixelTransformationBundleClass))

typedef struct _PixelTransformationBundle PixelTransformationBundle;
typedef struct _PixelTransformationBundleClass PixelTransformationBundleClass;

#define TYPE_ONE_SHOT_SCHEDULER (one_shot_scheduler_get_type ())
#define ONE_SHOT_SCHEDULER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ONE_SHOT_SCHEDULER, OneShotScheduler))
#define ONE_SHOT_SCHEDULER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ONE_SHOT_SCHEDULER, OneShotSchedulerClass))
#define IS_ONE_SHOT_SCHEDULER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ONE_SHOT_SCHEDULER))
#define IS_ONE_SHOT_SCHEDULER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ONE_SHOT_SCHEDULER))
#define ONE_SHOT_SCHEDULER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ONE_SHOT_SCHEDULER, OneShotSchedulerClass))

typedef struct _OneShotScheduler OneShotScheduler;
typedef struct _OneShotSchedulerClass OneShotSchedulerClass;
#define _pixel_transformer_unref0(var) ((var == NULL) ? NULL : (var = (pixel_transformer_unref (var), NULL)))
#define _pixel_transformation_bundle_unref0(var) ((var == NULL) ? NULL : (var = (pixel_transformation_bundle_unref (var), NULL)))
#define _one_shot_scheduler_unref0(var) ((var == NULL) ? NULL : (var = (one_shot_scheduler_unref (var), NULL)))

#define TYPE_PIXEL_TRANSFORMATION (pixel_transformation_get_type ())
#define PIXEL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_PIXEL_TRANSFORMATION, PixelTransformation))
#define PIXEL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_PIXEL_TRANSFORMATION, PixelTransformationClass))
#define IS_PIXEL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_PIXEL_TRANSFORMATION))
#define IS_PIXEL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_PIXEL_TRANSFORMATION))
#define PIXEL_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_PIXEL_TRANSFORMATION, PixelTransformationClass))

typedef struct _PixelTransformation PixelTransformation;
typedef struct _PixelTransformationClass PixelTransformationClass;

#define TYPE_HSV_TRANSFORMATION (hsv_transformation_get_type ())
#define HSV_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HSV_TRANSFORMATION, HSVTransformation))
#define HSV_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HSV_TRANSFORMATION, HSVTransformationClass))
#define IS_HSV_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HSV_TRANSFORMATION))
#define IS_HSV_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HSV_TRANSFORMATION))
#define HSV_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HSV_TRANSFORMATION, HSVTransformationClass))

typedef struct _HSVTransformation HSVTransformation;
typedef struct _HSVTransformationClass HSVTransformationClass;

#define TYPE_EXPANSION_TRANSFORMATION (expansion_transformation_get_type ())
#define EXPANSION_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_EXPANSION_TRANSFORMATION, ExpansionTransformation))
#define EXPANSION_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_EXPANSION_TRANSFORMATION, ExpansionTransformationClass))
#define IS_EXPANSION_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_EXPANSION_TRANSFORMATION))
#define IS_EXPANSION_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_EXPANSION_TRANSFORMATION))
#define EXPANSION_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_EXPANSION_TRANSFORMATION, ExpansionTransformationClass))

typedef struct _ExpansionTransformation ExpansionTransformation;
typedef struct _ExpansionTransformationClass ExpansionTransformationClass;

#define TYPE_PIXEL_TRANSFORMATION_TYPE (pixel_transformation_type_get_type ())
typedef struct _EditingToolsAdjustToolAdjustToolWindowPrivate EditingToolsAdjustToolAdjustToolWindowPrivate;

#define TYPE_RGB_HISTOGRAM_MANIPULATOR (rgb_histogram_manipulator_get_type ())
#define RGB_HISTOGRAM_MANIPULATOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RGB_HISTOGRAM_MANIPULATOR, RGBHistogramManipulator))
#define RGB_HISTOGRAM_MANIPULATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RGB_HISTOGRAM_MANIPULATOR, RGBHistogramManipulatorClass))
#define IS_RGB_HISTOGRAM_MANIPULATOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RGB_HISTOGRAM_MANIPULATOR))
#define IS_RGB_HISTOGRAM_MANIPULATOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RGB_HISTOGRAM_MANIPULATOR))
#define RGB_HISTOGRAM_MANIPULATOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RGB_HISTOGRAM_MANIPULATOR, RGBHistogramManipulatorClass))

typedef struct _RGBHistogramManipulator RGBHistogramManipulator;
typedef struct _RGBHistogramManipulatorClass RGBHistogramManipulatorClass;

#define TYPE_SHADOW_DETAIL_TRANSFORMATION (shadow_detail_transformation_get_type ())
#define SHADOW_DETAIL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SHADOW_DETAIL_TRANSFORMATION, ShadowDetailTransformation))
#define SHADOW_DETAIL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SHADOW_DETAIL_TRANSFORMATION, ShadowDetailTransformationClass))
#define IS_SHADOW_DETAIL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SHADOW_DETAIL_TRANSFORMATION))
#define IS_SHADOW_DETAIL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SHADOW_DETAIL_TRANSFORMATION))
#define SHADOW_DETAIL_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SHADOW_DETAIL_TRANSFORMATION, ShadowDetailTransformationClass))

typedef struct _ShadowDetailTransformation ShadowDetailTransformation;
typedef struct _ShadowDetailTransformationClass ShadowDetailTransformationClass;

#define TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION (highlight_detail_transformation_get_type ())
#define HIGHLIGHT_DETAIL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION, HighlightDetailTransformation))
#define HIGHLIGHT_DETAIL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION, HighlightDetailTransformationClass))
#define IS_HIGHLIGHT_DETAIL_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION))
#define IS_HIGHLIGHT_DETAIL_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION))
#define HIGHLIGHT_DETAIL_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION, HighlightDetailTransformationClass))

typedef struct _HighlightDetailTransformation HighlightDetailTransformation;
typedef struct _HighlightDetailTransformationClass HighlightDetailTransformationClass;

#define TYPE_RGB_TRANSFORMATION (rgb_transformation_get_type ())
#define RGB_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_RGB_TRANSFORMATION, RGBTransformation))
#define RGB_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_RGB_TRANSFORMATION, RGBTransformationClass))
#define IS_RGB_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_RGB_TRANSFORMATION))
#define IS_RGB_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_RGB_TRANSFORMATION))
#define RGB_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_RGB_TRANSFORMATION, RGBTransformationClass))

typedef struct _RGBTransformation RGBTransformation;
typedef struct _RGBTransformationClass RGBTransformationClass;

#define TYPE_TEMPERATURE_TRANSFORMATION (temperature_transformation_get_type ())
#define TEMPERATURE_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TEMPERATURE_TRANSFORMATION, TemperatureTransformation))
#define TEMPERATURE_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TEMPERATURE_TRANSFORMATION, TemperatureTransformationClass))
#define IS_TEMPERATURE_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TEMPERATURE_TRANSFORMATION))
#define IS_TEMPERATURE_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TEMPERATURE_TRANSFORMATION))
#define TEMPERATURE_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TEMPERATURE_TRANSFORMATION, TemperatureTransformationClass))

typedef struct _TemperatureTransformation TemperatureTransformation;
typedef struct _TemperatureTransformationClass TemperatureTransformationClass;

#define TYPE_TINT_TRANSFORMATION (tint_transformation_get_type ())
#define TINT_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_TINT_TRANSFORMATION, TintTransformation))
#define TINT_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_TINT_TRANSFORMATION, TintTransformationClass))
#define IS_TINT_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_TINT_TRANSFORMATION))
#define IS_TINT_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_TINT_TRANSFORMATION))
#define TINT_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_TINT_TRANSFORMATION, TintTransformationClass))

typedef struct _TintTransformation TintTransformation;
typedef struct _TintTransformationClass TintTransformationClass;

#define TYPE_SATURATION_TRANSFORMATION (saturation_transformation_get_type ())
#define SATURATION_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_SATURATION_TRANSFORMATION, SaturationTransformation))
#define SATURATION_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_SATURATION_TRANSFORMATION, SaturationTransformationClass))
#define IS_SATURATION_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_SATURATION_TRANSFORMATION))
#define IS_SATURATION_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_SATURATION_TRANSFORMATION))
#define SATURATION_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_SATURATION_TRANSFORMATION, SaturationTransformationClass))

typedef struct _SaturationTransformation SaturationTransformation;
typedef struct _SaturationTransformationClass SaturationTransformationClass;

#define TYPE_EXPOSURE_TRANSFORMATION (exposure_transformation_get_type ())
#define EXPOSURE_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_EXPOSURE_TRANSFORMATION, ExposureTransformation))
#define EXPOSURE_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_EXPOSURE_TRANSFORMATION, ExposureTransformationClass))
#define IS_EXPOSURE_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_EXPOSURE_TRANSFORMATION))
#define IS_EXPOSURE_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_EXPOSURE_TRANSFORMATION))
#define EXPOSURE_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_EXPOSURE_TRANSFORMATION, ExposureTransformationClass))

typedef struct _ExposureTransformation ExposureTransformation;
typedef struct _ExposureTransformationClass ExposureTransformationClass;

#define TYPE_CONTRAST_TRANSFORMATION (contrast_transformation_get_type ())
#define CONTRAST_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_CONTRAST_TRANSFORMATION, ContrastTransformation))
#define CONTRAST_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_CONTRAST_TRANSFORMATION, ContrastTransformationClass))
#define IS_CONTRAST_TRANSFORMATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_CONTRAST_TRANSFORMATION))
#define IS_CONTRAST_TRANSFORMATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_CONTRAST_TRANSFORMATION))
#define CONTRAST_TRANSFORMATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_CONTRAST_TRANSFORMATION, ContrastTransformationClass))

typedef struct _ContrastTransformation ContrastTransformation;
typedef struct _ContrastTransformationClass ContrastTransformationClass;
#define _pixel_transformation_unref0(var) ((var == NULL) ? NULL : (var = (pixel_transformation_unref (var), NULL)))

#define EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND (editing_tools_adjust_tool_adjust_tool_command_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommandClass))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_TOOL_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_TOOL_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommandClass))

typedef struct _EditingToolsAdjustToolAdjustToolCommand EditingToolsAdjustToolAdjustToolCommand;
typedef struct _EditingToolsAdjustToolAdjustToolCommandClass EditingToolsAdjustToolAdjustToolCommandClass;

#define EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND (editing_tools_adjust_tool_adjust_reset_command_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommand))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommandClass))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_RESET_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_RESET_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommandClass))

typedef struct _EditingToolsAdjustToolAdjustResetCommand EditingToolsAdjustToolAdjustResetCommand;
typedef struct _EditingToolsAdjustToolAdjustResetCommandClass EditingToolsAdjustToolAdjustResetCommandClass;

#define TYPE_ADJUST_COLORS_SINGLE_COMMAND (adjust_colors_single_command_get_type ())
#define ADJUST_COLORS_SINGLE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ADJUST_COLORS_SINGLE_COMMAND, AdjustColorsSingleCommand))
#define ADJUST_COLORS_SINGLE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ADJUST_COLORS_SINGLE_COMMAND, AdjustColorsSingleCommandClass))
#define IS_ADJUST_COLORS_SINGLE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ADJUST_COLORS_SINGLE_COMMAND))
#define IS_ADJUST_COLORS_SINGLE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ADJUST_COLORS_SINGLE_COMMAND))
#define ADJUST_COLORS_SINGLE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ADJUST_COLORS_SINGLE_COMMAND, AdjustColorsSingleCommandClass))

typedef struct _AdjustColorsSingleCommand AdjustColorsSingleCommand;
typedef struct _AdjustColorsSingleCommandClass AdjustColorsSingleCommandClass;

#define EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND (editing_tools_adjust_tool_slider_adjustment_command_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand))
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommandClass))
#define EDITING_TOOLS_ADJUST_TOOL_IS_SLIDER_ADJUSTMENT_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_IS_SLIDER_ADJUSTMENT_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommandClass))

typedef struct _EditingToolsAdjustToolSliderAdjustmentCommand EditingToolsAdjustToolSliderAdjustmentCommand;
typedef struct _EditingToolsAdjustToolSliderAdjustmentCommandClass EditingToolsAdjustToolSliderAdjustmentCommandClass;

#define EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND (editing_tools_adjust_tool_adjust_enhance_command_get_type ())
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommand))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommandClass))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_ENHANCE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_ENHANCE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND))
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommandClass))

typedef struct _EditingToolsAdjustToolAdjustEnhanceCommand EditingToolsAdjustToolAdjustEnhanceCommand;
typedef struct _EditingToolsAdjustToolAdjustEnhanceCommandClass EditingToolsAdjustToolAdjustEnhanceCommandClass;

#define TYPE_COMMAND_DESCRIPTION (command_description_get_type ())
#define COMMAND_DESCRIPTION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_COMMAND_DESCRIPTION, CommandDescription))
#define IS_COMMAND_DESCRIPTION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_COMMAND_DESCRIPTION))
#define COMMAND_DESCRIPTION_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), TYPE_COMMAND_DESCRIPTION, CommandDescriptionIface))

typedef struct _CommandDescription CommandDescription;
typedef struct _CommandDescriptionIface CommandDescriptionIface;
typedef struct _CommandPrivate CommandPrivate;
typedef struct _EditingToolsAdjustToolAdjustToolCommandPrivate EditingToolsAdjustToolAdjustToolCommandPrivate;
typedef struct _EditingToolsAdjustToolAdjustResetCommandPrivate EditingToolsAdjustToolAdjustResetCommandPrivate;
typedef struct _EditingToolsAdjustToolSliderAdjustmentCommandPrivate EditingToolsAdjustToolSliderAdjustmentCommandPrivate;
typedef struct _EditingToolsAdjustToolAdjustEnhanceCommandPrivate EditingToolsAdjustToolAdjustEnhanceCommandPrivate;

#define TYPE_ENHANCE_SINGLE_COMMAND (enhance_single_command_get_type ())
#define ENHANCE_SINGLE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), TYPE_ENHANCE_SINGLE_COMMAND, EnhanceSingleCommand))
#define ENHANCE_SINGLE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), TYPE_ENHANCE_SINGLE_COMMAND, EnhanceSingleCommandClass))
#define IS_ENHANCE_SINGLE_COMMAND(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), TYPE_ENHANCE_SINGLE_COMMAND))
#define IS_ENHANCE_SINGLE_COMMAND_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), TYPE_ENHANCE_SINGLE_COMMAND))
#define ENHANCE_SINGLE_COMMAND_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), TYPE_ENHANCE_SINGLE_COMMAND, EnhanceSingleCommandClass))

typedef struct _EnhanceSingleCommand EnhanceSingleCommand;
typedef struct _EnhanceSingleCommandClass EnhanceSingleCommandClass;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _EditingToolsEditingToolWindow {
	GtkWindow parent_instance;
	EditingToolsEditingToolWindowPrivate * priv;
};

struct _EditingToolsEditingToolWindowClass {
	GtkWindowClass parent_class;
};

struct _EditingToolsEditingToolWindowPrivate {
	GtkFrame* layout_frame;
	gboolean user_moved;
};

struct _EditingToolsPhotoCanvas {
	GTypeInstance parent_instance;
	volatile int ref_count;
	EditingToolsPhotoCanvasPrivate * priv;
};

struct _EditingToolsPhotoCanvasClass {
	GTypeClass parent_class;
	void (*finalize) (EditingToolsPhotoCanvas *self);
	void (*repaint) (EditingToolsPhotoCanvas* self);
};

struct _Dimensions {
	gint width;
	gint height;
};

struct _EditingToolsPhotoCanvasPrivate {
	GtkWindow* container;
	GdkWindow* drawing_window;
	Photo* photo;
	cairo_t* default_ctx;
	Dimensions surface_dim;
	cairo_surface_t* scaled;
	GdkPixbuf* scaled_pixbuf;
	GdkRectangle scaled_position;
};

typedef enum  {
	PHOTO_EXCEPTION_NONE = 0,
	PHOTO_EXCEPTION_ORIENTATION = 1 << 0,
	PHOTO_EXCEPTION_CROP = 1 << 1,
	PHOTO_EXCEPTION_REDEYE = 1 << 2,
	PHOTO_EXCEPTION_ADJUST = 1 << 3,
	PHOTO_EXCEPTION_STRAIGHTEN = 1 << 4,
	PHOTO_EXCEPTION_ALL = 0xFFFFFFFFLL
} PhotoException;

typedef enum  {
	SCALE_CONSTRAINT_ORIGINAL,
	SCALE_CONSTRAINT_DIMENSIONS,
	SCALE_CONSTRAINT_WIDTH,
	SCALE_CONSTRAINT_HEIGHT,
	SCALE_CONSTRAINT_FILL_VIEWPORT
} ScaleConstraint;

struct _Scaling {
	ScaleConstraint constraint;
	gint scale;
	Dimensions viewport;
	gboolean scale_up;
};

struct _Box {
	gint left;
	gint top;
	gint right;
	gint bottom;
};

struct _EditingToolsParamSpecPhotoCanvas {
	GParamSpec parent_instance;
};

struct _EditingToolsEditingTool {
	GTypeInstance parent_instance;
	volatile int ref_count;
	EditingToolsEditingToolPrivate * priv;
	EditingToolsPhotoCanvas* canvas;
	cairo_surface_t* surface;
	gchar* name;
};

struct _EditingToolsEditingToolClass {
	GTypeClass parent_class;
	void (*finalize) (EditingToolsEditingTool *self);
	void (*activate) (EditingToolsEditingTool* self, EditingToolsPhotoCanvas* canvas);
	void (*deactivate) (EditingToolsEditingTool* self);
	EditingToolsEditingToolWindow* (*get_tool_window) (EditingToolsEditingTool* self);
	GdkPixbuf* (*get_display_pixbuf) (EditingToolsEditingTool* self, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error);
	void (*on_left_click) (EditingToolsEditingTool* self, gint x, gint y);
	void (*on_left_released) (EditingToolsEditingTool* self, gint x, gint y);
	void (*on_motion) (EditingToolsEditingTool* self, gint x, gint y, GdkModifierType mask);
	gboolean (*on_leave_notify_event) (EditingToolsEditingTool* self);
	gboolean (*on_keypress) (EditingToolsEditingTool* self, GdkEventKey* event);
	void (*paint) (EditingToolsEditingTool* self, cairo_t* ctx);
};

struct _EditingToolsEditingToolPrivate {
	EditingToolsEditingToolWindow* tool_window;
};

typedef EditingToolsEditingTool* (*EditingToolsEditingToolFactory) ();
struct _EditingToolsParamSpecEditingTool {
	GParamSpec parent_instance;
};

struct _EditingToolsCropTool {
	EditingToolsEditingTool parent_instance;
	EditingToolsCropToolPrivate * priv;
};

struct _EditingToolsCropToolClass {
	EditingToolsEditingToolClass parent_class;
};

typedef enum  {
	BOX_LOCATION_OUTSIDE,
	BOX_LOCATION_INSIDE,
	BOX_LOCATION_TOP_SIDE,
	BOX_LOCATION_LEFT_SIDE,
	BOX_LOCATION_RIGHT_SIDE,
	BOX_LOCATION_BOTTOM_SIDE,
	BOX_LOCATION_TOP_LEFT,
	BOX_LOCATION_BOTTOM_LEFT,
	BOX_LOCATION_TOP_RIGHT,
	BOX_LOCATION_BOTTOM_RIGHT
} BoxLocation;

typedef enum  {
	EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE,
	EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT
} EditingToolsCropToolReticleOrientation;

typedef enum  {
	EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL,
	EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_CUSTOM
} EditingToolsCropToolConstraintMode;

struct _EditingToolsCropToolPrivate {
	EditingToolsCropToolCropToolWindow* crop_tool_window;
	GdkCursorType current_cursor_type;
	BoxLocation in_manipulation;
	cairo_t* wide_black_ctx;
	cairo_t* wide_white_ctx;
	cairo_t* thin_white_ctx;
	cairo_t* text_ctx;
	cairo_surface_t* crop_surface;
	Box scaled_crop;
	gint last_grab_x;
	gint last_grab_y;
	EditingToolsCropToolConstraintDescription** constraints;
	gint constraints_length1;
	gint _constraints_size_;
	GtkListStore* constraint_list;
	EditingToolsCropToolReticleOrientation reticle_orientation;
	EditingToolsCropToolConstraintMode constraint_mode;
	gboolean entry_insert_in_progress;
	gfloat custom_aspect_ratio;
	gint custom_width;
	gint custom_height;
	gint custom_init_width;
	gint custom_init_height;
	gfloat pre_aspect_ratio;
};

struct _EditingToolsCropToolConstraintDescription {
	GTypeInstance parent_instance;
	volatile int ref_count;
	EditingToolsCropToolConstraintDescriptionPrivate * priv;
	gchar* name;
	gint basis_width;
	gint basis_height;
	gboolean is_pivotable;
	gfloat aspect_ratio;
};

struct _EditingToolsCropToolConstraintDescriptionClass {
	GTypeClass parent_class;
	void (*finalize) (EditingToolsCropToolConstraintDescription *self);
};

struct _EditingToolsCropToolCropToolWindow {
	EditingToolsEditingToolWindow parent_instance;
	EditingToolsCropToolCropToolWindowPrivate * priv;
	GtkButton* ok_button;
	GtkButton* cancel_button;
	GtkComboBox* constraint_combo;
	GtkButton* pivot_reticle_button;
	GtkEntry* custom_width_entry;
	GtkEntry* custom_height_entry;
	GtkLabel* custom_mulsign_label;
	GtkEntry* most_recently_edited;
	GtkBox* response_layout;
	GtkBox* layout;
	gint normal_width;
	gint normal_height;
};

struct _EditingToolsCropToolCropToolWindowClass {
	EditingToolsEditingToolWindowClass parent_class;
};

typedef enum  {
	BACKING_FETCH_MODE_SOURCE,
	BACKING_FETCH_MODE_BASELINE,
	BACKING_FETCH_MODE_MASTER,
	BACKING_FETCH_MODE_UNMODIFIED
} BackingFetchMode;

typedef enum  {
	BOX_COMPLEMENTS_NONE,
	BOX_COMPLEMENTS_VERTICAL,
	BOX_COMPLEMENTS_HORIZONTAL,
	BOX_COMPLEMENTS_BOTH
} BoxComplements;

struct _EditingToolsCropToolParamSpecConstraintDescription {
	GParamSpec parent_instance;
};

struct _EditingToolsRedeyeInstance {
	GdkPoint center;
	gint radius;
};

struct _EditingToolsRedeyeTool {
	EditingToolsEditingTool parent_instance;
	EditingToolsRedeyeToolPrivate * priv;
};

struct _EditingToolsRedeyeToolClass {
	EditingToolsEditingToolClass parent_class;
};

struct _EditingToolsRedeyeToolPrivate {
	cairo_t* thin_white_ctx;
	cairo_t* wider_gray_ctx;
	EditingToolsRedeyeToolRedeyeToolWindow* redeye_tool_window;
	EditingToolsRedeyeInstance user_interaction_instance;
	gboolean is_reticle_move_in_progress;
	GdkPoint reticle_move_mouse_start_point;
	GdkPoint reticle_move_anchor;
	GdkCursor* cached_arrow_cursor;
	GdkCursor* cached_grab_cursor;
	GdkRectangle old_scaled_pixbuf_position;
	GdkPixbuf* current_pixbuf;
};

struct _EditingToolsRedeyeToolRedeyeToolWindow {
	EditingToolsEditingToolWindow parent_instance;
	EditingToolsRedeyeToolRedeyeToolWindowPrivate * priv;
	GtkButton* apply_button;
	GtkButton* close_button;
	GtkScale* slider;
};

struct _EditingToolsRedeyeToolRedeyeToolWindowClass {
	EditingToolsEditingToolWindowClass parent_class;
};

struct _EditingToolsRedeyeToolRedeyeToolWindowPrivate {
	GtkLabel* slider_label;
};

struct _EditingToolsAdjustTool {
	EditingToolsEditingTool parent_instance;
	EditingToolsAdjustToolPrivate * priv;
};

struct _EditingToolsAdjustToolClass {
	EditingToolsEditingToolClass parent_class;
};

struct _EditingToolsAdjustToolPrivate {
	EditingToolsAdjustToolAdjustToolWindow* adjust_tool_window;
	gboolean suppress_effect_redraw;
	GdkPixbuf* draw_to_pixbuf;
	GdkPixbuf* histogram_pixbuf;
	GdkPixbuf* virgin_histogram_pixbuf;
	PixelTransformer* transformer;
	PixelTransformer* histogram_transformer;
	PixelTransformationBundle* transformations;
	gfloat* fp_pixel_cache;
	gint fp_pixel_cache_length1;
	gint _fp_pixel_cache_size_;
	gboolean disable_histogram_refresh;
	OneShotScheduler* temperature_scheduler;
	OneShotScheduler* tint_scheduler;
	OneShotScheduler* contrast_scheduler;
	OneShotScheduler* saturation_scheduler;
	OneShotScheduler* exposure_scheduler;
	OneShotScheduler* shadows_scheduler;
	OneShotScheduler* highlights_scheduler;
};

typedef enum  {
	PIXEL_TRANSFORMATION_TYPE_TONE_EXPANSION,
	PIXEL_TRANSFORMATION_TYPE_SHADOWS,
	PIXEL_TRANSFORMATION_TYPE_HIGHLIGHTS,
	PIXEL_TRANSFORMATION_TYPE_TEMPERATURE,
	PIXEL_TRANSFORMATION_TYPE_TINT,
	PIXEL_TRANSFORMATION_TYPE_SATURATION,
	PIXEL_TRANSFORMATION_TYPE_EXPOSURE,
	PIXEL_TRANSFORMATION_TYPE_CONTRAST
} PixelTransformationType;

struct _EditingToolsAdjustToolAdjustToolWindow {
	EditingToolsEditingToolWindow parent_instance;
	EditingToolsAdjustToolAdjustToolWindowPrivate * priv;
	GtkScale* exposure_slider;
	GtkScale* contrast_slider;
	GtkScale* saturation_slider;
	GtkScale* tint_slider;
	GtkScale* temperature_slider;
	GtkScale* shadows_slider;
	GtkScale* highlights_slider;
	GtkButton* ok_button;
	GtkButton* reset_button;
	GtkButton* cancel_button;
	RGBHistogramManipulator* histogram_manipulator;
};

struct _EditingToolsAdjustToolAdjustToolWindowClass {
	EditingToolsEditingToolWindowClass parent_class;
};

typedef void (*OneShotCallback) (void* user_data);
struct _CommandDescriptionIface {
	GTypeInterface parent_iface;
	gchar* (*get_name) (CommandDescription* self);
	gchar* (*get_explanation) (CommandDescription* self);
};

struct _Command {
	GObject parent_instance;
	CommandPrivate * priv;
};

struct _CommandClass {
	GObjectClass parent_class;
	void (*prepare) (Command* self);
	void (*execute) (Command* self);
	void (*undo) (Command* self);
	void (*redo) (Command* self);
	gboolean (*compress) (Command* self, Command* command);
	gchar* (*get_name) (Command* self);
	gchar* (*get_explanation) (Command* self);
};

struct _EditingToolsAdjustToolAdjustToolCommand {
	Command parent_instance;
	EditingToolsAdjustToolAdjustToolCommandPrivate * priv;
	EditingToolsAdjustTool* owner;
};

struct _EditingToolsAdjustToolAdjustToolCommandClass {
	CommandClass parent_class;
};

struct _EditingToolsAdjustToolAdjustResetCommand {
	EditingToolsAdjustToolAdjustToolCommand parent_instance;
	EditingToolsAdjustToolAdjustResetCommandPrivate * priv;
};

struct _EditingToolsAdjustToolAdjustResetCommandClass {
	EditingToolsAdjustToolAdjustToolCommandClass parent_class;
};

struct _EditingToolsAdjustToolAdjustResetCommandPrivate {
	PixelTransformationBundle* original;
	PixelTransformationBundle* reset;
};

struct _EditingToolsAdjustToolSliderAdjustmentCommand {
	EditingToolsAdjustToolAdjustToolCommand parent_instance;
	EditingToolsAdjustToolSliderAdjustmentCommandPrivate * priv;
};

struct _EditingToolsAdjustToolSliderAdjustmentCommandClass {
	EditingToolsAdjustToolAdjustToolCommandClass parent_class;
};

struct _EditingToolsAdjustToolSliderAdjustmentCommandPrivate {
	PixelTransformationType transformation_type;
	PixelTransformation* new_transformation;
	PixelTransformation* old_transformation;
};

struct _EditingToolsAdjustToolAdjustEnhanceCommand {
	EditingToolsAdjustToolAdjustToolCommand parent_instance;
	EditingToolsAdjustToolAdjustEnhanceCommandPrivate * priv;
};

struct _EditingToolsAdjustToolAdjustEnhanceCommandClass {
	EditingToolsAdjustToolAdjustToolCommandClass parent_class;
};

struct _EditingToolsAdjustToolAdjustEnhanceCommandPrivate {
	Photo* photo;
	PixelTransformationBundle* original;
	PixelTransformationBundle* enhanced;
};


static gpointer editing_tools_editing_tool_window_parent_class = NULL;
static gpointer editing_tools_photo_canvas_parent_class = NULL;
static gpointer editing_tools_editing_tool_parent_class = NULL;
static gpointer editing_tools_crop_tool_parent_class = NULL;
static gpointer editing_tools_crop_tool_constraint_description_parent_class = NULL;
static gpointer editing_tools_crop_tool_crop_tool_window_parent_class = NULL;
static gpointer editing_tools_redeye_tool_parent_class = NULL;
static gpointer editing_tools_redeye_tool_redeye_tool_window_parent_class = NULL;
static gpointer editing_tools_adjust_tool_parent_class = NULL;
static gpointer editing_tools_adjust_tool_adjust_tool_window_parent_class = NULL;
static gpointer editing_tools_adjust_tool_adjust_tool_command_parent_class = NULL;
static gpointer editing_tools_adjust_tool_adjust_reset_command_parent_class = NULL;
static gpointer editing_tools_adjust_tool_slider_adjustment_command_parent_class = NULL;
static gpointer editing_tools_adjust_tool_adjust_enhance_command_parent_class = NULL;

void editing_tools_preconfigure (void);
void editing_tools_init (GError** error);
void editing_tools_terminate (void);
GType editing_tools_editing_tool_window_get_type (void) G_GNUC_CONST;
#define EDITING_TOOLS_EDITING_TOOL_WINDOW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindowPrivate))
enum  {
	EDITING_TOOLS_EDITING_TOOL_WINDOW_DUMMY_PROPERTY
};
#define EDITING_TOOLS_EDITING_TOOL_WINDOW_FRAME_BORDER 6
EditingToolsEditingToolWindow* editing_tools_editing_tool_window_construct (GType object_type, GtkWindow* container);
static void editing_tools_editing_tool_window_suppress_warnings (EditingToolsEditingToolWindow* self, const gchar* log_domain, GLogLevelFlags log_levels, const gchar* message);
static void _editing_tools_editing_tool_window_suppress_warnings_glog_func (const gchar* log_domain, GLogLevelFlags log_levels, const gchar* message, gpointer self);
static void editing_tools_editing_tool_window_real_add (GtkContainer* base, GtkWidget* widget);
gboolean editing_tools_editing_tool_window_has_user_moved (EditingToolsEditingToolWindow* self);
static gboolean editing_tools_editing_tool_window_real_key_press_event (GtkWidget* base, GdkEventKey* event);
GType page_window_get_type (void) G_GNUC_CONST;
GType app_window_get_type (void) G_GNUC_CONST;
AppWindow* app_window_get_instance (void);
static gboolean editing_tools_editing_tool_window_real_button_press_event (GtkWidget* base, GdkEventButton* event);
static void editing_tools_editing_tool_window_real_realize (GtkWidget* base);
#define RESOURCES_TRANSIENT_WINDOW_OPACITY 0.90
static void editing_tools_editing_tool_window_finalize (GObject * obj);
gpointer editing_tools_photo_canvas_ref (gpointer instance);
void editing_tools_photo_canvas_unref (gpointer instance);
GParamSpec* editing_tools_param_spec_photo_canvas (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void editing_tools_value_set_photo_canvas (GValue* value, gpointer v_object);
void editing_tools_value_take_photo_canvas (GValue* value, gpointer v_object);
gpointer editing_tools_value_get_photo_canvas (const GValue* value);
GType editing_tools_photo_canvas_get_type (void) G_GNUC_CONST;
GType data_object_get_type (void) G_GNUC_CONST;
GType data_source_get_type (void) G_GNUC_CONST;
GType thumbnail_source_get_type (void) G_GNUC_CONST;
GType media_source_get_type (void) G_GNUC_CONST;
GType photo_source_get_type (void) G_GNUC_CONST;
GType photo_get_type (void) G_GNUC_CONST;
GType dimensions_get_type (void) G_GNUC_CONST;
Dimensions* dimensions_dup (const Dimensions* self);
void dimensions_free (Dimensions* self);
#define EDITING_TOOLS_PHOTO_CANVAS_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_PHOTO_CANVAS, EditingToolsPhotoCanvasPrivate))
enum  {
	EDITING_TOOLS_PHOTO_CANVAS_DUMMY_PROPERTY
};
EditingToolsPhotoCanvas* editing_tools_photo_canvas_construct (GType object_type, GtkWindow* container, GdkWindow* drawing_window, Photo* photo, cairo_t* default_ctx, Dimensions* surface_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position);
static cairo_surface_t* editing_tools_photo_canvas_pixbuf_to_surface (EditingToolsPhotoCanvas* self, cairo_t* default_ctx, GdkPixbuf* pixbuf, GdkRectangle* pos);
void editing_tools_photo_canvas_unscaled_to_raw_rect (EditingToolsPhotoCanvas* self, GdkRectangle* rectangle, GdkRectangle* result);
void photo_unscaled_to_raw_rect (Photo* self, GdkRectangle* unscaled_rect, GdkRectangle* result);
void editing_tools_photo_canvas_active_to_unscaled_point (EditingToolsPhotoCanvas* self, GdkPoint* active_point, GdkPoint* result);
void editing_tools_photo_canvas_get_scaled_pixbuf_position (EditingToolsPhotoCanvas* self, GdkRectangle* result);
GType photo_exception_get_type (void) G_GNUC_CONST;
void media_source_get_dimensions (MediaSource* self, PhotoException disallowed_steps, Dimensions* result);
void editing_tools_photo_canvas_active_to_unscaled_rect (EditingToolsPhotoCanvas* self, GdkRectangle* active_rect, GdkRectangle* result);
void editing_tools_photo_canvas_user_to_active_point (EditingToolsPhotoCanvas* self, GdkPoint* user_point, GdkPoint* result);
void editing_tools_photo_canvas_user_to_active_rect (EditingToolsPhotoCanvas* self, GdkRectangle* user_rect, GdkRectangle* result);
Photo* editing_tools_photo_canvas_get_photo (EditingToolsPhotoCanvas* self);
GtkWindow* editing_tools_photo_canvas_get_container (EditingToolsPhotoCanvas* self);
GdkWindow* editing_tools_photo_canvas_get_drawing_window (EditingToolsPhotoCanvas* self);
cairo_t* editing_tools_photo_canvas_get_default_ctx (EditingToolsPhotoCanvas* self);
void editing_tools_photo_canvas_get_surface_dim (EditingToolsPhotoCanvas* self, Dimensions* result);
GType scaling_get_type (void) G_GNUC_CONST;
GType scale_constraint_get_type (void) G_GNUC_CONST;
Scaling* scaling_dup (const Scaling* self);
void scaling_free (Scaling* self);
void editing_tools_photo_canvas_get_scaling (EditingToolsPhotoCanvas* self, Scaling* result);
void scaling_for_viewport (Dimensions* viewport, gboolean scale_up, Scaling* result);
void editing_tools_photo_canvas_set_surface (EditingToolsPhotoCanvas* self, cairo_t* default_ctx, Dimensions* surface_dim);
cairo_surface_t* editing_tools_photo_canvas_get_scaled_surface (EditingToolsPhotoCanvas* self);
GdkPixbuf* editing_tools_photo_canvas_get_scaled_pixbuf (EditingToolsPhotoCanvas* self);
void editing_tools_photo_canvas_resized_pixbuf (EditingToolsPhotoCanvas* self, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position);
void editing_tools_photo_canvas_repaint (EditingToolsPhotoCanvas* self);
static void editing_tools_photo_canvas_real_repaint (EditingToolsPhotoCanvas* self);
void editing_tools_photo_canvas_paint_pixbuf (EditingToolsPhotoCanvas* self, GdkPixbuf* pixbuf);
void set_source_color_from_string (cairo_t* ctx, const gchar* spec);
GType box_get_type (void) G_GNUC_CONST;
Box* box_dup (const Box* self);
void box_free (Box* self);
void editing_tools_photo_canvas_paint_pixbuf_area (EditingToolsPhotoCanvas* self, GdkPixbuf* pixbuf, Box* source_area);
gint box_get_width (Box *self);
gint box_get_height (Box *self);
void editing_tools_photo_canvas_paint_surface (EditingToolsPhotoCanvas* self, cairo_surface_t* surface, gboolean over);
void editing_tools_photo_canvas_paint_surface_area (EditingToolsPhotoCanvas* self, cairo_surface_t* surface, Box* source_area, gboolean over);
void editing_tools_photo_canvas_draw_box (EditingToolsPhotoCanvas* self, cairo_t* ctx, Box* box);
void box_get_rectangle (Box *self, GdkRectangle* result);
void editing_tools_photo_canvas_draw_text (EditingToolsPhotoCanvas* self, cairo_t* ctx, const gchar* text, gint x, gint y, gboolean use_scaled_pos);
#define RESOURCES_ONIMAGE_FONT_BACKGROUND "rgba(255,255,255,0.5)"
#define RESOURCES_ONIMAGE_FONT_COLOR "#000000"
void editing_tools_photo_canvas_draw_horizontal_line (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint x, gint y, gint width, gboolean use_scaled_pos);
void editing_tools_photo_canvas_draw_vertical_line (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint x, gint y, gint height, gboolean use_scaled_pos);
void editing_tools_photo_canvas_erase_horizontal_line (EditingToolsPhotoCanvas* self, gint x, gint y, gint width);
void editing_tools_photo_canvas_draw_circle (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint active_center_x, gint active_center_y, gint radius);
void editing_tools_photo_canvas_erase_vertical_line (EditingToolsPhotoCanvas* self, gint x, gint y, gint height);
void editing_tools_photo_canvas_erase_box (EditingToolsPhotoCanvas* self, Box* box);
void editing_tools_photo_canvas_invalidate_area (EditingToolsPhotoCanvas* self, Box* area);
static void g_cclosure_user_marshal_VOID__POINTER_BOXED (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void g_cclosure_user_marshal_VOID__BOXED_OBJECT_BOXED (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void editing_tools_photo_canvas_finalize (EditingToolsPhotoCanvas * obj);
gpointer editing_tools_editing_tool_ref (gpointer instance);
void editing_tools_editing_tool_unref (gpointer instance);
GParamSpec* editing_tools_param_spec_editing_tool (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void editing_tools_value_set_editing_tool (GValue* value, gpointer v_object);
void editing_tools_value_take_editing_tool (GValue* value, gpointer v_object);
gpointer editing_tools_value_get_editing_tool (const GValue* value);
GType editing_tools_editing_tool_get_type (void) G_GNUC_CONST;
#define EDITING_TOOLS_EDITING_TOOL_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingToolPrivate))
enum  {
	EDITING_TOOLS_EDITING_TOOL_DUMMY_PROPERTY
};
EditingToolsEditingTool* editing_tools_editing_tool_construct (GType object_type, const gchar* name);
void editing_tools_editing_tool_activate (EditingToolsEditingTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_editing_tool_real_activate (EditingToolsEditingTool* self, EditingToolsPhotoCanvas* canvas);
EditingToolsEditingToolWindow* editing_tools_editing_tool_get_tool_window (EditingToolsEditingTool* self);
gboolean editing_tools_editing_tool_on_keypress (EditingToolsEditingTool* self, GdkEventKey* event);
static gboolean _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self);
void editing_tools_editing_tool_deactivate (EditingToolsEditingTool* self);
static void editing_tools_editing_tool_real_deactivate (EditingToolsEditingTool* self);
gboolean editing_tools_editing_tool_is_activated (EditingToolsEditingTool* self);
static EditingToolsEditingToolWindow* editing_tools_editing_tool_real_get_tool_window (EditingToolsEditingTool* self);
GdkPixbuf* editing_tools_editing_tool_get_display_pixbuf (EditingToolsEditingTool* self, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error);
static GdkPixbuf* editing_tools_editing_tool_real_get_display_pixbuf (EditingToolsEditingTool* self, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error);
void dimensions_init (Dimensions *self, gint width, gint height);
void editing_tools_editing_tool_on_left_click (EditingToolsEditingTool* self, gint x, gint y);
static void editing_tools_editing_tool_real_on_left_click (EditingToolsEditingTool* self, gint x, gint y);
void editing_tools_editing_tool_on_left_released (EditingToolsEditingTool* self, gint x, gint y);
static void editing_tools_editing_tool_real_on_left_released (EditingToolsEditingTool* self, gint x, gint y);
void editing_tools_editing_tool_on_motion (EditingToolsEditingTool* self, gint x, gint y, GdkModifierType mask);
static void editing_tools_editing_tool_real_on_motion (EditingToolsEditingTool* self, gint x, gint y, GdkModifierType mask);
gboolean editing_tools_editing_tool_on_leave_notify_event (EditingToolsEditingTool* self);
static gboolean editing_tools_editing_tool_real_on_leave_notify_event (EditingToolsEditingTool* self);
static gboolean editing_tools_editing_tool_real_on_keypress (EditingToolsEditingTool* self, GdkEventKey* event);
void editing_tools_editing_tool_notify_cancel (EditingToolsEditingTool* self);
void editing_tools_editing_tool_paint (EditingToolsEditingTool* self, cairo_t* ctx);
static void editing_tools_editing_tool_real_paint (EditingToolsEditingTool* self, cairo_t* ctx);
GType command_get_type (void) G_GNUC_CONST;
static void g_cclosure_user_marshal_VOID__OBJECT_OBJECT_BOXED_BOOLEAN (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data);
static void editing_tools_editing_tool_finalize (EditingToolsEditingTool * obj);
GType editing_tools_crop_tool_get_type (void) G_GNUC_CONST;
static GType editing_tools_crop_tool_crop_tool_window_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
GType box_location_get_type (void) G_GNUC_CONST;
static gpointer editing_tools_crop_tool_constraint_description_ref (gpointer instance);
static void editing_tools_crop_tool_constraint_description_unref (gpointer instance);
static GParamSpec* editing_tools_crop_tool_param_spec_constraint_description (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) G_GNUC_UNUSED;
static void editing_tools_crop_tool_value_set_constraint_description (GValue* value, gpointer v_object) G_GNUC_UNUSED;
static void editing_tools_crop_tool_value_take_constraint_description (GValue* value, gpointer v_object) G_GNUC_UNUSED;
static gpointer editing_tools_crop_tool_value_get_constraint_description (const GValue* value) G_GNUC_UNUSED;
static GType editing_tools_crop_tool_constraint_description_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static GType editing_tools_crop_tool_reticle_orientation_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static GType editing_tools_crop_tool_constraint_mode_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
#define EDITING_TOOLS_CROP_TOOL_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropToolPrivate))
enum  {
	EDITING_TOOLS_CROP_TOOL_DUMMY_PROPERTY
};
static EditingToolsCropToolReticleOrientation editing_tools_crop_tool_reticle_orientation_toggle (EditingToolsCropToolReticleOrientation self);
static EditingToolsCropToolConstraintDescription** editing_tools_crop_tool_create_constraints (int* result_length1);
static GtkListStore* editing_tools_crop_tool_create_constraint_list (EditingToolsCropToolConstraintDescription** constraint_data, int constraint_data_length1);
#define EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO (-1.0f)
#define EDITING_TOOLS_CROP_TOOL_CROP_INIT_X_PCT 0.15
#define EDITING_TOOLS_CROP_TOOL_CROP_INIT_Y_PCT 0.15
#define EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE 8
#define EDITING_TOOLS_CROP_TOOL_CROP_EXTERIOR_SATURATION 0.00f
#define EDITING_TOOLS_CROP_TOOL_CROP_EXTERIOR_RED_SHIFT -32
#define EDITING_TOOLS_CROP_TOOL_CROP_EXTERIOR_GREEN_SHIFT -32
#define EDITING_TOOLS_CROP_TOOL_CROP_EXTERIOR_BLUE_SHIFT -32
#define EDITING_TOOLS_CROP_TOOL_CROP_EXTERIOR_ALPHA_SHIFT 0
#define EDITING_TOOLS_CROP_TOOL_SCREEN_ASPECT_RATIO (-2.0f)
#define EDITING_TOOLS_CROP_TOOL_ORIGINAL_ASPECT_RATIO (-3.0f)
#define EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO (-4.0f)
#define EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS (-5.0f)
#define EDITING_TOOLS_CROP_TOOL_SEPARATOR (-6.0f)
#define EDITING_TOOLS_CROP_TOOL_MIN_ASPECT_RATIO (1.0f / 64.0f)
#define EDITING_TOOLS_CROP_TOOL_MAX_ASPECT_RATIO 64.0f
static EditingToolsCropTool* editing_tools_crop_tool_new (void);
static EditingToolsCropTool* editing_tools_crop_tool_construct (GType object_type);
EditingToolsCropTool* editing_tools_crop_tool_factory (void);
gboolean editing_tools_crop_tool_is_available (Photo* photo, Scaling* scaling);
void scaling_get_scaled_dimensions (Scaling *self, Dimensions* original, Dimensions* result);
void photo_get_original_dimensions (Photo* self, Dimensions* result);
static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_constraint_description_new (const gchar* new_name, gint new_basis_width, gint new_basis_height, gboolean new_pivotable, gfloat new_aspect_ratio);
static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_constraint_description_construct (GType object_type, const gchar* new_name, gint new_basis_width, gint new_basis_height, gboolean new_pivotable, gfloat new_aspect_ratio);
static void _vala_array_add4 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add5 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add6 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add7 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add8 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add9 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add10 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add11 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add12 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add13 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add14 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add15 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add16 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add17 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add18 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add19 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add20 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add21 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add22 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add23 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add24 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add25 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add26 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add27 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add28 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add29 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add30 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add31 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void _vala_array_add32 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value);
static void editing_tools_crop_tool_update_pivot_button_state (EditingToolsCropTool* self);
static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_get_selected_constraint (EditingToolsCropTool* self);
static gboolean editing_tools_crop_tool_on_width_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event);
static gboolean editing_tools_crop_tool_on_custom_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event);
static gboolean editing_tools_crop_tool_on_height_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event);
static void editing_tools_crop_tool_constrain_crop (EditingToolsCropTool* self, Box* crop, Box* result);
static void editing_tools_crop_tool_crop_resized (EditingToolsCropTool* self, Box* new_crop);
static void editing_tools_crop_tool_on_width_insert_text (EditingToolsCropTool* self, const gchar* text, gint length, gint* position);
static void editing_tools_crop_tool_on_entry_insert_text (EditingToolsCropTool* self, GtkEntry* sender, const gchar* text, gint length, gint* position);
static void editing_tools_crop_tool_on_height_insert_text (EditingToolsCropTool* self, const gchar* text, gint length, gint* position);
static gfloat editing_tools_crop_tool_get_constraint_aspect_ratio (EditingToolsCropTool* self);
static gfloat editing_tools_crop_tool_get_constraint_aspect_ratio_for_constraint (EditingToolsCropTool* self, EditingToolsCropToolConstraintDescription* constraint, Photo* photo);
static void editing_tools_crop_tool_constraint_changed (EditingToolsCropTool* self);
static void editing_tools_crop_tool_set_custom_constraint_mode (EditingToolsCropTool* self);
static void editing_tools_crop_tool_set_normal_constraint_mode (EditingToolsCropTool* self);
GType configuration_facade_get_type (void) G_GNUC_CONST;
GType config_facade_get_type (void) G_GNUC_CONST;
ConfigFacade* config_facade_get_instance (void);
gint configuration_facade_get_last_crop_width (ConfigurationFacade* self);
gint configuration_facade_get_last_crop_height (ConfigurationFacade* self);
void box_adjust_height (Box *self, gint height);
void box_adjust_width (Box *self, gint width);
static void editing_tools_crop_tool_get_photo_dimensions (EditingToolsCropTool* self, Dimensions* result);
gboolean photo_get_straighten (Photo* self, gdouble* theta);
void clamp_inside_rotated_image (Box* src, gint img_w, gint img_h, gdouble angle_deg, gboolean preserve_geom, Box* result);
static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_get_last_constraint (EditingToolsCropTool* self, gint* index);
gint configuration_facade_get_last_crop_menu_choice (ConfigurationFacade* self);
static void editing_tools_crop_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas);
static void editing_tools_crop_tool_bind_canvas_handlers (EditingToolsCropTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_crop_tool_prepare_ctx (EditingToolsCropTool* self, cairo_t* ctx, Dimensions* dim);
static EditingToolsCropToolCropToolWindow* editing_tools_crop_tool_crop_tool_window_new (GtkWindow* container);
static EditingToolsCropToolCropToolWindow* editing_tools_crop_tool_crop_tool_window_construct (GType object_type, GtkWindow* container);
gboolean photo_has_crop (Photo* self);
static gboolean editing_tools_crop_tool_constraint_description_is_separator (EditingToolsCropToolConstraintDescription* self);
static void editing_tools_crop_tool_bind_window_handlers (EditingToolsCropTool* self);
gboolean photo_get_crop (Photo* self, Box* crop, PhotoException exceptions);
void box_init (Box *self, gint left, gint top, gint right, gint bottom);
void box_get_scaled_similar (Box *self, Dimensions* original, Dimensions* scaled, Box* result);
void dimensions_for_rectangle (GdkRectangle* rect, Dimensions* result);
static void _editing_tools_crop_tool_prepare_ctx_editing_tools_photo_canvas_new_surface (EditingToolsPhotoCanvas* _sender, cairo_t* ctx, Dimensions* dim, gpointer self);
static void editing_tools_crop_tool_on_resized_pixbuf (EditingToolsCropTool* self, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position);
static void _editing_tools_crop_tool_on_resized_pixbuf_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self);
static void editing_tools_crop_tool_unbind_canvas_handlers (EditingToolsCropTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_crop_tool_on_crop_ok (EditingToolsCropTool* self);
static void _editing_tools_crop_tool_on_crop_ok_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void _editing_tools_editing_tool_notify_cancel_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void _editing_tools_crop_tool_constraint_changed_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self);
static void editing_tools_crop_tool_on_pivot_button_clicked (EditingToolsCropTool* self);
static void _editing_tools_crop_tool_on_pivot_button_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self);
static gboolean _editing_tools_crop_tool_on_width_entry_focus_out_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self);
static gboolean _editing_tools_crop_tool_on_height_entry_focus_out_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self);
static void _editing_tools_crop_tool_on_width_insert_text_gtk_editable_insert_text (GtkEditable* _sender, const gchar* new_text, gint new_text_length, gint* position, gpointer self);
static void _editing_tools_crop_tool_on_height_insert_text_gtk_editable_insert_text (GtkEditable* _sender, const gchar* new_text, gint new_text_length, gint* position, gpointer self);
static void editing_tools_crop_tool_unbind_window_handlers (EditingToolsCropTool* self);
static gboolean editing_tools_crop_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event);
static void editing_tools_crop_tool_real_deactivate (EditingToolsEditingTool* base);
static EditingToolsEditingToolWindow* editing_tools_crop_tool_real_get_tool_window (EditingToolsEditingTool* base);
static GdkPixbuf* editing_tools_crop_tool_real_get_display_pixbuf (EditingToolsEditingTool* base, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error);
GType backing_fetch_mode_get_type (void) G_GNUC_CONST;
GdkPixbuf* photo_get_pixbuf_with_options (Photo* self, Scaling* scaling, PhotoException exceptions, BackingFetchMode fetch_mode, GError** error);
void dimensions_for_pixbuf (GdkPixbuf* pixbuf, Dimensions* result);
static void editing_tools_crop_tool_real_on_left_click (EditingToolsEditingTool* base, gint x, gint y);
void box_get_offset (Box *self, gint xofs, gint yofs, Box* result);
BoxLocation box_approx_location (Box *self, gint x, gint y);
static void editing_tools_crop_tool_real_on_left_released (EditingToolsEditingTool* base, gint x, gint y);
static void editing_tools_crop_tool_update_cursor (EditingToolsCropTool* self, gint x, gint y);
static void editing_tools_crop_tool_real_on_motion (EditingToolsEditingTool* base, gint x, gint y, GdkModifierType mask);
static gboolean editing_tools_crop_tool_on_canvas_manipulation (EditingToolsCropTool* self, gint x, gint y);
static void editing_tools_crop_tool_real_paint (EditingToolsEditingTool* base, cairo_t* default_ctx);
static void editing_tools_crop_tool_paint_crop_tool (EditingToolsCropTool* self, Box* crop);
void configuration_facade_set_last_crop_menu_choice (ConfigurationFacade* self, gint choice);
void configuration_facade_set_last_crop_width (ConfigurationFacade* self, gint choice);
void configuration_facade_set_last_crop_height (ConfigurationFacade* self, gint choice);
#define RESOURCES_CROP_LABEL _ ("Crop")
#define RESOURCES_CROP_TOOLTIP _ ("Crop the photo’s size")
CropCommand* crop_command_new (Photo* photo, Box* crop, const gchar* name, const gchar* explanation);
CropCommand* crop_command_construct (GType object_type, Photo* photo, Box* crop, const gchar* name, const gchar* explanation);
GType page_command_get_type (void) G_GNUC_CONST;
GType single_data_source_command_get_type (void) G_GNUC_CONST;
GType generic_photo_transformation_command_get_type (void) G_GNUC_CONST;
GType crop_command_get_type (void) G_GNUC_CONST;
void box_get_dimensions (Box *self, Dimensions* result);
static gint editing_tools_crop_tool_eval_radial_line (EditingToolsCropTool* self, gdouble center_x, gdouble center_y, gdouble bounds_x, gdouble bounds_y, gdouble user_x);
static gboolean _box_equal (const Box * s1, const Box * s2);
static void editing_tools_crop_tool_crop_moved (EditingToolsCropTool* self, Box* new_crop);
gboolean box_equals (Box *self, Box* box);
GType box_complements_get_type (void) G_GNUC_CONST;
BoxComplements box_resized_complements (Box *self, Box* resized, Box* horizontal, gboolean* horizontal_enlarged, Box* vertical, gboolean* vertical_enlarged);
static void editing_tools_crop_tool_set_area_alpha (EditingToolsCropTool* self, Box* area, gdouble alpha);
void box_get_reduced (Box *self, gint amount, Box* result);
enum  {
	EDITING_TOOLS_CROP_TOOL_CONSTRAINT_DESCRIPTION_DUMMY_PROPERTY
};
static void editing_tools_crop_tool_constraint_description_finalize (EditingToolsCropToolConstraintDescription * obj);
enum  {
	EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_DUMMY_PROPERTY
};
#define RESOURCES_CANCEL_LABEL _ ("_Cancel")
#define EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_CONTROL_SPACING 8
static gboolean editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func (GtkTreeModel* model, GtkTreeIter* iter);
static gboolean _editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func_gtk_tree_view_row_separator_func (GtkTreeModel* model, GtkTreeIter* iter, gpointer self);
static void editing_tools_crop_tool_crop_tool_window_finalize (GObject * obj);
static void editing_tools_crop_tool_finalize (EditingToolsEditingTool * obj);
GType editing_tools_redeye_instance_get_type (void) G_GNUC_CONST;
EditingToolsRedeyeInstance* editing_tools_redeye_instance_dup (const EditingToolsRedeyeInstance* self);
void editing_tools_redeye_instance_free (EditingToolsRedeyeInstance* self);
#define EDITING_TOOLS_REDEYE_INSTANCE_MIN_RADIUS 4
#define EDITING_TOOLS_REDEYE_INSTANCE_MAX_RADIUS 32
#define EDITING_TOOLS_REDEYE_INSTANCE_DEFAULT_RADIUS 10
static void editing_tools_redeye_instance_init (EditingToolsRedeyeInstance *self);
void editing_tools_redeye_instance_to_bounds_rect (EditingToolsRedeyeInstance* inst, GdkRectangle* result);
void editing_tools_redeye_instance_from_bounds_rect (GdkRectangle* rect, EditingToolsRedeyeInstance* result);
GType editing_tools_redeye_tool_get_type (void) G_GNUC_CONST;
static GType editing_tools_redeye_tool_redeye_tool_window_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
#define EDITING_TOOLS_REDEYE_TOOL_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeToolPrivate))
enum  {
	EDITING_TOOLS_REDEYE_TOOL_DUMMY_PROPERTY
};
static EditingToolsRedeyeTool* editing_tools_redeye_tool_new (void);
static EditingToolsRedeyeTool* editing_tools_redeye_tool_construct (GType object_type);
EditingToolsRedeyeTool* editing_tools_redeye_tool_factory (void);
gboolean editing_tools_redeye_tool_is_available (Photo* photo, Scaling* scaling);
static void editing_tools_redeye_tool_new_interaction_instance (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas, EditingToolsRedeyeInstance* result);
static void editing_tools_redeye_tool_prepare_ctx (EditingToolsRedeyeTool* self, cairo_t* ctx, Dimensions* dim);
static void editing_tools_redeye_tool_draw_redeye_instance (EditingToolsRedeyeTool* self, EditingToolsRedeyeInstance* inst);
static gboolean editing_tools_redeye_tool_on_size_slider_adjust (EditingToolsRedeyeTool* self, GtkScrollType type);
static void editing_tools_redeye_tool_on_apply (EditingToolsRedeyeTool* self);
void derotate_point_arb (GdkPoint* source_point, gint img_w, gint img_h, gdouble angle, GdkPoint* result);
GType redeye_command_get_type (void) G_GNUC_CONST;
#define RESOURCES_RED_EYE_LABEL _ ("Red-eye")
#define RESOURCES_RED_EYE_TOOLTIP _ ("Reduce or eliminate any red-eye effects in the photo")
RedeyeCommand* redeye_command_new (Photo* photo, EditingToolsRedeyeInstance* redeye_instance, const gchar* name, const gchar* explanation);
RedeyeCommand* redeye_command_construct (GType object_type, Photo* photo, EditingToolsRedeyeInstance* redeye_instance, const gchar* name, const gchar* explanation);
gpointer command_manager_ref (gpointer instance);
void command_manager_unref (gpointer instance);
GParamSpec* param_spec_command_manager (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_command_manager (GValue* value, gpointer v_object);
void value_take_command_manager (GValue* value, gpointer v_object);
gpointer value_get_command_manager (const GValue* value);
GType command_manager_get_type (void) G_GNUC_CONST;
CommandManager* app_window_get_command_manager (void);
void command_manager_execute (CommandManager* self, Command* command);
gpointer alteration_ref (gpointer instance);
void alteration_unref (gpointer instance);
GParamSpec* param_spec_alteration (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_alteration (GValue* value, gpointer v_object);
void value_take_alteration (GValue* value, gpointer v_object);
gpointer value_get_alteration (const GValue* value);
GType alteration_get_type (void) G_GNUC_CONST;
static void editing_tools_redeye_tool_on_photos_altered (EditingToolsRedeyeTool* self, GeeMap* map);
GdkPixbuf* photo_source_get_pixbuf (PhotoSource* self, Scaling* scaling, GError** error);
static void editing_tools_redeye_tool_on_close (EditingToolsRedeyeTool* self);
static void editing_tools_redeye_tool_on_canvas_resize (EditingToolsRedeyeTool* self);
static void editing_tools_redeye_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas);
static void editing_tools_redeye_tool_bind_canvas_handlers (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas);
static EditingToolsRedeyeToolRedeyeToolWindow* editing_tools_redeye_tool_redeye_tool_window_new (GtkWindow* container);
static EditingToolsRedeyeToolRedeyeToolWindow* editing_tools_redeye_tool_redeye_tool_window_construct (GType object_type, GtkWindow* container);
static void editing_tools_redeye_tool_bind_window_handlers (EditingToolsRedeyeTool* self);
gpointer data_collection_ref (gpointer instance);
void data_collection_unref (gpointer instance);
GParamSpec* param_spec_data_collection (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_data_collection (GValue* value, gpointer v_object);
void value_take_data_collection (GValue* value, gpointer v_object);
gpointer value_get_data_collection (const GValue* value);
GType data_collection_get_type (void) G_GNUC_CONST;
DataCollection* data_object_get_membership (DataObject* self);
static void _editing_tools_redeye_tool_on_photos_altered_data_collection_items_altered (DataCollection* _sender, GeeMap* items, gpointer self);
static void editing_tools_redeye_tool_real_deactivate (EditingToolsEditingTool* base);
static void editing_tools_redeye_tool_unbind_canvas_handlers (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_redeye_tool_unbind_window_handlers (EditingToolsRedeyeTool* self);
static void _editing_tools_redeye_tool_prepare_ctx_editing_tools_photo_canvas_new_surface (EditingToolsPhotoCanvas* _sender, cairo_t* ctx, Dimensions* dim, gpointer self);
static void _editing_tools_redeye_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self);
static void _editing_tools_redeye_tool_on_apply_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void _editing_tools_redeye_tool_on_close_gtk_button_clicked (GtkButton* _sender, gpointer self);
static gboolean _editing_tools_redeye_tool_on_size_slider_adjust_gtk_range_change_value (GtkRange* _sender, GtkScrollType scroll, gdouble new_value, gpointer self);
static EditingToolsEditingToolWindow* editing_tools_redeye_tool_real_get_tool_window (EditingToolsEditingTool* base);
static void editing_tools_redeye_tool_real_paint (EditingToolsEditingTool* base, cairo_t* ctx);
static void editing_tools_redeye_tool_real_on_left_click (EditingToolsEditingTool* base, gint x, gint y);
gboolean coord_in_rectangle (gint x, gint y, GdkRectangle* rect);
static void editing_tools_redeye_tool_real_on_left_released (EditingToolsEditingTool* base, gint x, gint y);
static void editing_tools_redeye_tool_real_on_motion (EditingToolsEditingTool* base, gint x, gint y, GdkModifierType mask);
static gboolean editing_tools_redeye_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event);
#define EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, EditingToolsRedeyeToolRedeyeToolWindowPrivate))
enum  {
	EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_DUMMY_PROPERTY
};
#define RESOURCES_APPLY_LABEL _ ("_Apply")
#define EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_CONTROL_SPACING 8
static void editing_tools_redeye_tool_redeye_tool_window_finalize (GObject * obj);
static void editing_tools_redeye_tool_finalize (EditingToolsEditingTool * obj);
GType editing_tools_adjust_tool_get_type (void) G_GNUC_CONST;
static GType editing_tools_adjust_tool_adjust_tool_window_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
gpointer pixel_transformer_ref (gpointer instance);
void pixel_transformer_unref (gpointer instance);
GParamSpec* param_spec_pixel_transformer (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_pixel_transformer (GValue* value, gpointer v_object);
void value_take_pixel_transformer (GValue* value, gpointer v_object);
gpointer value_get_pixel_transformer (const GValue* value);
GType pixel_transformer_get_type (void) G_GNUC_CONST;
gpointer pixel_transformation_bundle_ref (gpointer instance);
void pixel_transformation_bundle_unref (gpointer instance);
GParamSpec* param_spec_pixel_transformation_bundle (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_pixel_transformation_bundle (GValue* value, gpointer v_object);
void value_take_pixel_transformation_bundle (GValue* value, gpointer v_object);
gpointer value_get_pixel_transformation_bundle (const GValue* value);
GType pixel_transformation_bundle_get_type (void) G_GNUC_CONST;
gpointer one_shot_scheduler_ref (gpointer instance);
void one_shot_scheduler_unref (gpointer instance);
GParamSpec* param_spec_one_shot_scheduler (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_one_shot_scheduler (GValue* value, gpointer v_object);
void value_take_one_shot_scheduler (GValue* value, gpointer v_object);
gpointer value_get_one_shot_scheduler (const GValue* value);
GType one_shot_scheduler_get_type (void) G_GNUC_CONST;
#define EDITING_TOOLS_ADJUST_TOOL_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustToolPrivate))
enum  {
	EDITING_TOOLS_ADJUST_TOOL_DUMMY_PROPERTY
};
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH 160
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC ((guint) 100)
static EditingToolsAdjustTool* editing_tools_adjust_tool_new (void);
static EditingToolsAdjustTool* editing_tools_adjust_tool_construct (GType object_type);
EditingToolsAdjustTool* editing_tools_adjust_tool_factory (void);
gboolean editing_tools_adjust_tool_is_available (Photo* photo, Scaling* scaling);
static void editing_tools_adjust_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas);
static EditingToolsAdjustToolAdjustToolWindow* editing_tools_adjust_tool_adjust_tool_window_new (GtkWindow* container);
static EditingToolsAdjustToolAdjustToolWindow* editing_tools_adjust_tool_adjust_tool_window_construct (GType object_type, GtkWindow* container);
PixelTransformationBundle* photo_get_color_adjustments (Photo* self);
PixelTransformer* pixel_transformation_bundle_generate_transformer (PixelTransformationBundle* self);
PixelTransformer* pixel_transformer_new (void);
PixelTransformer* pixel_transformer_construct (GType object_type);
gpointer pixel_transformation_ref (gpointer instance);
void pixel_transformation_unref (gpointer instance);
GParamSpec* param_spec_pixel_transformation (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void value_set_pixel_transformation (GValue* value, gpointer v_object);
void value_take_pixel_transformation (GValue* value, gpointer v_object);
gpointer value_get_pixel_transformation (const GValue* value);
GType pixel_transformation_get_type (void) G_GNUC_CONST;
GType hsv_transformation_get_type (void) G_GNUC_CONST;
GType expansion_transformation_get_type (void) G_GNUC_CONST;
GType pixel_transformation_type_get_type (void) G_GNUC_CONST;
PixelTransformation* pixel_transformation_bundle_get_transformation (PixelTransformationBundle* self, PixelTransformationType type);
GType rgb_histogram_manipulator_get_type (void) G_GNUC_CONST;
void rgb_histogram_manipulator_set_left_nub_position (RGBHistogramManipulator* self, gint user_nub_pos);
gint expansion_transformation_get_black_point (ExpansionTransformation* self);
void rgb_histogram_manipulator_set_right_nub_position (RGBHistogramManipulator* self, gint user_nub_pos);
gint expansion_transformation_get_white_point (ExpansionTransformation* self);
GType shadow_detail_transformation_get_type (void) G_GNUC_CONST;
void pixel_transformer_attach_transformation (PixelTransformer* self, PixelTransformation* trans);
gfloat shadow_detail_transformation_get_parameter (ShadowDetailTransformation* self);
GType highlight_detail_transformation_get_type (void) G_GNUC_CONST;
gfloat highlight_detail_transformation_get_parameter (HighlightDetailTransformation* self);
GType rgb_transformation_get_type (void) G_GNUC_CONST;
GType temperature_transformation_get_type (void) G_GNUC_CONST;
gfloat temperature_transformation_get_parameter (TemperatureTransformation* self);
GType tint_transformation_get_type (void) G_GNUC_CONST;
gfloat tint_transformation_get_parameter (TintTransformation* self);
GType saturation_transformation_get_type (void) G_GNUC_CONST;
gfloat saturation_transformation_get_parameter (SaturationTransformation* self);
GType exposure_transformation_get_type (void) G_GNUC_CONST;
gfloat exposure_transformation_get_parameter (ExposureTransformation* self);
GType contrast_transformation_get_type (void) G_GNUC_CONST;
gfloat contrast_transformation_get_parameter (ContrastTransformation* self);
static void editing_tools_adjust_tool_bind_canvas_handlers (EditingToolsAdjustTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_adjust_tool_bind_window_handlers (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_init_fp_pixel_cache (EditingToolsAdjustTool* self, GdkPixbuf* source);
static void editing_tools_adjust_tool_on_photos_altered (EditingToolsAdjustTool* self, GeeMap* map);
static void _editing_tools_adjust_tool_on_photos_altered_data_collection_items_altered (DataCollection* _sender, GeeMap* items, gpointer self);
static EditingToolsEditingToolWindow* editing_tools_adjust_tool_real_get_tool_window (EditingToolsEditingTool* base);
static void editing_tools_adjust_tool_real_deactivate (EditingToolsEditingTool* base);
static void editing_tools_adjust_tool_unbind_canvas_handlers (EditingToolsAdjustTool* self, EditingToolsPhotoCanvas* canvas);
static void editing_tools_adjust_tool_unbind_window_handlers (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_real_paint (EditingToolsEditingTool* base, cairo_t* ctx);
void pixel_transformer_transform_from_fp (PixelTransformer* self, gfloat** fp_pixel_cache, int* fp_pixel_cache_length1, GdkPixbuf* dest);
void pixel_transformer_transform_to_other_pixbuf (PixelTransformer* self, GdkPixbuf* source, GdkPixbuf* dest, GCancellable* cancellable);
void rgb_histogram_manipulator_update_histogram (RGBHistogramManipulator* self, GdkPixbuf* source_pixbuf);
static GdkPixbuf* editing_tools_adjust_tool_real_get_display_pixbuf (EditingToolsEditingTool* base, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error);
gboolean photo_has_color_adjustments (Photo* self);
static void editing_tools_adjust_tool_on_reset (EditingToolsAdjustTool* self);
static GType editing_tools_adjust_tool_adjust_tool_command_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static GType editing_tools_adjust_tool_adjust_reset_command_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static EditingToolsAdjustToolAdjustResetCommand* editing_tools_adjust_tool_adjust_reset_command_new (EditingToolsAdjustTool* owner, PixelTransformationBundle* current);
static EditingToolsAdjustToolAdjustResetCommand* editing_tools_adjust_tool_adjust_reset_command_construct (GType object_type, EditingToolsAdjustTool* owner, PixelTransformationBundle* current);
static void editing_tools_adjust_tool_on_ok (EditingToolsAdjustTool* self);
#define RESOURCES_ADJUST_LABEL _ ("Adjust")
#define RESOURCES_ADJUST_TOOLTIP _ ("Adjust the photo’s color and tone")
AdjustColorsSingleCommand* adjust_colors_single_command_new (Photo* photo, PixelTransformationBundle* transformations, const gchar* name, const gchar* explanation);
AdjustColorsSingleCommand* adjust_colors_single_command_construct (GType object_type, Photo* photo, PixelTransformationBundle* transformations, const gchar* name, const gchar* explanation);
GType adjust_colors_single_command_get_type (void) G_GNUC_CONST;
static void editing_tools_adjust_tool_update_transformations (EditingToolsAdjustTool* self, PixelTransformationBundle* new_transformations);
GeeIterable* pixel_transformation_bundle_get_transformations (PixelTransformationBundle* self);
static void editing_tools_adjust_tool_update_transformation (EditingToolsAdjustTool* self, PixelTransformation* new_transformation);
PixelTransformationType pixel_transformation_get_transformation_type (PixelTransformation* self);
void pixel_transformer_replace_transformation (PixelTransformer* self, PixelTransformation* old_trans, PixelTransformation* new_trans);
void pixel_transformation_bundle_set (PixelTransformationBundle* self, PixelTransformation* transformation);
static void editing_tools_adjust_tool_slider_updated (EditingToolsAdjustTool* self, PixelTransformation* new_transformation, const gchar* name);
static GType editing_tools_adjust_tool_slider_adjustment_command_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static EditingToolsAdjustToolSliderAdjustmentCommand* editing_tools_adjust_tool_slider_adjustment_command_new (EditingToolsAdjustTool* owner, PixelTransformation* old_transformation, PixelTransformation* new_transformation, const gchar* name);
static EditingToolsAdjustToolSliderAdjustmentCommand* editing_tools_adjust_tool_slider_adjustment_command_construct (GType object_type, EditingToolsAdjustTool* owner, PixelTransformation* old_transformation, PixelTransformation* new_transformation, const gchar* name);
static void editing_tools_adjust_tool_on_temperature_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_temperature_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_temperature_adjustment_one_shot_callback (gpointer self);
OneShotScheduler* one_shot_scheduler_new (const gchar* name, OneShotCallback callback, void* callback_target);
OneShotScheduler* one_shot_scheduler_construct (GType object_type, const gchar* name, OneShotCallback callback, void* callback_target);
void one_shot_scheduler_after_timeout (OneShotScheduler* self, guint msec, gboolean reschedule);
TemperatureTransformation* temperature_transformation_new (gfloat client_parameter);
TemperatureTransformation* temperature_transformation_construct (GType object_type, gfloat client_parameter);
static void editing_tools_adjust_tool_on_tint_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_tint_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_tint_adjustment_one_shot_callback (gpointer self);
TintTransformation* tint_transformation_new (gfloat client_param);
TintTransformation* tint_transformation_construct (GType object_type, gfloat client_param);
static void editing_tools_adjust_tool_on_contrast_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_contrast_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_contrast_adjustment_one_shot_callback (gpointer self);
ContrastTransformation* contrast_transformation_new (gfloat client_parameter);
ContrastTransformation* contrast_transformation_construct (GType object_type, gfloat client_parameter);
static void editing_tools_adjust_tool_on_saturation_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_saturation_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_saturation_adjustment_one_shot_callback (gpointer self);
SaturationTransformation* saturation_transformation_new (gfloat client_parameter);
SaturationTransformation* saturation_transformation_construct (GType object_type, gfloat client_parameter);
static void editing_tools_adjust_tool_on_exposure_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_exposure_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_exposure_adjustment_one_shot_callback (gpointer self);
ExposureTransformation* exposure_transformation_new (gfloat client_parameter);
ExposureTransformation* exposure_transformation_construct (GType object_type, gfloat client_parameter);
static void editing_tools_adjust_tool_on_shadows_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_shadows_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_shadows_adjustment_one_shot_callback (gpointer self);
ShadowDetailTransformation* shadow_detail_transformation_new (gfloat user_intensity);
ShadowDetailTransformation* shadow_detail_transformation_construct (GType object_type, gfloat user_intensity);
static void editing_tools_adjust_tool_on_highlights_adjustment (EditingToolsAdjustTool* self);
static void editing_tools_adjust_tool_on_delayed_highlights_adjustment (EditingToolsAdjustTool* self);
static void _editing_tools_adjust_tool_on_delayed_highlights_adjustment_one_shot_callback (gpointer self);
HighlightDetailTransformation* highlight_detail_transformation_new (gfloat user_intensity);
HighlightDetailTransformation* highlight_detail_transformation_construct (GType object_type, gfloat user_intensity);
static void editing_tools_adjust_tool_on_histogram_constraint (EditingToolsAdjustTool* self);
gint rgb_histogram_manipulator_get_left_nub_position (RGBHistogramManipulator* self);
gint rgb_histogram_manipulator_get_right_nub_position (RGBHistogramManipulator* self);
ExpansionTransformation* expansion_transformation_new_from_extrema (gint black_point, gint white_point);
ExpansionTransformation* expansion_transformation_construct_from_extrema (GType object_type, gint black_point, gint white_point);
static void editing_tools_adjust_tool_on_canvas_resize (EditingToolsAdjustTool* self);
static gboolean editing_tools_adjust_tool_on_hscale_reset (EditingToolsAdjustTool* self, GtkWidget* widget, GdkEventButton* event);
gboolean has_only_key_modifier (GdkModifierType field, GdkModifierType mask);
static void _editing_tools_adjust_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self);
static void _editing_tools_adjust_tool_on_ok_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_reset_gtk_button_clicked (GtkButton* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_exposure_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_contrast_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_saturation_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_tint_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_temperature_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_shadows_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_highlights_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self);
static void _editing_tools_adjust_tool_on_histogram_constraint_rgb_histogram_manipulator_nub_position_changed (RGBHistogramManipulator* _sender, gpointer self);
static gboolean _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
gboolean editing_tools_adjust_tool_enhance (EditingToolsAdjustTool* self);
static GType editing_tools_adjust_tool_adjust_enhance_command_get_type (void) G_GNUC_CONST G_GNUC_UNUSED;
static EditingToolsAdjustToolAdjustEnhanceCommand* editing_tools_adjust_tool_adjust_enhance_command_new (EditingToolsAdjustTool* owner, Photo* photo);
static EditingToolsAdjustToolAdjustEnhanceCommand* editing_tools_adjust_tool_adjust_enhance_command_construct (GType object_type, EditingToolsAdjustTool* owner, Photo* photo);
static void editing_tools_adjust_tool_set_adjustments (EditingToolsAdjustTool* self, PixelTransformationBundle* new_adjustments);
static void editing_tools_adjust_tool_update_slider (EditingToolsAdjustTool* self, PixelTransformation* transformation);
static gboolean editing_tools_adjust_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event);
enum  {
	EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_WINDOW_DUMMY_PROPERTY
};
#define EXPOSURE_TRANSFORMATION_MIN_PARAMETER (-16.0f)
#define EXPOSURE_TRANSFORMATION_MAX_PARAMETER 16.0f
#define CONTRAST_TRANSFORMATION_MIN_PARAMETER (-16.0f)
#define CONTRAST_TRANSFORMATION_MAX_PARAMETER 16.0f
#define SATURATION_TRANSFORMATION_MIN_PARAMETER (-16.0f)
#define SATURATION_TRANSFORMATION_MAX_PARAMETER 16.0f
#define TINT_TRANSFORMATION_MIN_PARAMETER (-16.0f)
#define TINT_TRANSFORMATION_MAX_PARAMETER 16.0f
#define TEMPERATURE_TRANSFORMATION_MIN_PARAMETER (-16.0f)
#define TEMPERATURE_TRANSFORMATION_MAX_PARAMETER 16.0f
#define SHADOW_DETAIL_TRANSFORMATION_MIN_PARAMETER 0.0f
#define SHADOW_DETAIL_TRANSFORMATION_MAX_PARAMETER 32.0f
#define HIGHLIGHT_DETAIL_TRANSFORMATION_MIN_PARAMETER (-32.0f)
#define HIGHLIGHT_DETAIL_TRANSFORMATION_MAX_PARAMETER 0.0f
#define RESOURCES_OK_LABEL _ ("_OK")
RGBHistogramManipulator* rgb_histogram_manipulator_new (void);
RGBHistogramManipulator* rgb_histogram_manipulator_construct (GType object_type);
static void editing_tools_adjust_tool_adjust_tool_window_finalize (GObject * obj);
GType command_description_get_type (void) G_GNUC_CONST;
enum  {
	EDITING_TOOLS_ADJUST_TOOL_ADJUST_TOOL_COMMAND_DUMMY_PROPERTY
};
static void editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated (EditingToolsAdjustToolAdjustToolCommand* self);
static void _editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated_editing_tools_editing_tool_deactivated (EditingToolsEditingTool* _sender, gpointer self);
static EditingToolsAdjustToolAdjustToolCommand* editing_tools_adjust_tool_adjust_tool_command_construct (GType object_type, EditingToolsAdjustTool* owner, const gchar* name, const gchar* explanation);
Command* command_construct (GType object_type, const gchar* name, const gchar* explanation);
void command_manager_reset (CommandManager* self);
static void editing_tools_adjust_tool_adjust_tool_command_finalize (GObject * obj);
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommandPrivate))
enum  {
	EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND_DUMMY_PROPERTY
};
PixelTransformationBundle* pixel_transformation_bundle_copy (PixelTransformationBundle* self);
PixelTransformationBundle* pixel_transformation_bundle_new (void);
PixelTransformationBundle* pixel_transformation_bundle_construct (GType object_type);
void pixel_transformation_bundle_set_to_identity (PixelTransformationBundle* self);
static void editing_tools_adjust_tool_adjust_reset_command_real_execute (Command* base);
static void editing_tools_adjust_tool_adjust_reset_command_real_undo (Command* base);
static gboolean editing_tools_adjust_tool_adjust_reset_command_real_compress (Command* base, Command* command);
static void editing_tools_adjust_tool_adjust_reset_command_finalize (GObject * obj);
#define EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommandPrivate))
enum  {
	EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND_DUMMY_PROPERTY
};
static void editing_tools_adjust_tool_slider_adjustment_command_real_execute (Command* base);
static void editing_tools_adjust_tool_slider_adjustment_command_real_undo (Command* base);
static void editing_tools_adjust_tool_slider_adjustment_command_real_redo (Command* base);
static gboolean editing_tools_adjust_tool_slider_adjustment_command_real_compress (Command* base, Command* command);
void command_execute (Command* self);
static void editing_tools_adjust_tool_slider_adjustment_command_finalize (GObject * obj);
#define EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommandPrivate))
enum  {
	EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND_DUMMY_PROPERTY
};
#define RESOURCES_ENHANCE_LABEL _ ("Enhance")
#define RESOURCES_ENHANCE_TOOLTIP _ ("Automatically improve the photo’s appearance")
static void editing_tools_adjust_tool_adjust_enhance_command_real_execute (Command* base);
PixelTransformationBundle* photo_get_enhance_transformations (Photo* self);
static void editing_tools_adjust_tool_adjust_enhance_command_real_undo (Command* base);
static gboolean editing_tools_adjust_tool_adjust_enhance_command_real_compress (Command* base, Command* command);
GType enhance_single_command_get_type (void) G_GNUC_CONST;
DataSource* single_data_source_command_get_source (SingleDataSourceCommand* self);
gboolean data_source_equals (DataSource* self, DataSource* source);
static void editing_tools_adjust_tool_adjust_enhance_command_finalize (GObject * obj);
static void editing_tools_adjust_tool_finalize (EditingToolsEditingTool * obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


void editing_tools_preconfigure (void) {
}


void editing_tools_init (GError** error) {
}


void editing_tools_terminate (void) {
}


static void _editing_tools_editing_tool_window_suppress_warnings_glog_func (const gchar* log_domain, GLogLevelFlags log_levels, const gchar* message, gpointer self) {
#line 56 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_window_suppress_warnings ((EditingToolsEditingToolWindow*) self, log_domain, log_levels, message);
#line 1701 "EditingTools.c"
}


EditingToolsEditingToolWindow* editing_tools_editing_tool_window_construct (GType object_type, GtkWindow* container) {
	EditingToolsEditingToolWindow * self = NULL;
	GtkWindow* _tmp0_;
	GtkFrame* outer_frame = NULL;
	GtkFrame* _tmp1_;
	GtkFrame* _tmp2_;
	GtkFrame* _tmp3_;
	GtkFrame* _tmp4_;
#line 34 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WINDOW (container), NULL);
#line 34 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsEditingToolWindow*) g_object_new (object_type, NULL);
#line 35 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_set_decorated (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), FALSE);
#line 36 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = container;
#line 36 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_set_transient_for (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), _tmp0_);
#line 38 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = (GtkFrame*) gtk_frame_new (NULL);
#line 38 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp1_);
#line 38 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	outer_frame = _tmp1_;
#line 39 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_set_border_width (G_TYPE_CHECK_INSTANCE_CAST (outer_frame, gtk_container_get_type (), GtkContainer), (guint) 0);
#line 40 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_frame_set_shadow_type (outer_frame, GTK_SHADOW_OUT);
#line 42 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->layout_frame;
#line 42 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_set_border_width (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, gtk_container_get_type (), GtkContainer), (guint) EDITING_TOOLS_EDITING_TOOL_WINDOW_FRAME_BORDER);
#line 43 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->layout_frame;
#line 43 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_frame_set_shadow_type (_tmp3_, GTK_SHADOW_NONE);
#line 45 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->layout_frame;
#line 45 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (outer_frame, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, gtk_widget_get_type (), GtkWidget));
#line 46 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	GTK_CONTAINER_CLASS (editing_tools_editing_tool_window_parent_class)->add (G_TYPE_CHECK_INSTANCE_CAST (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (outer_frame, gtk_widget_get_type (), GtkWidget));
#line 48 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_add_events (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_widget_get_type (), GtkWidget), (gint) (GDK_BUTTON_PRESS_MASK | GDK_KEY_PRESS_MASK));
#line 49 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_set_focus_on_map (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), TRUE);
#line 50 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_set_accept_focus (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), TRUE);
#line 51 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_can_focus (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_widget_get_type (), GtkWidget), TRUE);
#line 56 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_log_set_handler ("Gdk", G_LOG_LEVEL_WARNING, _editing_tools_editing_tool_window_suppress_warnings_glog_func, self);
#line 34 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (outer_frame);
#line 34 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 1761 "EditingTools.c"
}


static void editing_tools_editing_tool_window_real_add (GtkContainer* base, GtkWidget* widget) {
	EditingToolsEditingToolWindow * self;
	GtkFrame* _tmp0_;
	GtkWidget* _tmp1_;
#line 63 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow);
#line 63 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GTK_IS_WIDGET (widget));
#line 64 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->layout_frame;
#line 64 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = widget;
#line 64 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_container_get_type (), GtkContainer), _tmp1_);
#line 1779 "EditingTools.c"
}


gboolean editing_tools_editing_tool_window_has_user_moved (EditingToolsEditingToolWindow* self) {
	gboolean result = FALSE;
	gboolean _tmp0_;
#line 67 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL_WINDOW (self), FALSE);
#line 68 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->user_moved;
#line 68 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 68 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 1794 "EditingTools.c"
}


static gboolean editing_tools_editing_tool_window_real_key_press_event (GtkWidget* base, GdkEventKey* event) {
	EditingToolsEditingToolWindow * self;
	gboolean result = FALSE;
	GdkEventKey* _tmp0_;
	gboolean _tmp1_;
	AppWindow* _tmp2_;
	AppWindow* _tmp3_;
	GdkEventKey* _tmp4_;
	gboolean _tmp5_ = FALSE;
	gboolean _tmp6_;
#line 71 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow);
#line 71 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 72 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = event;
#line 72 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = GTK_WIDGET_CLASS (editing_tools_editing_tool_window_parent_class)->key_press_event (G_TYPE_CHECK_INSTANCE_CAST (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), gtk_widget_get_type (), GtkWidget), _tmp0_);
#line 72 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 73 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 73 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 1822 "EditingTools.c"
	}
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = app_window_get_instance ();
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = event;
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit_by_name (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_widget_get_type (), GtkWidget), "key-press-event", _tmp4_, &_tmp5_);
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_;
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp3_);
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp6_;
#line 75 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 1840 "EditingTools.c"
}


static gboolean editing_tools_editing_tool_window_real_button_press_event (GtkWidget* base, GdkEventButton* event) {
	EditingToolsEditingToolWindow * self;
	gboolean result = FALSE;
	GdkEventButton* _tmp0_;
	guint _tmp1_;
	GdkEventButton* _tmp5_;
	guint _tmp6_;
	GdkEventButton* _tmp7_;
	gdouble _tmp8_;
	GdkEventButton* _tmp9_;
	gdouble _tmp10_;
	GdkEventButton* _tmp11_;
	guint32 _tmp12_;
#line 78 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow);
#line 78 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 80 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = event;
#line 80 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->button;
#line 80 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ != ((guint) 1)) {
#line 1867 "EditingTools.c"
		gboolean _tmp2_ = FALSE;
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (GTK_WIDGET_CLASS (editing_tools_editing_tool_window_parent_class)->button_press_event != NULL) {
#line 1871 "EditingTools.c"
			GdkEventButton* _tmp3_;
			gboolean _tmp4_;
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp3_ = event;
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp4_ = GTK_WIDGET_CLASS (editing_tools_editing_tool_window_parent_class)->button_press_event (G_TYPE_CHECK_INSTANCE_CAST (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), gtk_widget_get_type (), GtkWidget), _tmp3_);
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp2_ = _tmp4_;
#line 1880 "EditingTools.c"
		} else {
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp2_ = TRUE;
#line 1884 "EditingTools.c"
		}
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = _tmp2_;
#line 81 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 1890 "EditingTools.c"
	}
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = event;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_->button;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = event;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_->x_root;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = event;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_->y_root;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = event;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_->time;
#line 83 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_begin_move_drag (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), (gint) _tmp6_, (gint) _tmp8_, (gint) _tmp10_, _tmp12_);
#line 84 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_moved = TRUE;
#line 86 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 86 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 1916 "EditingTools.c"
}


static void editing_tools_editing_tool_window_real_realize (GtkWidget* base) {
	EditingToolsEditingToolWindow * self;
#line 89 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow);
#line 90 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_opacity (G_TYPE_CHECK_INSTANCE_TYPE (self, gtk_widget_get_type ()) ? ((GtkWidget*) self) : NULL, RESOURCES_TRANSIENT_WINDOW_OPACITY);
#line 92 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	GTK_WIDGET_CLASS (editing_tools_editing_tool_window_parent_class)->realize (G_TYPE_CHECK_INSTANCE_CAST (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_window_get_type (), GtkWindow), gtk_widget_get_type (), GtkWidget));
#line 1928 "EditingTools.c"
}


static void editing_tools_editing_tool_window_suppress_warnings (EditingToolsEditingToolWindow* self, const gchar* log_domain, GLogLevelFlags log_levels, const gchar* message) {
#line 95 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL_WINDOW (self));
#line 95 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (message != NULL);
#line 1937 "EditingTools.c"
}


static void editing_tools_editing_tool_window_class_init (EditingToolsEditingToolWindowClass * klass) {
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_window_parent_class = g_type_class_peek_parent (klass);
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsEditingToolWindowPrivate));
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((GtkContainerClass *) klass)->add = (void (*) (GtkContainer *, GtkWidget*)) editing_tools_editing_tool_window_real_add;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((GtkWidgetClass *) klass)->key_press_event = (gboolean (*) (GtkWidget *, GdkEventKey*)) editing_tools_editing_tool_window_real_key_press_event;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((GtkWidgetClass *) klass)->button_press_event = (gboolean (*) (GtkWidget *, GdkEventButton*)) editing_tools_editing_tool_window_real_button_press_event;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((GtkWidgetClass *) klass)->realize = (void (*) (GtkWidget *)) editing_tools_editing_tool_window_real_realize;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_editing_tool_window_finalize;
#line 1956 "EditingTools.c"
}


static void editing_tools_editing_tool_window_instance_init (EditingToolsEditingToolWindow * self) {
	GtkFrame* _tmp0_;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_EDITING_TOOL_WINDOW_GET_PRIVATE (self);
#line 31 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = (GtkFrame*) gtk_frame_new (NULL);
#line 31 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp0_);
#line 31 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->layout_frame = _tmp0_;
#line 32 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_moved = FALSE;
#line 1972 "EditingTools.c"
}


static void editing_tools_editing_tool_window_finalize (GObject * obj) {
	EditingToolsEditingToolWindow * self;
	GLogFunc _tmp0_;
	void* _tmp0__target;
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow);
#line 60 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = g_log_default_handler;
#line 60 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0__target = NULL;
#line 60 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_log_set_handler ("Gdk", G_LOG_LEVEL_WARNING, _tmp0_, _tmp0__target);
#line 31 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->layout_frame);
#line 28 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_editing_tool_window_parent_class)->finalize (obj);
#line 1992 "EditingTools.c"
}


GType editing_tools_editing_tool_window_get_type (void) {
	static volatile gsize editing_tools_editing_tool_window_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_editing_tool_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsEditingToolWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_editing_tool_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsEditingToolWindow), 0, (GInstanceInitFunc) editing_tools_editing_tool_window_instance_init, NULL };
		GType editing_tools_editing_tool_window_type_id;
		editing_tools_editing_tool_window_type_id = g_type_register_static (gtk_window_get_type (), "EditingToolsEditingToolWindow", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&editing_tools_editing_tool_window_type_id__volatile, editing_tools_editing_tool_window_type_id);
	}
	return editing_tools_editing_tool_window_type_id__volatile;
}


static gpointer _g_object_ref0 (gpointer self) {
#line 115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? g_object_ref (self) : NULL;
#line 2011 "EditingTools.c"
}


static gpointer _cairo_reference0 (gpointer self) {
#line 118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? cairo_reference (self) : NULL;
#line 2018 "EditingTools.c"
}


EditingToolsPhotoCanvas* editing_tools_photo_canvas_construct (GType object_type, GtkWindow* container, GdkWindow* drawing_window, Photo* photo, cairo_t* default_ctx, Dimensions* surface_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position) {
	EditingToolsPhotoCanvas* self = NULL;
	GtkWindow* _tmp0_;
	GtkWindow* _tmp1_;
	GdkWindow* _tmp2_;
	GdkWindow* _tmp3_;
	Photo* _tmp4_;
	Photo* _tmp5_;
	cairo_t* _tmp6_;
	cairo_t* _tmp7_;
	Dimensions _tmp8_;
	GdkRectangle _tmp9_;
	GdkPixbuf* _tmp10_;
	GdkPixbuf* _tmp11_;
	cairo_t* _tmp12_;
	GdkPixbuf* _tmp13_;
	GdkRectangle _tmp14_;
	cairo_surface_t* _tmp15_;
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WINDOW (container), NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GDK_IS_WINDOW (drawing_window), NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (default_ctx != NULL, NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (surface_dim != NULL, NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GDK_IS_PIXBUF (scaled), NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaled_position != NULL, NULL);
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsPhotoCanvas*) g_type_create_instance (object_type);
#line 115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = container;
#line 115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->container);
#line 115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->container = _tmp1_;
#line 116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = drawing_window;
#line 116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->drawing_window);
#line 116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->drawing_window = _tmp3_;
#line 117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = photo;
#line 117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->photo);
#line 117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->photo = _tmp5_;
#line 118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = default_ctx;
#line 118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _cairo_reference0 (_tmp6_);
#line 118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->default_ctx);
#line 118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->default_ctx = _tmp7_;
#line 119 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *surface_dim;
#line 119 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->surface_dim = _tmp8_;
#line 120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = *scaled_position;
#line 120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_position = _tmp9_;
#line 121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = scaled;
#line 121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _g_object_ref0 (_tmp10_);
#line 121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->scaled_pixbuf);
#line 121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_pixbuf = _tmp11_;
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = default_ctx;
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = scaled;
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = *scaled_position;
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = editing_tools_photo_canvas_pixbuf_to_surface (self, _tmp12_, _tmp13_, &_tmp14_);
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->scaled);
#line 122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled = _tmp15_;
#line 113 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 2118 "EditingTools.c"
}


void editing_tools_photo_canvas_unscaled_to_raw_rect (EditingToolsPhotoCanvas* self, GdkRectangle* rectangle, GdkRectangle* result) {
	Photo* _tmp0_;
	GdkRectangle _tmp1_;
	GdkRectangle _tmp2_ = {0};
#line 130 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 130 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (rectangle != NULL);
#line 131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->photo;
#line 131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = *rectangle;
#line 131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_unscaled_to_raw_rect (_tmp0_, &_tmp1_, &_tmp2_);
#line 131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp2_;
#line 131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2140 "EditingTools.c"
}


void editing_tools_photo_canvas_active_to_unscaled_point (EditingToolsPhotoCanvas* self, GdkPoint* active_point, GdkPoint* result) {
	GdkRectangle scaled_position = {0};
	GdkRectangle _tmp0_ = {0};
	Dimensions unscaled_dims = {0};
	Photo* _tmp1_;
	Dimensions _tmp2_ = {0};
	gdouble scale_factor_x = 0.0;
	Dimensions _tmp3_;
	gint _tmp4_;
	GdkRectangle _tmp5_;
	gint _tmp6_;
	gdouble scale_factor_y = 0.0;
	Dimensions _tmp7_;
	gint _tmp8_;
	GdkRectangle _tmp9_;
	gint _tmp10_;
	GdkPoint _result_ = {0};
	GdkPoint _tmp11_ = {0};
	GdkPoint _tmp12_;
	gint _tmp13_;
	GdkPoint _tmp14_;
	gint _tmp15_;
#line 134 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 134 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (active_point != NULL);
#line 135 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (self, &_tmp0_);
#line 135 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaled_position = _tmp0_;
#line 136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->photo;
#line 136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp2_);
#line 136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	unscaled_dims = _tmp2_;
#line 138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = unscaled_dims;
#line 138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.width;
#line 138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = scaled_position;
#line 138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.width;
#line 138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scale_factor_x = ((gdouble) _tmp4_) / ((gdouble) _tmp6_);
#line 140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = unscaled_dims;
#line 140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_.height;
#line 140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = scaled_position;
#line 140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.height;
#line 140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scale_factor_y = ((gdouble) _tmp8_) / ((gdouble) _tmp10_);
#line 143 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_.x = 0;
#line 143 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp11_;
#line 144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = *active_point;
#line 144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.x;
#line 144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.x = (gint) ((((gdouble) _tmp13_) * scale_factor_x) + 0.5);
#line 145 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = *active_point;
#line 145 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_.y;
#line 145 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.y = (gint) ((((gdouble) _tmp15_) * scale_factor_y) + 0.5);
#line 147 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _result_;
#line 147 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2220 "EditingTools.c"
}


void editing_tools_photo_canvas_active_to_unscaled_rect (EditingToolsPhotoCanvas* self, GdkRectangle* active_rect, GdkRectangle* result) {
	GdkPoint upper_left = {0};
	GdkPoint _tmp0_ = {0};
	GdkPoint lower_right = {0};
	GdkPoint _tmp1_ = {0};
	GdkRectangle _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	GdkPoint _tmp6_;
	gint _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	GdkPoint _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	GdkPoint _tmp14_;
	GdkPoint _tmp15_ = {0};
	GdkPoint _tmp16_;
	GdkPoint _tmp17_ = {0};
	GdkRectangle unscaled_rect = {0};
	GdkPoint _tmp18_;
	gint _tmp19_;
	GdkPoint _tmp20_;
	gint _tmp21_;
	GdkPoint _tmp22_;
	gint _tmp23_;
	GdkPoint _tmp24_;
	gint _tmp25_;
	GdkPoint _tmp26_;
	gint _tmp27_;
	GdkPoint _tmp28_;
	gint _tmp29_;
#line 150 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 150 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (active_rect != NULL);
#line 151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_.x = 0;
#line 151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left = _tmp0_;
#line 152 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_.x = 0;
#line 152 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right = _tmp1_;
#line 153 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *active_rect;
#line 153 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 153 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left.x = _tmp3_;
#line 154 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *active_rect;
#line 154 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.y;
#line 154 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left.y = _tmp5_;
#line 155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = upper_left;
#line 155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.x;
#line 155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *active_rect;
#line 155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.width;
#line 155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right.x = _tmp7_ + _tmp9_;
#line 156 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = upper_left;
#line 156 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.y;
#line 156 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = *active_rect;
#line 156 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.height;
#line 156 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right.y = _tmp11_ + _tmp13_;
#line 158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = upper_left;
#line 158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_active_to_unscaled_point (self, &_tmp14_, &_tmp15_);
#line 158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left = _tmp15_;
#line 159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = lower_right;
#line 159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_active_to_unscaled_point (self, &_tmp16_, &_tmp17_);
#line 159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right = _tmp17_;
#line 161 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memset (&unscaled_rect, 0, sizeof (GdkRectangle));
#line 162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = upper_left;
#line 162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.x;
#line 162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	unscaled_rect.x = _tmp19_;
#line 163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = upper_left;
#line 163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_.y;
#line 163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	unscaled_rect.y = _tmp21_;
#line 164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = lower_right;
#line 164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.x;
#line 164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = upper_left;
#line 164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_.x;
#line 164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	unscaled_rect.width = _tmp23_ - _tmp25_;
#line 165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = lower_right;
#line 165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_.y;
#line 165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = upper_left;
#line 165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = _tmp28_.y;
#line 165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	unscaled_rect.height = _tmp27_ - _tmp29_;
#line 167 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = unscaled_rect;
#line 167 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2352 "EditingTools.c"
}


void editing_tools_photo_canvas_user_to_active_point (EditingToolsPhotoCanvas* self, GdkPoint* user_point, GdkPoint* result) {
	GdkRectangle active_offsets = {0};
	GdkRectangle _tmp0_ = {0};
	GdkPoint _result_ = {0};
	GdkPoint _tmp1_ = {0};
	GdkPoint _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	GdkPoint _tmp6_;
	gint _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
#line 170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (user_point != NULL);
#line 171 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (self, &_tmp0_);
#line 171 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_offsets = _tmp0_;
#line 173 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_.x = 0;
#line 173 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp1_;
#line 174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *user_point;
#line 174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = active_offsets;
#line 174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.x;
#line 174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.x = _tmp3_ - _tmp5_;
#line 175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = *user_point;
#line 175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = active_offsets;
#line 175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.y;
#line 175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.y = _tmp7_ - _tmp9_;
#line 177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _result_;
#line 177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2405 "EditingTools.c"
}


void editing_tools_photo_canvas_user_to_active_rect (EditingToolsPhotoCanvas* self, GdkRectangle* user_rect, GdkRectangle* result) {
	GdkPoint upper_left = {0};
	GdkPoint _tmp0_ = {0};
	GdkPoint lower_right = {0};
	GdkPoint _tmp1_ = {0};
	GdkRectangle _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	GdkPoint _tmp6_;
	gint _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	GdkPoint _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	GdkPoint _tmp14_;
	GdkPoint _tmp15_ = {0};
	GdkPoint _tmp16_;
	GdkPoint _tmp17_ = {0};
	GdkRectangle active_rect = {0};
	GdkPoint _tmp18_;
	gint _tmp19_;
	GdkPoint _tmp20_;
	gint _tmp21_;
	GdkPoint _tmp22_;
	gint _tmp23_;
	GdkPoint _tmp24_;
	gint _tmp25_;
	GdkPoint _tmp26_;
	gint _tmp27_;
	GdkPoint _tmp28_;
	gint _tmp29_;
#line 180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (user_rect != NULL);
#line 181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_.x = 0;
#line 181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left = _tmp0_;
#line 182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_.x = 0;
#line 182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right = _tmp1_;
#line 183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *user_rect;
#line 183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left.x = _tmp3_;
#line 184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *user_rect;
#line 184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.y;
#line 184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left.y = _tmp5_;
#line 185 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = upper_left;
#line 185 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.x;
#line 185 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *user_rect;
#line 185 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.width;
#line 185 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right.x = _tmp7_ + _tmp9_;
#line 186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = upper_left;
#line 186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.y;
#line 186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = *user_rect;
#line 186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.height;
#line 186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right.y = _tmp11_ + _tmp13_;
#line 188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = upper_left;
#line 188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_user_to_active_point (self, &_tmp14_, &_tmp15_);
#line 188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	upper_left = _tmp15_;
#line 189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = lower_right;
#line 189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_user_to_active_point (self, &_tmp16_, &_tmp17_);
#line 189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	lower_right = _tmp17_;
#line 191 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memset (&active_rect, 0, sizeof (GdkRectangle));
#line 192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = upper_left;
#line 192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.x;
#line 192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_rect.x = _tmp19_;
#line 193 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = upper_left;
#line 193 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_.y;
#line 193 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_rect.y = _tmp21_;
#line 194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = lower_right;
#line 194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.x;
#line 194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = upper_left;
#line 194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_.x;
#line 194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_rect.width = _tmp23_ - _tmp25_;
#line 195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = lower_right;
#line 195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_.y;
#line 195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = upper_left;
#line 195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = _tmp28_.y;
#line 195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_rect.height = _tmp27_ - _tmp29_;
#line 197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = active_rect;
#line 197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2537 "EditingTools.c"
}


Photo* editing_tools_photo_canvas_get_photo (EditingToolsPhotoCanvas* self) {
	Photo* result = NULL;
	Photo* _tmp0_;
	Photo* _tmp1_;
#line 200 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->photo;
#line 201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2555 "EditingTools.c"
}


GtkWindow* editing_tools_photo_canvas_get_container (EditingToolsPhotoCanvas* self) {
	GtkWindow* result = NULL;
	GtkWindow* _tmp0_;
	GtkWindow* _tmp1_;
#line 204 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->container;
#line 205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2573 "EditingTools.c"
}


GdkWindow* editing_tools_photo_canvas_get_drawing_window (EditingToolsPhotoCanvas* self) {
	GdkWindow* result = NULL;
	GdkWindow* _tmp0_;
	GdkWindow* _tmp1_;
#line 208 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->drawing_window;
#line 209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2591 "EditingTools.c"
}


cairo_t* editing_tools_photo_canvas_get_default_ctx (EditingToolsPhotoCanvas* self) {
	cairo_t* result = NULL;
	cairo_t* _tmp0_;
	cairo_t* _tmp1_;
#line 212 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _cairo_reference0 (_tmp0_);
#line 213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2609 "EditingTools.c"
}


void editing_tools_photo_canvas_get_surface_dim (EditingToolsPhotoCanvas* self, Dimensions* result) {
	Dimensions _tmp0_;
#line 216 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->surface_dim;
#line 217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp0_;
#line 217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2623 "EditingTools.c"
}


void editing_tools_photo_canvas_get_scaling (EditingToolsPhotoCanvas* self, Scaling* result) {
	Dimensions _tmp0_;
	Scaling _tmp1_ = {0};
#line 220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->surface_dim;
#line 221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaling_for_viewport (&_tmp0_, FALSE, &_tmp1_);
#line 221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp1_;
#line 221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2640 "EditingTools.c"
}


void editing_tools_photo_canvas_set_surface (EditingToolsPhotoCanvas* self, cairo_t* default_ctx, Dimensions* surface_dim) {
	cairo_t* _tmp0_;
	cairo_t* _tmp1_;
	Dimensions _tmp2_;
	cairo_t* _tmp3_;
	Dimensions _tmp4_;
#line 224 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 224 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (default_ctx != NULL);
#line 224 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (surface_dim != NULL);
#line 225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = default_ctx;
#line 225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _cairo_reference0 (_tmp0_);
#line 225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->default_ctx);
#line 225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->default_ctx = _tmp1_;
#line 226 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *surface_dim;
#line 226 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->surface_dim = _tmp2_;
#line 228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = default_ctx;
#line 228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *surface_dim;
#line 228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (self, editing_tools_photo_canvas_signals[EDITING_TOOLS_PHOTO_CANVAS_NEW_SURFACE_SIGNAL], 0, _tmp3_, &_tmp4_);
#line 2674 "EditingTools.c"
}


static gpointer _cairo_surface_reference0 (gpointer self) {
#line 232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? cairo_surface_reference (self) : NULL;
#line 2681 "EditingTools.c"
}


cairo_surface_t* editing_tools_photo_canvas_get_scaled_surface (EditingToolsPhotoCanvas* self) {
	cairo_surface_t* result = NULL;
	cairo_surface_t* _tmp0_;
	cairo_surface_t* _tmp1_;
#line 231 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->scaled;
#line 232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _cairo_surface_reference0 (_tmp0_);
#line 232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2699 "EditingTools.c"
}


GdkPixbuf* editing_tools_photo_canvas_get_scaled_pixbuf (EditingToolsPhotoCanvas* self) {
	GdkPixbuf* result = NULL;
	GdkPixbuf* _tmp0_;
	GdkPixbuf* _tmp1_;
#line 235 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->scaled_pixbuf;
#line 236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (_tmp0_);
#line 236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 2717 "EditingTools.c"
}


void editing_tools_photo_canvas_get_scaled_pixbuf_position (EditingToolsPhotoCanvas* self, GdkRectangle* result) {
	GdkRectangle _tmp0_;
#line 239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->scaled_position;
#line 240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp0_;
#line 240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2731 "EditingTools.c"
}


void editing_tools_photo_canvas_resized_pixbuf (EditingToolsPhotoCanvas* self, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position) {
	cairo_t* _tmp0_;
	GdkPixbuf* _tmp1_;
	GdkRectangle _tmp2_;
	cairo_surface_t* _tmp3_;
	GdkPixbuf* _tmp4_;
	GdkPixbuf* _tmp5_;
	GdkRectangle _tmp6_;
	Dimensions _tmp7_;
	GdkPixbuf* _tmp8_;
	GdkRectangle _tmp9_;
#line 243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (old_dim != NULL);
#line 243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GDK_IS_PIXBUF (scaled));
#line 243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (scaled_position != NULL);
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = scaled;
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *scaled_position;
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_photo_canvas_pixbuf_to_surface (self, _tmp0_, _tmp1_, &_tmp2_);
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->scaled);
#line 244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled = _tmp3_;
#line 245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = scaled;
#line 245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _g_object_ref0 (_tmp4_);
#line 245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->scaled_pixbuf);
#line 245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_pixbuf = _tmp5_;
#line 246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = *scaled_position;
#line 246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_position = _tmp6_;
#line 248 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = *old_dim;
#line 248 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = scaled;
#line 248 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = *scaled_position;
#line 248 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (self, editing_tools_photo_canvas_signals[EDITING_TOOLS_PHOTO_CANVAS_RESIZED_SCALED_PIXBUF_SIGNAL], 0, &_tmp7_, _tmp8_, &_tmp9_);
#line 2786 "EditingTools.c"
}


static void editing_tools_photo_canvas_real_repaint (EditingToolsPhotoCanvas* self) {
#line 251 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_critical ("Type `%s' does not implement abstract method `editing_tools_photo_canvas_repaint'", g_type_name (G_TYPE_FROM_INSTANCE (self)));
#line 251 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 2795 "EditingTools.c"
}


void editing_tools_photo_canvas_repaint (EditingToolsPhotoCanvas* self) {
#line 251 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 251 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_PHOTO_CANVAS_GET_CLASS (self)->repaint (self);
#line 2804 "EditingTools.c"
}


void editing_tools_photo_canvas_paint_pixbuf (EditingToolsPhotoCanvas* self, GdkPixbuf* pixbuf) {
	cairo_t* _tmp0_;
	cairo_t* _tmp1_;
	cairo_t* _tmp2_;
	Dimensions _tmp3_;
	gint _tmp4_;
	Dimensions _tmp5_;
	gint _tmp6_;
	cairo_t* _tmp7_;
	cairo_t* _tmp8_;
	GdkPixbuf* _tmp9_;
	GdkRectangle _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	cairo_t* _tmp14_;
	GdkRectangle _tmp15_;
	gint _tmp16_;
	GdkRectangle _tmp17_;
	gint _tmp18_;
	GdkPixbuf* _tmp19_;
	gint _tmp20_;
	GdkPixbuf* _tmp21_;
	gint _tmp22_;
	cairo_t* _tmp23_;
	cairo_t* _tmp24_;
#line 259 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 259 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GDK_IS_PIXBUF (pixbuf));
#line 260 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 260 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->default_ctx;
#line 263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp1_, "#000");
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->default_ctx;
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->surface_dim;
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.width;
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->surface_dim;
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.height;
#line 264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp2_, (gdouble) 0, (gdouble) 0, (gdouble) _tmp4_, (gdouble) _tmp6_);
#line 265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->default_ctx;
#line 265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp7_);
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->default_ctx;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = pixbuf;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->scaled_position;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.x;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->scaled_position;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.y;
#line 268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gdk_cairo_set_source_pixbuf (_tmp8_, _tmp9_, (gdouble) _tmp11_, (gdouble) _tmp13_);
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->default_ctx;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->scaled_position;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.x;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->scaled_position;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_.y;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = pixbuf;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = gdk_pixbuf_get_width (_tmp19_);
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = pixbuf;
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = gdk_pixbuf_get_height (_tmp21_);
#line 269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp14_, (gdouble) _tmp16_, (gdouble) _tmp18_, (gdouble) _tmp20_, (gdouble) _tmp22_);
#line 271 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->default_ctx;
#line 271 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp23_);
#line 272 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->default_ctx;
#line 272 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp24_);
#line 2904 "EditingTools.c"
}


void editing_tools_photo_canvas_paint_pixbuf_area (EditingToolsPhotoCanvas* self, GdkPixbuf* pixbuf, Box* source_area) {
	cairo_t* _tmp0_;
	GdkPixbuf* _tmp1_;
	gboolean _tmp2_;
	cairo_t* _tmp16_;
	GdkPixbuf* _tmp17_;
	GdkRectangle _tmp18_;
	gint _tmp19_;
	GdkRectangle _tmp20_;
	gint _tmp21_;
	cairo_t* _tmp22_;
	GdkRectangle _tmp23_;
	gint _tmp24_;
	Box _tmp25_;
	gint _tmp26_;
	GdkRectangle _tmp27_;
	gint _tmp28_;
	Box _tmp29_;
	gint _tmp30_;
	gint _tmp31_;
	gint _tmp32_;
	cairo_t* _tmp33_;
	cairo_t* _tmp34_;
#line 275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GDK_IS_PIXBUF (pixbuf));
#line 275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (source_area != NULL);
#line 276 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 276 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = pixbuf;
#line 277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gdk_pixbuf_get_has_alpha (_tmp1_);
#line 277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_) {
#line 2947 "EditingTools.c"
		cairo_t* _tmp3_;
		cairo_t* _tmp4_;
		GdkRectangle _tmp5_;
		gint _tmp6_;
		Box _tmp7_;
		gint _tmp8_;
		GdkRectangle _tmp9_;
		gint _tmp10_;
		Box _tmp11_;
		gint _tmp12_;
		gint _tmp13_;
		gint _tmp14_;
		cairo_t* _tmp15_;
#line 278 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = self->priv->default_ctx;
#line 278 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		set_source_color_from_string (_tmp3_, "#000");
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->default_ctx;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->scaled_position;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.x;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = *source_area;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp7_.left;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = self->priv->scaled_position;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = _tmp9_.y;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = *source_area;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = _tmp11_.top;
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = box_get_width (source_area);
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = box_get_height (source_area);
#line 279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_rectangle (_tmp4_, (gdouble) (_tmp6_ + _tmp8_), (gdouble) (_tmp10_ + _tmp12_), (gdouble) _tmp13_, (gdouble) _tmp14_);
#line 282 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = self->priv->default_ctx;
#line 282 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_fill (_tmp15_);
#line 2993 "EditingTools.c"
	}
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->default_ctx;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = pixbuf;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->scaled_position;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.x;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->priv->scaled_position;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_.y;
#line 285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gdk_cairo_set_source_pixbuf (_tmp16_, _tmp17_, (gdouble) _tmp19_, (gdouble) _tmp21_);
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->priv->default_ctx;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->scaled_position;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = _tmp23_.x;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = *source_area;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_.left;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = self->priv->scaled_position;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = _tmp27_.y;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = *source_area;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = _tmp29_.top;
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = box_get_width (source_area);
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = box_get_height (source_area);
#line 287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp22_, (gdouble) (_tmp24_ + _tmp26_), (gdouble) (_tmp28_ + _tmp30_), (gdouble) _tmp31_, (gdouble) _tmp32_);
#line 290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->default_ctx;
#line 290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp33_);
#line 291 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = self->priv->default_ctx;
#line 291 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp34_);
#line 3041 "EditingTools.c"
}


void editing_tools_photo_canvas_paint_surface (EditingToolsPhotoCanvas* self, cairo_surface_t* surface, gboolean over) {
	cairo_t* _tmp0_;
	gboolean _tmp1_;
	cairo_t* _tmp4_;
	cairo_surface_t* _tmp5_;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	cairo_t* _tmp10_;
	cairo_t* _tmp11_;
	cairo_surface_t* _tmp12_;
	GdkRectangle _tmp13_;
	gint _tmp14_;
	GdkRectangle _tmp15_;
	gint _tmp16_;
	cairo_t* _tmp17_;
	cairo_t* _tmp18_;
#line 295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (surface != NULL);
#line 296 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 296 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = over;
#line 297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ == FALSE) {
#line 3075 "EditingTools.c"
		cairo_t* _tmp2_;
#line 298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->default_ctx;
#line 298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_set_operator (_tmp2_, CAIRO_OPERATOR_SOURCE);
#line 3081 "EditingTools.c"
	} else {
		cairo_t* _tmp3_;
#line 300 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = self->priv->default_ctx;
#line 300 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_set_operator (_tmp3_, CAIRO_OPERATOR_OVER);
#line 3088 "EditingTools.c"
	}
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->default_ctx;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->scaled;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->scaled_position;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.x;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->scaled_position;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.y;
#line 302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp4_, _tmp5_, (gdouble) _tmp7_, (gdouble) _tmp9_);
#line 303 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->default_ctx;
#line 303 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (_tmp10_);
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->default_ctx;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = surface;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->scaled_position;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.x;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->scaled_position;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.y;
#line 304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp11_, _tmp12_, (gdouble) _tmp14_, (gdouble) _tmp16_);
#line 305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->default_ctx;
#line 305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (_tmp17_);
#line 306 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->default_ctx;
#line 306 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp18_);
#line 3130 "EditingTools.c"
}


void editing_tools_photo_canvas_paint_surface_area (EditingToolsPhotoCanvas* self, cairo_surface_t* surface, Box* source_area, gboolean over) {
	cairo_t* _tmp0_;
	gboolean _tmp1_;
	cairo_t* _tmp4_;
	cairo_surface_t* _tmp5_;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	cairo_t* _tmp10_;
	GdkRectangle _tmp11_;
	gint _tmp12_;
	Box _tmp13_;
	gint _tmp14_;
	GdkRectangle _tmp15_;
	gint _tmp16_;
	Box _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	cairo_t* _tmp21_;
	cairo_t* _tmp22_;
	cairo_surface_t* _tmp23_;
	GdkRectangle _tmp24_;
	gint _tmp25_;
	GdkRectangle _tmp26_;
	gint _tmp27_;
	cairo_t* _tmp28_;
	GdkRectangle _tmp29_;
	gint _tmp30_;
	Box _tmp31_;
	gint _tmp32_;
	GdkRectangle _tmp33_;
	gint _tmp34_;
	Box _tmp35_;
	gint _tmp36_;
	gint _tmp37_;
	gint _tmp38_;
	cairo_t* _tmp39_;
	cairo_t* _tmp40_;
#line 309 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 309 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (surface != NULL);
#line 309 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (source_area != NULL);
#line 310 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 310 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = over;
#line 311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ == FALSE) {
#line 3188 "EditingTools.c"
		cairo_t* _tmp2_;
#line 312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->default_ctx;
#line 312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_set_operator (_tmp2_, CAIRO_OPERATOR_SOURCE);
#line 3194 "EditingTools.c"
	} else {
		cairo_t* _tmp3_;
#line 314 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = self->priv->default_ctx;
#line 314 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cairo_set_operator (_tmp3_, CAIRO_OPERATOR_OVER);
#line 3201 "EditingTools.c"
	}
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->default_ctx;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->scaled;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->scaled_position;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.x;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->scaled_position;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.y;
#line 316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp4_, _tmp5_, (gdouble) _tmp7_, (gdouble) _tmp9_);
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->default_ctx;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->scaled_position;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.x;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = *source_area;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.left;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->scaled_position;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.y;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = *source_area;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_.top;
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = box_get_width (source_area);
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = box_get_height (source_area);
#line 317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp10_, (gdouble) (_tmp12_ + _tmp14_), (gdouble) (_tmp16_ + _tmp18_), (gdouble) _tmp19_, (gdouble) _tmp20_);
#line 320 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->default_ctx;
#line 320 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp21_);
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->priv->default_ctx;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = surface;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->scaled_position;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_.x;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = self->priv->scaled_position;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_.y;
#line 322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp22_, _tmp23_, (gdouble) _tmp25_, (gdouble) _tmp27_);
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = self->priv->default_ctx;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->priv->scaled_position;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = _tmp29_.x;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = *source_area;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = _tmp31_.left;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->scaled_position;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_.y;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = *source_area;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = _tmp35_.top;
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = box_get_width (source_area);
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = box_get_height (source_area);
#line 323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp28_, (gdouble) (_tmp30_ + _tmp32_), (gdouble) (_tmp34_ + _tmp36_), (gdouble) _tmp37_, (gdouble) _tmp38_);
#line 326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = self->priv->default_ctx;
#line 326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp39_);
#line 327 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = self->priv->default_ctx;
#line 327 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp40_);
#line 3291 "EditingTools.c"
}


void editing_tools_photo_canvas_draw_box (EditingToolsPhotoCanvas* self, cairo_t* ctx, Box* box) {
	GdkRectangle rect = {0};
	GdkRectangle _tmp0_ = {0};
	gint _tmp1_;
	GdkRectangle _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	GdkRectangle _tmp5_;
	gint _tmp6_;
	cairo_t* _tmp7_;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	GdkRectangle _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	GdkRectangle _tmp14_;
	gint _tmp15_;
	cairo_t* _tmp16_;
#line 330 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 330 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 330 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (box != NULL);
#line 331 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_rectangle (box, &_tmp0_);
#line 331 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect = _tmp0_;
#line 332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = rect.x;
#line 332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->scaled_position;
#line 332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect.x = _tmp1_ + _tmp3_;
#line 333 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = rect.y;
#line 333 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->scaled_position;
#line 333 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.y;
#line 333 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect.y = _tmp4_ + _tmp6_;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = ctx;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = rect;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.x;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = rect;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.y;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = rect;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.width;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = rect;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_.height;
#line 335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp7_, _tmp9_ + 0.5, _tmp11_ + 0.5, (gdouble) (_tmp13_ - 1), (gdouble) (_tmp15_ - 1));
#line 336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = ctx;
#line 336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_stroke (_tmp16_);
#line 3364 "EditingTools.c"
}


void editing_tools_photo_canvas_draw_text (EditingToolsPhotoCanvas* self, cairo_t* ctx, const gchar* text, gint x, gint y, gboolean use_scaled_pos) {
	gboolean _tmp0_;
	cairo_text_extents_t extents = {0};
	cairo_t* _tmp7_;
	const gchar* _tmp8_;
	cairo_text_extents_t _tmp9_ = {0};
	gint _tmp10_;
	cairo_text_extents_t _tmp11_;
	gdouble _tmp12_;
	cairo_t* _tmp13_;
	gint pane_border = 0;
	cairo_t* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	cairo_text_extents_t _tmp17_;
	gdouble _tmp18_;
	cairo_text_extents_t _tmp19_;
	gdouble _tmp20_;
	cairo_text_extents_t _tmp21_;
	gdouble _tmp22_;
	cairo_t* _tmp23_;
	cairo_t* _tmp24_;
	gint _tmp25_;
	gint _tmp26_;
	cairo_t* _tmp27_;
	cairo_t* _tmp28_;
	const gchar* _tmp29_;
#line 339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (text != NULL);
#line 340 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = use_scaled_pos;
#line 340 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 3405 "EditingTools.c"
		gint _tmp1_;
		GdkRectangle _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		GdkRectangle _tmp5_;
		gint _tmp6_;
#line 341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = x;
#line 341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->scaled_position;
#line 341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_.x;
#line 341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x = _tmp1_ + _tmp3_;
#line 342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = y;
#line 342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->scaled_position;
#line 342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.y;
#line 342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y = _tmp4_ + _tmp6_;
#line 3428 "EditingTools.c"
	}
#line 345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = ctx;
#line 345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = text;
#line 345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_text_extents (_tmp7_, _tmp8_, &_tmp9_);
#line 345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	extents = _tmp9_;
#line 346 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = x;
#line 346 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = extents;
#line 346 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.width;
#line 346 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	x = _tmp10_ - (((gint) _tmp12_) / 2);
#line 348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = ctx;
#line 348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp13_, RESOURCES_ONIMAGE_FONT_BACKGROUND);
#line 350 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pane_border = 5;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = ctx;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = x;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = y;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = extents;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_.height;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = extents;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_.width;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = extents;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_.height;
#line 351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp14_, (gdouble) (_tmp15_ - pane_border), (_tmp16_ - pane_border) - _tmp18_, _tmp20_ + (2 * pane_border), _tmp22_ + (2 * pane_border));
#line 354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = ctx;
#line 354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp23_);
#line 356 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = ctx;
#line 356 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = x;
#line 356 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = y;
#line 356 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_move_to (_tmp24_, (gdouble) _tmp25_, (gdouble) _tmp26_);
#line 357 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = ctx;
#line 357 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp27_, RESOURCES_ONIMAGE_FONT_COLOR);
#line 358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = ctx;
#line 358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = text;
#line 358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_show_text (_tmp28_, _tmp29_);
#line 3494 "EditingTools.c"
}


/**
     * Draw a horizontal line into the specified Cairo context at the specified position, taking
     * into account the scaled position of the image unless directed otherwise.
     *
     * @param ctx The drawing context of the surface we're drawing to.
     * @param x The horizontal position to place the line at.
     * @param y The vertical position to place the line at.
     * @param width The length of the line.
     * @param use_scaled_pos Whether to use absolute window positioning or take into account the 
     *      position of the scaled image.
     */
void editing_tools_photo_canvas_draw_horizontal_line (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint x, gint y, gint width, gboolean use_scaled_pos) {
	gboolean _tmp0_;
	cairo_t* _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	cairo_t* _tmp10_;
	gint _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	cairo_t* _tmp14_;
#line 372 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 372 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 373 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = use_scaled_pos;
#line 373 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 3527 "EditingTools.c"
		gint _tmp1_;
		GdkRectangle _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		GdkRectangle _tmp5_;
		gint _tmp6_;
#line 374 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = x;
#line 374 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->scaled_position;
#line 374 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_.x;
#line 374 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x = _tmp1_ + _tmp3_;
#line 375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = y;
#line 375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->scaled_position;
#line 375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.y;
#line 375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y = _tmp4_ + _tmp6_;
#line 3550 "EditingTools.c"
	}
#line 378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = ctx;
#line 378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = x;
#line 378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = y;
#line 378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_move_to (_tmp7_, _tmp8_ + 0.5, _tmp9_ + 0.5);
#line 379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = ctx;
#line 379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = x;
#line 379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = width;
#line 379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = y;
#line 379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_line_to (_tmp10_, (gdouble) ((_tmp11_ + _tmp12_) - 1), _tmp13_ + 0.5);
#line 380 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = ctx;
#line 380 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_stroke (_tmp14_);
#line 3574 "EditingTools.c"
}


/**
     * Draw a vertical line into the specified Cairo context at the specified position, taking
     * into account the scaled position of the image unless directed otherwise.
     *
     * @param ctx The drawing context of the surface we're drawing to.
     * @param x The horizontal position to place the line at.
     * @param y The vertical position to place the line at.
     * @param width The length of the line.
     * @param use_scaled_pos Whether to use absolute window positioning or take into account the 
     *      position of the scaled image.
     */
void editing_tools_photo_canvas_draw_vertical_line (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint x, gint y, gint height, gboolean use_scaled_pos) {
	gboolean _tmp0_;
	cairo_t* _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	cairo_t* _tmp10_;
	gint _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	cairo_t* _tmp14_;
#line 394 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 394 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 395 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = use_scaled_pos;
#line 395 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 3607 "EditingTools.c"
		gint _tmp1_;
		GdkRectangle _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
		GdkRectangle _tmp5_;
		gint _tmp6_;
#line 396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = x;
#line 396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->scaled_position;
#line 396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_.x;
#line 396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x = _tmp1_ + _tmp3_;
#line 397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = y;
#line 397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->scaled_position;
#line 397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.y;
#line 397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y = _tmp4_ + _tmp6_;
#line 3630 "EditingTools.c"
	}
#line 400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = ctx;
#line 400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = x;
#line 400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = y;
#line 400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_move_to (_tmp7_, _tmp8_ + 0.5, _tmp9_ + 0.5);
#line 401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = ctx;
#line 401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = x;
#line 401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = y;
#line 401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = height;
#line 401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_line_to (_tmp10_, _tmp11_ + 0.5, (gdouble) ((_tmp12_ + _tmp13_) - 1));
#line 402 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = ctx;
#line 402 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_stroke (_tmp14_);
#line 3654 "EditingTools.c"
}


void editing_tools_photo_canvas_erase_horizontal_line (EditingToolsPhotoCanvas* self, gint x, gint y, gint width) {
	cairo_t* _tmp0_;
	cairo_t* _tmp1_;
	cairo_t* _tmp2_;
	cairo_surface_t* _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	cairo_t* _tmp8_;
	GdkRectangle _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	cairo_t* _tmp16_;
	cairo_t* _tmp17_;
#line 405 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 406 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 406 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->default_ctx;
#line 408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_operator (_tmp1_, CAIRO_OPERATOR_SOURCE);
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->default_ctx;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->scaled;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->scaled_position;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.x;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->scaled_position;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp2_, _tmp3_, (gdouble) _tmp5_, (gdouble) _tmp7_);
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->default_ctx;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->scaled_position;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.x;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = x;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->scaled_position;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.y;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = y;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = width;
#line 410 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp8_, (gdouble) (_tmp10_ + _tmp11_), (gdouble) (_tmp13_ + _tmp14_), (gdouble) (_tmp15_ - 1), (gdouble) 1);
#line 412 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->default_ctx;
#line 412 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp16_);
#line 414 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->default_ctx;
#line 414 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp17_);
#line 3727 "EditingTools.c"
}


void editing_tools_photo_canvas_draw_circle (EditingToolsPhotoCanvas* self, cairo_t* ctx, gint active_center_x, gint active_center_y, gint radius) {
	gint center_x = 0;
	gint _tmp0_;
	GdkRectangle _tmp1_;
	gint _tmp2_;
	gint center_y = 0;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	cairo_t* _tmp6_;
	gint _tmp7_;
	cairo_t* _tmp8_;
#line 417 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 417 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = active_center_x;
#line 419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->scaled_position;
#line 419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_.x;
#line 419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	center_x = _tmp0_ + _tmp2_;
#line 420 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = active_center_y;
#line 420 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->scaled_position;
#line 420 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.y;
#line 420 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	center_y = _tmp3_ + _tmp5_;
#line 422 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = ctx;
#line 422 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = radius;
#line 422 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_arc (_tmp6_, (gdouble) center_x, (gdouble) center_y, (gdouble) _tmp7_, (gdouble) 0, 2 * G_PI);
#line 423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = ctx;
#line 423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_stroke (_tmp8_);
#line 3773 "EditingTools.c"
}


void editing_tools_photo_canvas_erase_vertical_line (EditingToolsPhotoCanvas* self, gint x, gint y, gint height) {
	cairo_t* _tmp0_;
	cairo_t* _tmp1_;
	cairo_t* _tmp2_;
	cairo_surface_t* _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	cairo_t* _tmp8_;
	GdkRectangle _tmp9_;
	gint _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint _tmp15_;
	cairo_t* _tmp16_;
	cairo_t* _tmp17_;
#line 426 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 427 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->default_ctx;
#line 427 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_save (_tmp0_);
#line 433 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->default_ctx;
#line 433 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_operator (_tmp1_, CAIRO_OPERATOR_SOURCE);
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->default_ctx;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->scaled;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->scaled_position;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.x;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->scaled_position;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_surface (_tmp2_, _tmp3_, (gdouble) _tmp5_, (gdouble) _tmp7_);
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->default_ctx;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->scaled_position;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.x;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = x;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->scaled_position;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.y;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = y;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = height;
#line 435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp8_, (gdouble) (_tmp10_ + _tmp11_), (gdouble) (_tmp13_ + _tmp14_), (gdouble) 1, (gdouble) _tmp15_);
#line 437 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->default_ctx;
#line 437 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp16_);
#line 439 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->default_ctx;
#line 439 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_restore (_tmp17_);
#line 3846 "EditingTools.c"
}


void editing_tools_photo_canvas_erase_box (EditingToolsPhotoCanvas* self, Box* box) {
	Box _tmp0_;
	gint _tmp1_;
	Box _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	Box _tmp5_;
	gint _tmp6_;
	Box _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	Box _tmp10_;
	gint _tmp11_;
	Box _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	Box _tmp15_;
	gint _tmp16_;
	Box _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
#line 442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (box != NULL);
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = *box;
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_.left;
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *box;
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.top;
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = box_get_width (box);
#line 443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_erase_horizontal_line (self, _tmp1_, _tmp3_, _tmp4_);
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = *box;
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.left;
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = *box;
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_.bottom;
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = box_get_width (box);
#line 444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_erase_horizontal_line (self, _tmp6_, _tmp8_, _tmp9_);
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = *box;
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.left;
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = *box;
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.top;
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = box_get_height (box);
#line 446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_erase_vertical_line (self, _tmp11_, _tmp13_, _tmp14_);
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = *box;
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.right;
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = *box;
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_.top;
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = box_get_height (box);
#line 447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_erase_vertical_line (self, _tmp16_, _tmp18_, _tmp19_);
#line 3923 "EditingTools.c"
}


void editing_tools_photo_canvas_invalidate_area (EditingToolsPhotoCanvas* self, Box* area) {
	GdkRectangle rect = {0};
	GdkRectangle _tmp0_ = {0};
	gint _tmp1_;
	GdkRectangle _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	GdkRectangle _tmp5_;
	gint _tmp6_;
	GdkWindow* _tmp7_;
	GdkRectangle _tmp8_;
#line 450 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self));
#line 450 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (area != NULL);
#line 451 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_rectangle (area, &_tmp0_);
#line 451 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect = _tmp0_;
#line 452 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = rect.x;
#line 452 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->scaled_position;
#line 452 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 452 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect.x = _tmp1_ + _tmp3_;
#line 453 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = rect.y;
#line 453 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->scaled_position;
#line 453 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.y;
#line 453 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rect.y = _tmp4_ + _tmp6_;
#line 455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->drawing_window;
#line 455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = rect;
#line 455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gdk_window_invalidate_rect (_tmp7_, &_tmp8_, FALSE);
#line 3968 "EditingTools.c"
}


static cairo_surface_t* editing_tools_photo_canvas_pixbuf_to_surface (EditingToolsPhotoCanvas* self, cairo_t* default_ctx, GdkPixbuf* pixbuf, GdkRectangle* pos) {
	cairo_surface_t* result = NULL;
	cairo_surface_t* surface = NULL;
	cairo_t* _tmp0_;
	cairo_surface_t* _tmp1_;
	GdkRectangle _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	cairo_surface_t* _tmp6_;
	cairo_t* ctx = NULL;
	cairo_t* _tmp7_;
	GdkPixbuf* _tmp8_;
#line 458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (self), NULL);
#line 458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (default_ctx != NULL, NULL);
#line 458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GDK_IS_PIXBUF (pixbuf), NULL);
#line 458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (pos != NULL, NULL);
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = default_ctx;
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = cairo_get_target (_tmp0_);
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *pos;
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.width;
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *pos;
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.height;
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = cairo_surface_create_similar (_tmp1_, CAIRO_CONTENT_COLOR_ALPHA, _tmp3_, _tmp5_);
#line 460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	surface = _tmp6_;
#line 462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = cairo_create (surface);
#line 462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	ctx = _tmp7_;
#line 463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = pixbuf;
#line 463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gdk_cairo_set_source_pixbuf (ctx, _tmp8_, (gdouble) 0, (gdouble) 0);
#line 464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (ctx);
#line 465 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = surface;
#line 465 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (ctx);
#line 465 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4025 "EditingTools.c"
}


static void g_cclosure_user_marshal_VOID__POINTER_BOXED (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__POINTER_BOXED) (gpointer data1, gpointer arg_1, gpointer arg_2, gpointer data2);
	register GMarshalFunc_VOID__POINTER_BOXED callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (n_param_values == 3);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = closure->data;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = param_values->data[0].v_pointer;
#line 4044 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = param_values->data[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = closure->data;
#line 4050 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback = (GMarshalFunc_VOID__POINTER_BOXED) (marshal_data ? marshal_data : cc->callback);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback (data1, g_value_get_pointer (param_values + 1), g_value_get_boxed (param_values + 2), data2);
#line 4056 "EditingTools.c"
}


static void g_cclosure_user_marshal_VOID__BOXED_OBJECT_BOXED (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__BOXED_OBJECT_BOXED) (gpointer data1, gpointer arg_1, gpointer arg_2, gpointer arg_3, gpointer data2);
	register GMarshalFunc_VOID__BOXED_OBJECT_BOXED callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (n_param_values == 4);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = closure->data;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = param_values->data[0].v_pointer;
#line 4075 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = param_values->data[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = closure->data;
#line 4081 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback = (GMarshalFunc_VOID__BOXED_OBJECT_BOXED) (marshal_data ? marshal_data : cc->callback);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback (data1, g_value_get_boxed (param_values + 1), g_value_get_object (param_values + 2), g_value_get_boxed (param_values + 3), data2);
#line 4087 "EditingTools.c"
}


static void editing_tools_value_photo_canvas_init (GValue* value) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	value->data[0].v_pointer = NULL;
#line 4094 "EditingTools.c"
}


static void editing_tools_value_photo_canvas_free_value (GValue* value) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (value->data[0].v_pointer) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_unref (value->data[0].v_pointer);
#line 4103 "EditingTools.c"
	}
}


static void editing_tools_value_photo_canvas_copy_value (const GValue* src_value, GValue* dest_value) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (src_value->data[0].v_pointer) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = editing_tools_photo_canvas_ref (src_value->data[0].v_pointer);
#line 4113 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = NULL;
#line 4117 "EditingTools.c"
	}
}


static gpointer editing_tools_value_photo_canvas_peek_pointer (const GValue* value) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 4125 "EditingTools.c"
}


static gchar* editing_tools_value_photo_canvas_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (collect_values[0].v_pointer) {
#line 4132 "EditingTools.c"
		EditingToolsPhotoCanvas * object;
		object = collect_values[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (object->parent_instance.g_class == NULL) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 4139 "EditingTools.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 4143 "EditingTools.c"
		}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = editing_tools_photo_canvas_ref (object);
#line 4147 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4151 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 4155 "EditingTools.c"
}


static gchar* editing_tools_value_photo_canvas_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	EditingToolsPhotoCanvas ** object_p;
	object_p = collect_values[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!object_p) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 4166 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!value->data[0].v_pointer) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = NULL;
#line 4172 "EditingTools.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = value->data[0].v_pointer;
#line 4176 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = editing_tools_photo_canvas_ref (value->data[0].v_pointer);
#line 4180 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 4184 "EditingTools.c"
}


GParamSpec* editing_tools_param_spec_photo_canvas (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	EditingToolsParamSpecPhotoCanvas* spec;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (g_type_is_a (object_type, EDITING_TOOLS_TYPE_PHOTO_CANVAS), NULL);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return G_PARAM_SPEC (spec);
#line 4198 "EditingTools.c"
}


gpointer editing_tools_value_get_photo_canvas (const GValue* value) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_PHOTO_CANVAS), NULL);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 4207 "EditingTools.c"
}


void editing_tools_value_set_photo_canvas (GValue* value, gpointer v_object) {
	EditingToolsPhotoCanvas * old;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_PHOTO_CANVAS));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_TYPE_PHOTO_CANVAS));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_ref (value->data[0].v_pointer);
#line 4227 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4231 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_unref (old);
#line 4237 "EditingTools.c"
	}
}


void editing_tools_value_take_photo_canvas (GValue* value, gpointer v_object) {
	EditingToolsPhotoCanvas * old;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_PHOTO_CANVAS));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_TYPE_PHOTO_CANVAS));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 4256 "EditingTools.c"
	} else {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4260 "EditingTools.c"
	}
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_unref (old);
#line 4266 "EditingTools.c"
	}
}


static void editing_tools_photo_canvas_class_init (EditingToolsPhotoCanvasClass * klass) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_parent_class = g_type_class_peek_parent (klass);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsPhotoCanvasClass *) klass)->finalize = editing_tools_photo_canvas_finalize;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsPhotoCanvasPrivate));
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsPhotoCanvasClass *) klass)->repaint = (void (*) (EditingToolsPhotoCanvas *)) editing_tools_photo_canvas_real_repaint;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_signals[EDITING_TOOLS_PHOTO_CANVAS_NEW_SURFACE_SIGNAL] = g_signal_new ("new-surface", EDITING_TOOLS_TYPE_PHOTO_CANVAS, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__POINTER_BOXED, G_TYPE_NONE, 2, G_TYPE_POINTER, TYPE_DIMENSIONS);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_signals[EDITING_TOOLS_PHOTO_CANVAS_RESIZED_SCALED_PIXBUF_SIGNAL] = g_signal_new ("resized-scaled-pixbuf", EDITING_TOOLS_TYPE_PHOTO_CANVAS, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__BOXED_OBJECT_BOXED, G_TYPE_NONE, 3, TYPE_DIMENSIONS, gdk_pixbuf_get_type (), gdk_rectangle_get_type ());
#line 4284 "EditingTools.c"
}


static void editing_tools_photo_canvas_instance_init (EditingToolsPhotoCanvas * self) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_PHOTO_CANVAS_GET_PRIVATE (self);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->ref_count = 1;
#line 4293 "EditingTools.c"
}


static void editing_tools_photo_canvas_finalize (EditingToolsPhotoCanvas * obj) {
	EditingToolsPhotoCanvas * self;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_PHOTO_CANVAS, EditingToolsPhotoCanvas);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_destroy (self);
#line 104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->container);
#line 105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->drawing_window);
#line 106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->photo);
#line 107 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->default_ctx);
#line 109 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->scaled);
#line 110 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->scaled_pixbuf);
#line 4315 "EditingTools.c"
}


GType editing_tools_photo_canvas_get_type (void) {
	static volatile gsize editing_tools_photo_canvas_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_photo_canvas_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { editing_tools_value_photo_canvas_init, editing_tools_value_photo_canvas_free_value, editing_tools_value_photo_canvas_copy_value, editing_tools_value_photo_canvas_peek_pointer, "p", editing_tools_value_photo_canvas_collect_value, "p", editing_tools_value_photo_canvas_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsPhotoCanvasClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_photo_canvas_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsPhotoCanvas), 0, (GInstanceInitFunc) editing_tools_photo_canvas_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType editing_tools_photo_canvas_type_id;
		editing_tools_photo_canvas_type_id = g_type_register_fundamental (g_type_fundamental_next (), "EditingToolsPhotoCanvas", &g_define_type_info, &g_define_type_fundamental_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&editing_tools_photo_canvas_type_id__volatile, editing_tools_photo_canvas_type_id);
	}
	return editing_tools_photo_canvas_type_id__volatile;
}


gpointer editing_tools_photo_canvas_ref (gpointer instance) {
	EditingToolsPhotoCanvas * self;
	self = instance;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_atomic_int_inc (&self->ref_count);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return instance;
#line 4340 "EditingTools.c"
}


void editing_tools_photo_canvas_unref (gpointer instance) {
	EditingToolsPhotoCanvas * self;
	self = instance;
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		EDITING_TOOLS_PHOTO_CANVAS_GET_CLASS (self)->finalize (self);
#line 103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 4353 "EditingTools.c"
	}
}


EditingToolsEditingTool* editing_tools_editing_tool_construct (GType object_type, const gchar* name) {
	EditingToolsEditingTool* self = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
#line 490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsEditingTool*) g_type_create_instance (object_type);
#line 491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = name;
#line 491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (self->name);
#line 491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->name = _tmp1_;
#line 490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 4376 "EditingTools.c"
}


static gpointer _editing_tools_photo_canvas_ref0 (gpointer self) {
#line 503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? editing_tools_photo_canvas_ref (self) : NULL;
#line 4383 "EditingTools.c"
}


static gboolean _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self) {
	gboolean result;
	result = editing_tools_editing_tool_on_keypress ((EditingToolsEditingTool*) self, event);
#line 507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4392 "EditingTools.c"
}


static void editing_tools_editing_tool_real_activate (EditingToolsEditingTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsEditingToolWindow* _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	EditingToolsPhotoCanvas* _tmp3_;
	EditingToolsEditingToolWindow* _tmp4_;
	EditingToolsEditingToolWindow* _tmp5_;
#line 498 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 500 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->canvas;
#line 500 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_assert (_tmp0_ == NULL, "this.canvas == null");
#line 501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->tool_window;
#line 501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_assert (_tmp1_ == NULL, "tool_window == null");
#line 503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = canvas;
#line 503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _editing_tools_photo_canvas_ref0 (_tmp2_);
#line 503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_photo_canvas_unref0 (self->canvas);
#line 503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->canvas = _tmp3_;
#line 505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = editing_tools_editing_tool_get_tool_window (self);
#line 505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->tool_window);
#line 505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->tool_window = _tmp4_;
#line 506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->tool_window;
#line 506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ != NULL) {
#line 4431 "EditingTools.c"
		EditingToolsEditingToolWindow* _tmp6_;
#line 507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = self->priv->tool_window;
#line 507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, gtk_widget_get_type (), GtkWidget), "key-press-event", (GCallback) _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event, self);
#line 4437 "EditingTools.c"
	}
#line 509 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (self, editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_ACTIVATED_SIGNAL], 0);
#line 4441 "EditingTools.c"
}


void editing_tools_editing_tool_activate (EditingToolsEditingTool* self, EditingToolsPhotoCanvas* canvas) {
#line 498 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 498 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->activate (self, canvas);
#line 4450 "EditingTools.c"
}


static void editing_tools_editing_tool_real_deactivate (EditingToolsEditingTool* self) {
	gboolean _tmp0_ = FALSE;
	EditingToolsPhotoCanvas* _tmp1_;
	EditingToolsEditingToolWindow* _tmp3_;
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->canvas;
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ == NULL) {
#line 4462 "EditingTools.c"
		EditingToolsEditingToolWindow* _tmp2_;
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->tool_window;
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = _tmp2_ == NULL;
#line 4468 "EditingTools.c"
	} else {
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = FALSE;
#line 4472 "EditingTools.c"
	}
#line 515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 4478 "EditingTools.c"
	}
#line 518 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_photo_canvas_unref0 (self->canvas);
#line 518 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->canvas = NULL;
#line 520 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->tool_window;
#line 520 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp3_ != NULL) {
#line 4488 "EditingTools.c"
		EditingToolsEditingToolWindow* _tmp4_;
		guint _tmp5_;
#line 521 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->tool_window;
#line 521 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_parse_name ("key-press-event", gtk_widget_get_type (), &_tmp5_, NULL, FALSE);
#line 521 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event, self);
#line 522 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->tool_window);
#line 522 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->tool_window = NULL;
#line 4501 "EditingTools.c"
	}
#line 525 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (self, editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_DEACTIVATED_SIGNAL], 0);
#line 4505 "EditingTools.c"
}


void editing_tools_editing_tool_deactivate (EditingToolsEditingTool* self) {
#line 513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->deactivate (self);
#line 4514 "EditingTools.c"
}


gboolean editing_tools_editing_tool_is_activated (EditingToolsEditingTool* self) {
	gboolean result = FALSE;
	EditingToolsPhotoCanvas* _tmp0_;
#line 528 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self), FALSE);
#line 529 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->canvas;
#line 529 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_ != NULL;
#line 529 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4529 "EditingTools.c"
}


static EditingToolsEditingToolWindow* editing_tools_editing_tool_real_get_tool_window (EditingToolsEditingTool* self) {
	EditingToolsEditingToolWindow* result = NULL;
#line 533 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = NULL;
#line 533 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4539 "EditingTools.c"
}


EditingToolsEditingToolWindow* editing_tools_editing_tool_get_tool_window (EditingToolsEditingTool* self) {
#line 532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self), NULL);
#line 532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->get_tool_window (self);
#line 4548 "EditingTools.c"
}


static GdkPixbuf* editing_tools_editing_tool_real_get_display_pixbuf (EditingToolsEditingTool* self, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error) {
	Dimensions _vala_max_dim = {0};
	GdkPixbuf* result = NULL;
#line 547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, NULL);
#line 547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), NULL);
#line 549 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dimensions_init (&_vala_max_dim, 0, 0);
#line 551 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = NULL;
#line 551 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (max_dim) {
#line 551 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*max_dim = _vala_max_dim;
#line 4567 "EditingTools.c"
	}
#line 551 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4571 "EditingTools.c"
}


GdkPixbuf* editing_tools_editing_tool_get_display_pixbuf (EditingToolsEditingTool* self, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error) {
#line 547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self), NULL);
#line 547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->get_display_pixbuf (self, scaling, photo, max_dim, error);
#line 4580 "EditingTools.c"
}


static void editing_tools_editing_tool_real_on_left_click (EditingToolsEditingTool* self, gint x, gint y) {
}


void editing_tools_editing_tool_on_left_click (EditingToolsEditingTool* self, gint x, gint y) {
#line 554 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 554 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->on_left_click (self, x, y);
#line 4593 "EditingTools.c"
}


static void editing_tools_editing_tool_real_on_left_released (EditingToolsEditingTool* self, gint x, gint y) {
}


void editing_tools_editing_tool_on_left_released (EditingToolsEditingTool* self, gint x, gint y) {
#line 557 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 557 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->on_left_released (self, x, y);
#line 4606 "EditingTools.c"
}


static void editing_tools_editing_tool_real_on_motion (EditingToolsEditingTool* self, gint x, gint y, GdkModifierType mask) {
}


void editing_tools_editing_tool_on_motion (EditingToolsEditingTool* self, gint x, gint y, GdkModifierType mask) {
#line 560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->on_motion (self, x, y, mask);
#line 4619 "EditingTools.c"
}


static gboolean editing_tools_editing_tool_real_on_leave_notify_event (EditingToolsEditingTool* self) {
	gboolean result = FALSE;
#line 564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4629 "EditingTools.c"
}


gboolean editing_tools_editing_tool_on_leave_notify_event (EditingToolsEditingTool* self) {
#line 563 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self), FALSE);
#line 563 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->on_leave_notify_event (self);
#line 4638 "EditingTools.c"
}


static gboolean editing_tools_editing_tool_real_on_keypress (EditingToolsEditingTool* self, GdkEventKey* event) {
	gboolean result = FALSE;
	GdkEventKey* _tmp0_;
	guint _tmp1_;
	const gchar* _tmp2_;
#line 567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = event;
#line 569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->keyval;
#line 569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gdk_keyval_name (_tmp1_);
#line 569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_strcmp0 (_tmp2_, "Escape") == 0) {
#line 570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_editing_tool_notify_cancel (self);
#line 572 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 572 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 4663 "EditingTools.c"
	}
#line 575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 4669 "EditingTools.c"
}


gboolean editing_tools_editing_tool_on_keypress (EditingToolsEditingTool* self, GdkEventKey* event) {
#line 567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self), FALSE);
#line 567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->on_keypress (self, event);
#line 4678 "EditingTools.c"
}


static void editing_tools_editing_tool_real_paint (EditingToolsEditingTool* self, cairo_t* ctx) {
#line 578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 4685 "EditingTools.c"
}


void editing_tools_editing_tool_paint (EditingToolsEditingTool* self, cairo_t* ctx) {
#line 578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->paint (self, ctx);
#line 4694 "EditingTools.c"
}


void editing_tools_editing_tool_notify_cancel (EditingToolsEditingTool* self) {
#line 582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_EDITING_TOOL (self));
#line 583 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (self, editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_CANCELLED_SIGNAL], 0);
#line 4703 "EditingTools.c"
}


static void g_cclosure_user_marshal_VOID__OBJECT_OBJECT_BOXED_BOOLEAN (GClosure * closure, GValue * return_value, guint n_param_values, const GValue * param_values, gpointer invocation_hint, gpointer marshal_data) {
	typedef void (*GMarshalFunc_VOID__OBJECT_OBJECT_BOXED_BOOLEAN) (gpointer data1, gpointer arg_1, gpointer arg_2, gpointer arg_3, gboolean arg_4, gpointer data2);
	register GMarshalFunc_VOID__OBJECT_OBJECT_BOXED_BOOLEAN callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (n_param_values == 5);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_CCLOSURE_SWAP_DATA (closure)) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = closure->data;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = param_values->data[0].v_pointer;
#line 4722 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data1 = param_values->data[0].v_pointer;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		data2 = closure->data;
#line 4728 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback = (GMarshalFunc_VOID__OBJECT_OBJECT_BOXED_BOOLEAN) (marshal_data ? marshal_data : cc->callback);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	callback (data1, g_value_get_object (param_values + 1), g_value_get_object (param_values + 2), g_value_get_boxed (param_values + 3), g_value_get_boolean (param_values + 4), data2);
#line 4734 "EditingTools.c"
}


static void editing_tools_value_editing_tool_init (GValue* value) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	value->data[0].v_pointer = NULL;
#line 4741 "EditingTools.c"
}


static void editing_tools_value_editing_tool_free_value (GValue* value) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (value->data[0].v_pointer) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_editing_tool_unref (value->data[0].v_pointer);
#line 4750 "EditingTools.c"
	}
}


static void editing_tools_value_editing_tool_copy_value (const GValue* src_value, GValue* dest_value) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (src_value->data[0].v_pointer) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = editing_tools_editing_tool_ref (src_value->data[0].v_pointer);
#line 4760 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = NULL;
#line 4764 "EditingTools.c"
	}
}


static gpointer editing_tools_value_editing_tool_peek_pointer (const GValue* value) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 4772 "EditingTools.c"
}


static gchar* editing_tools_value_editing_tool_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (collect_values[0].v_pointer) {
#line 4779 "EditingTools.c"
		EditingToolsEditingTool * object;
		object = collect_values[0].v_pointer;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (object->parent_instance.g_class == NULL) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 4786 "EditingTools.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 4790 "EditingTools.c"
		}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = editing_tools_editing_tool_ref (object);
#line 4794 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4798 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 4802 "EditingTools.c"
}


static gchar* editing_tools_value_editing_tool_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	EditingToolsEditingTool ** object_p;
	object_p = collect_values[0].v_pointer;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!object_p) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 4813 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!value->data[0].v_pointer) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = NULL;
#line 4819 "EditingTools.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = value->data[0].v_pointer;
#line 4823 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = editing_tools_editing_tool_ref (value->data[0].v_pointer);
#line 4827 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 4831 "EditingTools.c"
}


GParamSpec* editing_tools_param_spec_editing_tool (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	EditingToolsParamSpecEditingTool* spec;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (g_type_is_a (object_type, EDITING_TOOLS_TYPE_EDITING_TOOL), NULL);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return G_PARAM_SPEC (spec);
#line 4845 "EditingTools.c"
}


gpointer editing_tools_value_get_editing_tool (const GValue* value) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_EDITING_TOOL), NULL);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 4854 "EditingTools.c"
}


void editing_tools_value_set_editing_tool (GValue* value, gpointer v_object) {
	EditingToolsEditingTool * old;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_EDITING_TOOL));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_TYPE_EDITING_TOOL));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_editing_tool_ref (value->data[0].v_pointer);
#line 4874 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4878 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_editing_tool_unref (old);
#line 4884 "EditingTools.c"
	}
}


void editing_tools_value_take_editing_tool (GValue* value, gpointer v_object) {
	EditingToolsEditingTool * old;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_TYPE_EDITING_TOOL));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_TYPE_EDITING_TOOL));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 4903 "EditingTools.c"
	} else {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 4907 "EditingTools.c"
	}
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_editing_tool_unref (old);
#line 4913 "EditingTools.c"
	}
}


static void editing_tools_editing_tool_class_init (EditingToolsEditingToolClass * klass) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_parent_class = g_type_class_peek_parent (klass);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->finalize = editing_tools_editing_tool_finalize;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsEditingToolPrivate));
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->activate = (void (*) (EditingToolsEditingTool *, EditingToolsPhotoCanvas*)) editing_tools_editing_tool_real_activate;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->deactivate = (void (*) (EditingToolsEditingTool *)) editing_tools_editing_tool_real_deactivate;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_tool_window = (EditingToolsEditingToolWindow* (*) (EditingToolsEditingTool *)) editing_tools_editing_tool_real_get_tool_window;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_display_pixbuf = (GdkPixbuf* (*) (EditingToolsEditingTool *, Scaling*, Photo*, Dimensions*, GError**)) editing_tools_editing_tool_real_get_display_pixbuf;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_click = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_editing_tool_real_on_left_click;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_released = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_editing_tool_real_on_left_released;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_motion = (void (*) (EditingToolsEditingTool *, gint, gint, GdkModifierType)) editing_tools_editing_tool_real_on_motion;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_leave_notify_event = (gboolean (*) (EditingToolsEditingTool *)) editing_tools_editing_tool_real_on_leave_notify_event;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_keypress = (gboolean (*) (EditingToolsEditingTool *, GdkEventKey*)) editing_tools_editing_tool_real_on_keypress;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->paint = (void (*) (EditingToolsEditingTool *, cairo_t*)) editing_tools_editing_tool_real_paint;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_ACTIVATED_SIGNAL] = g_signal_new ("activated", EDITING_TOOLS_TYPE_EDITING_TOOL, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_DEACTIVATED_SIGNAL] = g_signal_new ("deactivated", EDITING_TOOLS_TYPE_EDITING_TOOL, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_APPLIED_SIGNAL] = g_signal_new ("applied", EDITING_TOOLS_TYPE_EDITING_TOOL, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__OBJECT_OBJECT_BOXED_BOOLEAN, G_TYPE_NONE, 4, TYPE_COMMAND, gdk_pixbuf_get_type (), TYPE_DIMENSIONS, G_TYPE_BOOLEAN);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_CANCELLED_SIGNAL] = g_signal_new ("cancelled", EDITING_TOOLS_TYPE_EDITING_TOOL, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_ABORTED_SIGNAL] = g_signal_new ("aborted", EDITING_TOOLS_TYPE_EDITING_TOOL, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
#line 4955 "EditingTools.c"
}


static void editing_tools_editing_tool_instance_init (EditingToolsEditingTool * self) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_EDITING_TOOL_GET_PRIVATE (self);
#line 470 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->canvas = NULL;
#line 472 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->tool_window = NULL;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->ref_count = 1;
#line 4968 "EditingTools.c"
}


static void editing_tools_editing_tool_finalize (EditingToolsEditingTool * obj) {
	EditingToolsEditingTool * self;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_destroy (self);
#line 470 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_photo_canvas_unref0 (self->canvas);
#line 472 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->tool_window);
#line 473 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->surface);
#line 474 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (self->name);
#line 4986 "EditingTools.c"
}


GType editing_tools_editing_tool_get_type (void) {
	static volatile gsize editing_tools_editing_tool_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_editing_tool_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { editing_tools_value_editing_tool_init, editing_tools_value_editing_tool_free_value, editing_tools_value_editing_tool_copy_value, editing_tools_value_editing_tool_peek_pointer, "p", editing_tools_value_editing_tool_collect_value, "p", editing_tools_value_editing_tool_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsEditingToolClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_editing_tool_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsEditingTool), 0, (GInstanceInitFunc) editing_tools_editing_tool_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType editing_tools_editing_tool_type_id;
		editing_tools_editing_tool_type_id = g_type_register_fundamental (g_type_fundamental_next (), "EditingToolsEditingTool", &g_define_type_info, &g_define_type_fundamental_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&editing_tools_editing_tool_type_id__volatile, editing_tools_editing_tool_type_id);
	}
	return editing_tools_editing_tool_type_id__volatile;
}


gpointer editing_tools_editing_tool_ref (gpointer instance) {
	EditingToolsEditingTool * self;
	self = instance;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_atomic_int_inc (&self->ref_count);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return instance;
#line 5011 "EditingTools.c"
}


void editing_tools_editing_tool_unref (gpointer instance) {
	EditingToolsEditingTool * self;
	self = instance;
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		EDITING_TOOLS_EDITING_TOOL_GET_CLASS (self)->finalize (self);
#line 469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 5024 "EditingTools.c"
	}
}


static EditingToolsCropToolReticleOrientation editing_tools_crop_tool_reticle_orientation_toggle (EditingToolsCropToolReticleOrientation self) {
	EditingToolsCropToolReticleOrientation result = 0;
	EditingToolsCropToolReticleOrientation _tmp0_ = 0;
#line 637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (self == EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE) {
#line 637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT;
#line 5036 "EditingTools.c"
	} else {
#line 638 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE;
#line 5040 "EditingTools.c"
	}
#line 637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 5046 "EditingTools.c"
}


static GType editing_tools_crop_tool_reticle_orientation_get_type (void) {
	static volatile gsize editing_tools_crop_tool_reticle_orientation_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_crop_tool_reticle_orientation_type_id__volatile)) {
		static const GEnumValue values[] = {{EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE, "EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE", "landscape"}, {EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT, "EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT", "portrait"}, {0, NULL, NULL}};
		GType editing_tools_crop_tool_reticle_orientation_type_id;
		editing_tools_crop_tool_reticle_orientation_type_id = g_enum_register_static ("EditingToolsCropToolReticleOrientation", values);
		g_once_init_leave (&editing_tools_crop_tool_reticle_orientation_type_id__volatile, editing_tools_crop_tool_reticle_orientation_type_id);
	}
	return editing_tools_crop_tool_reticle_orientation_type_id__volatile;
}


static GType editing_tools_crop_tool_constraint_mode_get_type (void) {
	static volatile gsize editing_tools_crop_tool_constraint_mode_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_crop_tool_constraint_mode_type_id__volatile)) {
		static const GEnumValue values[] = {{EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL, "EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL", "normal"}, {EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_CUSTOM, "EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_CUSTOM", "custom"}, {0, NULL, NULL}};
		GType editing_tools_crop_tool_constraint_mode_type_id;
		editing_tools_crop_tool_constraint_mode_type_id = g_enum_register_static ("EditingToolsCropToolConstraintMode", values);
		g_once_init_leave (&editing_tools_crop_tool_constraint_mode_type_id__volatile, editing_tools_crop_tool_constraint_mode_type_id);
	}
	return editing_tools_crop_tool_constraint_mode_type_id__volatile;
}


static EditingToolsCropTool* editing_tools_crop_tool_construct (GType object_type) {
	EditingToolsCropTool* self = NULL;
#line 738 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsCropTool*) editing_tools_editing_tool_construct (object_type, "CropTool");
#line 737 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 5080 "EditingTools.c"
}


static EditingToolsCropTool* editing_tools_crop_tool_new (void) {
#line 737 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_crop_tool_construct (EDITING_TOOLS_TYPE_CROP_TOOL);
#line 5087 "EditingTools.c"
}


EditingToolsCropTool* editing_tools_crop_tool_factory (void) {
	EditingToolsCropTool* result = NULL;
	EditingToolsCropTool* _tmp0_;
#line 742 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_crop_tool_new ();
#line 742 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 742 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 5100 "EditingTools.c"
}


gboolean editing_tools_crop_tool_is_available (Photo* photo, Scaling* scaling) {
	gboolean result = FALSE;
	Dimensions dim = {0};
	Photo* _tmp0_;
	Dimensions _tmp1_ = {0};
	Dimensions _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
	Dimensions _tmp4_;
	gint _tmp5_;
#line 745 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), FALSE);
#line 745 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, FALSE);
#line 746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = photo;
#line 746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_get_original_dimensions (_tmp0_, &_tmp1_);
#line 746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaling_get_scaled_dimensions (scaling, &_tmp1_, &_tmp2_);
#line 746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dim = _tmp2_;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = dim;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.width;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ > EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE) {
#line 5131 "EditingTools.c"
		Dimensions _tmp6_;
		gint _tmp7_;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = dim;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = _tmp6_.height;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp7_ > EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 5140 "EditingTools.c"
	} else {
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = FALSE;
#line 5144 "EditingTools.c"
	}
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp3_;
#line 748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 5150 "EditingTools.c"
}


static void _vala_array_add4 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5161 "EditingTools.c"
	}
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5167 "EditingTools.c"
}


static void _vala_array_add5 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5178 "EditingTools.c"
	}
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5184 "EditingTools.c"
}


static void _vala_array_add6 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5195 "EditingTools.c"
	}
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5201 "EditingTools.c"
}


static void _vala_array_add7 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5212 "EditingTools.c"
	}
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5218 "EditingTools.c"
}


static void _vala_array_add8 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5229 "EditingTools.c"
	}
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5235 "EditingTools.c"
}


static void _vala_array_add9 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5246 "EditingTools.c"
	}
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5252 "EditingTools.c"
}


static void _vala_array_add10 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5263 "EditingTools.c"
	}
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5269 "EditingTools.c"
}


static void _vala_array_add11 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5280 "EditingTools.c"
	}
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5286 "EditingTools.c"
}


static void _vala_array_add12 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5297 "EditingTools.c"
	}
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5303 "EditingTools.c"
}


static void _vala_array_add13 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5314 "EditingTools.c"
	}
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5320 "EditingTools.c"
}


static void _vala_array_add14 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5331 "EditingTools.c"
	}
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5337 "EditingTools.c"
}


static void _vala_array_add15 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5348 "EditingTools.c"
	}
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5354 "EditingTools.c"
}


static void _vala_array_add16 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5365 "EditingTools.c"
	}
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5371 "EditingTools.c"
}


static void _vala_array_add17 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5382 "EditingTools.c"
	}
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5388 "EditingTools.c"
}


static void _vala_array_add18 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5399 "EditingTools.c"
	}
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5405 "EditingTools.c"
}


static void _vala_array_add19 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5416 "EditingTools.c"
	}
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5422 "EditingTools.c"
}


static void _vala_array_add20 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5433 "EditingTools.c"
	}
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5439 "EditingTools.c"
}


static void _vala_array_add21 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5450 "EditingTools.c"
	}
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5456 "EditingTools.c"
}


static void _vala_array_add22 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5467 "EditingTools.c"
	}
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5473 "EditingTools.c"
}


static void _vala_array_add23 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5484 "EditingTools.c"
	}
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5490 "EditingTools.c"
}


static void _vala_array_add24 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5501 "EditingTools.c"
	}
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5507 "EditingTools.c"
}


static void _vala_array_add25 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5518 "EditingTools.c"
	}
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5524 "EditingTools.c"
}


static void _vala_array_add26 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5535 "EditingTools.c"
	}
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5541 "EditingTools.c"
}


static void _vala_array_add27 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5552 "EditingTools.c"
	}
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5558 "EditingTools.c"
}


static void _vala_array_add28 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5569 "EditingTools.c"
	}
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5575 "EditingTools.c"
}


static void _vala_array_add29 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5586 "EditingTools.c"
	}
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5592 "EditingTools.c"
}


static void _vala_array_add30 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5603 "EditingTools.c"
	}
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5609 "EditingTools.c"
}


static void _vala_array_add31 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5620 "EditingTools.c"
	}
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5626 "EditingTools.c"
}


static void _vala_array_add32 (EditingToolsCropToolConstraintDescription** * array, int* length, int* size, EditingToolsCropToolConstraintDescription* value) {
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((*length) == (*size)) {
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*size = (*size) ? (2 * (*size)) : 4;
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*array = g_renew (EditingToolsCropToolConstraintDescription*, *array, (*size) + 1);
#line 5637 "EditingTools.c"
	}
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[(*length)++] = value;
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*array)[*length] = NULL;
#line 5643 "EditingTools.c"
}


static EditingToolsCropToolConstraintDescription** editing_tools_crop_tool_create_constraints (int* result_length1) {
	EditingToolsCropToolConstraintDescription** result = NULL;
	EditingToolsCropToolConstraintDescription** _result_ = NULL;
	EditingToolsCropToolConstraintDescription** _tmp0_;
	gint _result__length1;
	gint __result__size_;
	EditingToolsCropToolConstraintDescription** _tmp1_;
	gint _tmp1__length1;
	EditingToolsCropToolConstraintDescription* _tmp2_;
	EditingToolsCropToolConstraintDescription** _tmp3_;
	gint _tmp3__length1;
	EditingToolsCropToolConstraintDescription* _tmp4_;
	EditingToolsCropToolConstraintDescription** _tmp5_;
	gint _tmp5__length1;
	EditingToolsCropToolConstraintDescription* _tmp6_;
	EditingToolsCropToolConstraintDescription** _tmp7_;
	gint _tmp7__length1;
	EditingToolsCropToolConstraintDescription* _tmp8_;
	EditingToolsCropToolConstraintDescription** _tmp9_;
	gint _tmp9__length1;
	EditingToolsCropToolConstraintDescription* _tmp10_;
	EditingToolsCropToolConstraintDescription** _tmp11_;
	gint _tmp11__length1;
	EditingToolsCropToolConstraintDescription* _tmp12_;
	EditingToolsCropToolConstraintDescription** _tmp13_;
	gint _tmp13__length1;
	EditingToolsCropToolConstraintDescription* _tmp14_;
	EditingToolsCropToolConstraintDescription** _tmp15_;
	gint _tmp15__length1;
	EditingToolsCropToolConstraintDescription* _tmp16_;
	EditingToolsCropToolConstraintDescription** _tmp17_;
	gint _tmp17__length1;
	EditingToolsCropToolConstraintDescription* _tmp18_;
	EditingToolsCropToolConstraintDescription** _tmp19_;
	gint _tmp19__length1;
	EditingToolsCropToolConstraintDescription* _tmp20_;
	EditingToolsCropToolConstraintDescription** _tmp21_;
	gint _tmp21__length1;
	EditingToolsCropToolConstraintDescription* _tmp22_;
	EditingToolsCropToolConstraintDescription** _tmp23_;
	gint _tmp23__length1;
	EditingToolsCropToolConstraintDescription* _tmp24_;
	EditingToolsCropToolConstraintDescription** _tmp25_;
	gint _tmp25__length1;
	EditingToolsCropToolConstraintDescription* _tmp26_;
	EditingToolsCropToolConstraintDescription** _tmp27_;
	gint _tmp27__length1;
	EditingToolsCropToolConstraintDescription* _tmp28_;
	EditingToolsCropToolConstraintDescription** _tmp29_;
	gint _tmp29__length1;
	EditingToolsCropToolConstraintDescription* _tmp30_;
	EditingToolsCropToolConstraintDescription** _tmp31_;
	gint _tmp31__length1;
	EditingToolsCropToolConstraintDescription* _tmp32_;
	EditingToolsCropToolConstraintDescription** _tmp33_;
	gint _tmp33__length1;
	EditingToolsCropToolConstraintDescription* _tmp34_;
	EditingToolsCropToolConstraintDescription** _tmp35_;
	gint _tmp35__length1;
	EditingToolsCropToolConstraintDescription* _tmp36_;
	EditingToolsCropToolConstraintDescription** _tmp37_;
	gint _tmp37__length1;
	EditingToolsCropToolConstraintDescription* _tmp38_;
	EditingToolsCropToolConstraintDescription** _tmp39_;
	gint _tmp39__length1;
	EditingToolsCropToolConstraintDescription* _tmp40_;
	EditingToolsCropToolConstraintDescription** _tmp41_;
	gint _tmp41__length1;
	EditingToolsCropToolConstraintDescription* _tmp42_;
	EditingToolsCropToolConstraintDescription** _tmp43_;
	gint _tmp43__length1;
	EditingToolsCropToolConstraintDescription* _tmp44_;
	EditingToolsCropToolConstraintDescription** _tmp45_;
	gint _tmp45__length1;
	EditingToolsCropToolConstraintDescription* _tmp46_;
	EditingToolsCropToolConstraintDescription** _tmp47_;
	gint _tmp47__length1;
	EditingToolsCropToolConstraintDescription* _tmp48_;
	EditingToolsCropToolConstraintDescription** _tmp49_;
	gint _tmp49__length1;
	EditingToolsCropToolConstraintDescription* _tmp50_;
	EditingToolsCropToolConstraintDescription** _tmp51_;
	gint _tmp51__length1;
	EditingToolsCropToolConstraintDescription* _tmp52_;
	EditingToolsCropToolConstraintDescription** _tmp53_;
	gint _tmp53__length1;
	EditingToolsCropToolConstraintDescription* _tmp54_;
	EditingToolsCropToolConstraintDescription** _tmp55_;
	gint _tmp55__length1;
	EditingToolsCropToolConstraintDescription* _tmp56_;
	EditingToolsCropToolConstraintDescription** _tmp57_;
	gint _tmp57__length1;
	EditingToolsCropToolConstraintDescription* _tmp58_;
	EditingToolsCropToolConstraintDescription** _tmp59_;
	gint _tmp59__length1;
#line 752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = g_new0 (EditingToolsCropToolConstraintDescription*, 0 + 1);
#line 752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp0_;
#line 752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result__length1 = 0;
#line 752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	__result__size_ = _result__length1;
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _result_;
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1__length1 = _result__length1;
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_crop_tool_constraint_description_new (_ ("Unconstrained"), 0, 0, FALSE, EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO);
#line 754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add4 (&_result_, &_result__length1, &__result__size_, _tmp2_);
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _result_;
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3__length1 = _result__length1;
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = editing_tools_crop_tool_constraint_description_new (_ ("Square"), 1, 1, FALSE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add5 (&_result_, &_result__length1, &__result__size_, _tmp4_);
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _result_;
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5__length1 = _result__length1;
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = editing_tools_crop_tool_constraint_description_new (_ ("Screen"), 0, 0, TRUE, EDITING_TOOLS_CROP_TOOL_SCREEN_ASPECT_RATIO);
#line 756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add6 (&_result_, &_result__length1, &__result__size_, _tmp6_);
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _result_;
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7__length1 = _result__length1;
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = editing_tools_crop_tool_constraint_description_new (_ ("Original Size"), 0, 0, TRUE, EDITING_TOOLS_CROP_TOOL_ORIGINAL_ASPECT_RATIO);
#line 757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add7 (&_result_, &_result__length1, &__result__size_, _tmp8_);
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _result_;
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9__length1 = _result__length1;
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = editing_tools_crop_tool_constraint_description_new (_ ("-"), 0, 0, FALSE, EDITING_TOOLS_CROP_TOOL_SEPARATOR);
#line 758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add8 (&_result_, &_result__length1, &__result__size_, _tmp10_);
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _result_;
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11__length1 = _result__length1;
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = editing_tools_crop_tool_constraint_description_new (_ ("SD Video (4 ∶ 3)"), 4, 3, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 759 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add9 (&_result_, &_result__length1, &__result__size_, _tmp12_);
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _result_;
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13__length1 = _result__length1;
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = editing_tools_crop_tool_constraint_description_new (_ ("HD Video (16 ∶ 9)"), 16, 9, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add10 (&_result_, &_result__length1, &__result__size_, _tmp14_);
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _result_;
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15__length1 = _result__length1;
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = editing_tools_crop_tool_constraint_description_new (_ ("-"), 0, 0, FALSE, EDITING_TOOLS_CROP_TOOL_SEPARATOR);
#line 761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add11 (&_result_, &_result__length1, &__result__size_, _tmp16_);
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _result_;
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17__length1 = _result__length1;
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = editing_tools_crop_tool_constraint_description_new (_ ("Wallet (2 × 3 in.)"), 3, 2, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 762 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add12 (&_result_, &_result__length1, &__result__size_, _tmp18_);
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _result_;
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19__length1 = _result__length1;
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = editing_tools_crop_tool_constraint_description_new (_ ("Notecard (3 × 5 in.)"), 5, 3, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add13 (&_result_, &_result__length1, &__result__size_, _tmp20_);
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _result_;
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21__length1 = _result__length1;
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = editing_tools_crop_tool_constraint_description_new (_ ("4 × 6 in."), 6, 4, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add14 (&_result_, &_result__length1, &__result__size_, _tmp22_);
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _result_;
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23__length1 = _result__length1;
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = editing_tools_crop_tool_constraint_description_new (_ ("5 × 7 in."), 7, 5, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add15 (&_result_, &_result__length1, &__result__size_, _tmp24_);
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _result_;
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25__length1 = _result__length1;
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = editing_tools_crop_tool_constraint_description_new (_ ("8 × 10 in."), 10, 8, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 766 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add16 (&_result_, &_result__length1, &__result__size_, _tmp26_);
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _result_;
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27__length1 = _result__length1;
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = editing_tools_crop_tool_constraint_description_new (_ ("Letter (8.5 × 11 in.)"), 85, 110, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add17 (&_result_, &_result__length1, &__result__size_, _tmp28_);
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = _result_;
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29__length1 = _result__length1;
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = editing_tools_crop_tool_constraint_description_new (_ ("11 × 14 in."), 14, 11, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 768 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add18 (&_result_, &_result__length1, &__result__size_, _tmp30_);
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = _result_;
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31__length1 = _result__length1;
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = editing_tools_crop_tool_constraint_description_new (_ ("Tabloid (11 × 17 in.)"), 17, 11, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 769 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add19 (&_result_, &_result__length1, &__result__size_, _tmp32_);
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = _result_;
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33__length1 = _result__length1;
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = editing_tools_crop_tool_constraint_description_new (_ ("16 × 20 in."), 20, 16, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add20 (&_result_, &_result__length1, &__result__size_, _tmp34_);
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = _result_;
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35__length1 = _result__length1;
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = editing_tools_crop_tool_constraint_description_new (_ ("-"), 0, 0, FALSE, EDITING_TOOLS_CROP_TOOL_SEPARATOR);
#line 771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add21 (&_result_, &_result__length1, &__result__size_, _tmp36_);
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = _result_;
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37__length1 = _result__length1;
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = editing_tools_crop_tool_constraint_description_new (_ ("Metric Wallet (9 × 13 cm)"), 13, 9, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 772 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add22 (&_result_, &_result__length1, &__result__size_, _tmp38_);
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = _result_;
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39__length1 = _result__length1;
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = editing_tools_crop_tool_constraint_description_new (_ ("Postcard (10 × 15 cm)"), 15, 10, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add23 (&_result_, &_result__length1, &__result__size_, _tmp40_);
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41_ = _result_;
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41__length1 = _result__length1;
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = editing_tools_crop_tool_constraint_description_new (_ ("13 × 18 cm"), 18, 13, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add24 (&_result_, &_result__length1, &__result__size_, _tmp42_);
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43_ = _result_;
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43__length1 = _result__length1;
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp44_ = editing_tools_crop_tool_constraint_description_new (_ ("18 × 24 cm"), 24, 18, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 775 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add25 (&_result_, &_result__length1, &__result__size_, _tmp44_);
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45_ = _result_;
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45__length1 = _result__length1;
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp46_ = editing_tools_crop_tool_constraint_description_new (_ ("A4 (210 × 297 mm)"), 210, 297, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add26 (&_result_, &_result__length1, &__result__size_, _tmp46_);
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp47_ = _result_;
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp47__length1 = _result__length1;
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp48_ = editing_tools_crop_tool_constraint_description_new (_ ("20 × 30 cm"), 30, 20, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add27 (&_result_, &_result__length1, &__result__size_, _tmp48_);
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp49_ = _result_;
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp49__length1 = _result__length1;
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp50_ = editing_tools_crop_tool_constraint_description_new (_ ("24 × 40 cm"), 40, 24, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add28 (&_result_, &_result__length1, &__result__size_, _tmp50_);
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp51_ = _result_;
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp51__length1 = _result__length1;
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp52_ = editing_tools_crop_tool_constraint_description_new (_ ("30 × 40 cm"), 40, 30, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add29 (&_result_, &_result__length1, &__result__size_, _tmp52_);
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp53_ = _result_;
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp53__length1 = _result__length1;
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp54_ = editing_tools_crop_tool_constraint_description_new (_ ("A3 (297 × 420 mm)"), 420, 297, TRUE, EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS);
#line 780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add30 (&_result_, &_result__length1, &__result__size_, _tmp54_);
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp55_ = _result_;
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp55__length1 = _result__length1;
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp56_ = editing_tools_crop_tool_constraint_description_new (_ ("-"), 0, 0, FALSE, EDITING_TOOLS_CROP_TOOL_SEPARATOR);
#line 781 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add31 (&_result_, &_result__length1, &__result__size_, _tmp56_);
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp57_ = _result_;
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp57__length1 = _result__length1;
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp58_ = editing_tools_crop_tool_constraint_description_new (_ ("Custom"), 0, 0, TRUE, EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO);
#line 782 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_array_add32 (&_result_, &_result__length1, &__result__size_, _tmp58_);
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp59_ = _result_;
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp59__length1 = _result__length1;
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (result_length1) {
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*result_length1 = _tmp59__length1;
#line 5990 "EditingTools.c"
	}
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp59_;
#line 784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 5996 "EditingTools.c"
}


static gpointer _editing_tools_crop_tool_constraint_description_ref0 (gpointer self) {
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? editing_tools_crop_tool_constraint_description_ref (self) : NULL;
#line 6003 "EditingTools.c"
}


static GtkListStore* editing_tools_crop_tool_create_constraint_list (EditingToolsCropToolConstraintDescription** constraint_data, int constraint_data_length1) {
	GtkListStore* result = NULL;
	GtkListStore* _result_ = NULL;
	GtkListStore* _tmp0_;
	GtkTreeIter iter = {0};
	EditingToolsCropToolConstraintDescription** _tmp1_;
	gint _tmp1__length1;
#line 788 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = gtk_list_store_new (1, G_TYPE_STRING, G_TYPE_STRING, -1);
#line 788 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp0_;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = constraint_data;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1__length1 = constraint_data_length1;
#line 6022 "EditingTools.c"
	{
		EditingToolsCropToolConstraintDescription** constraint_collection = NULL;
		gint constraint_collection_length1 = 0;
		gint _constraint_collection_size_ = 0;
		gint constraint_it = 0;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		constraint_collection = _tmp1_;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		constraint_collection_length1 = _tmp1__length1;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		for (constraint_it = 0; constraint_it < _tmp1__length1; constraint_it = constraint_it + 1) {
#line 6034 "EditingTools.c"
			EditingToolsCropToolConstraintDescription* _tmp2_;
			EditingToolsCropToolConstraintDescription* constraint = NULL;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp2_ = _editing_tools_crop_tool_constraint_description_ref0 (constraint_collection[constraint_it]);
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			constraint = _tmp2_;
#line 6041 "EditingTools.c"
			{
				GtkListStore* _tmp3_;
				GtkTreeIter _tmp4_ = {0};
				GtkListStore* _tmp5_;
				GtkTreeIter _tmp6_;
				EditingToolsCropToolConstraintDescription* _tmp7_;
				const gchar* _tmp8_;
				GValue _tmp9_ = {0};
#line 792 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp3_ = _result_;
#line 792 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				gtk_list_store_append (_tmp3_, &_tmp4_);
#line 792 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				iter = _tmp4_;
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp5_ = _result_;
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp6_ = iter;
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp7_ = constraint;
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp8_ = _tmp7_->name;
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				g_value_init (&_tmp9_, G_TYPE_STRING);
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				g_value_set_string (&_tmp9_, _tmp8_);
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				gtk_list_store_set_value (_tmp5_, &_tmp6_, 0, &_tmp9_);
#line 793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				G_IS_VALUE (&_tmp9_) ? (g_value_unset (&_tmp9_), NULL) : NULL;
#line 791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_editing_tools_crop_tool_constraint_description_unref0 (constraint);
#line 6074 "EditingTools.c"
			}
		}
	}
#line 796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _result_;
#line 796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 6082 "EditingTools.c"
}


static void editing_tools_crop_tool_update_pivot_button_state (EditingToolsCropTool* self) {
	EditingToolsCropToolCropToolWindow* _tmp0_;
	GtkButton* _tmp1_;
	EditingToolsCropToolConstraintDescription* _tmp2_;
	EditingToolsCropToolConstraintDescription* _tmp3_;
	gboolean _tmp4_;
#line 799 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->pivot_reticle_button;
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_crop_tool_get_selected_constraint (self);
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->is_pivotable;
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_sensitive (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_widget_get_type (), GtkWidget), _tmp4_);
#line 800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_crop_tool_constraint_description_unref0 (_tmp3_);
#line 6108 "EditingTools.c"
}


static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_get_selected_constraint (EditingToolsCropTool* self) {
	EditingToolsCropToolConstraintDescription* result = NULL;
	EditingToolsCropToolConstraintDescription* _result_ = NULL;
	EditingToolsCropToolConstraintDescription** _tmp0_;
	gint _tmp0__length1;
	EditingToolsCropToolCropToolWindow* _tmp1_;
	GtkComboBox* _tmp2_;
	gint _tmp3_;
	EditingToolsCropToolConstraintDescription* _tmp4_;
	EditingToolsCropToolConstraintDescription* _tmp5_;
	EditingToolsCropToolConstraintDescription* _tmp6_;
	gfloat _tmp7_;
#line 804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), NULL);
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->constraints;
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0__length1 = self->priv->constraints_length1;
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->crop_tool_window;
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->constraint_combo;
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = gtk_combo_box_get_active (_tmp2_);
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp0_[_tmp3_];
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _editing_tools_crop_tool_constraint_description_ref0 (_tmp4_);
#line 805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp5_;
#line 807 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _result_;
#line 807 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_->aspect_ratio;
#line 807 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp7_ == EDITING_TOOLS_CROP_TOOL_ORIGINAL_ASPECT_RATIO) {
#line 6148 "EditingTools.c"
		EditingToolsCropToolConstraintDescription* _tmp8_;
		EditingToolsPhotoCanvas* _tmp9_;
		GdkRectangle _tmp10_ = {0};
		gint _tmp11_;
		EditingToolsCropToolConstraintDescription* _tmp12_;
		EditingToolsPhotoCanvas* _tmp13_;
		GdkRectangle _tmp14_ = {0};
		gint _tmp15_;
#line 808 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _result_;
#line 808 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 808 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp9_, &_tmp10_);
#line 808 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = _tmp10_.width;
#line 808 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_->basis_width = _tmp11_;
#line 809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = _result_;
#line 809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp13_, &_tmp14_);
#line 809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = _tmp14_.height;
#line 809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_->basis_height = _tmp15_;
#line 6177 "EditingTools.c"
	} else {
		EditingToolsCropToolConstraintDescription* _tmp16_;
		gfloat _tmp17_;
#line 810 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _result_;
#line 810 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = _tmp16_->aspect_ratio;
#line 810 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp17_ == EDITING_TOOLS_CROP_TOOL_SCREEN_ASPECT_RATIO) {
#line 6187 "EditingTools.c"
			GdkScreen* screen = NULL;
			GdkScreen* _tmp18_;
			GdkScreen* _tmp19_;
			EditingToolsCropToolConstraintDescription* _tmp20_;
			GdkScreen* _tmp21_;
			gint _tmp22_;
			EditingToolsCropToolConstraintDescription* _tmp23_;
			GdkScreen* _tmp24_;
			gint _tmp25_;
#line 811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp18_ = gdk_screen_get_default ();
#line 811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp19_ = _g_object_ref0 (_tmp18_);
#line 811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			screen = _tmp19_;
#line 812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp20_ = _result_;
#line 812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp21_ = screen;
#line 812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp22_ = gdk_screen_get_width (_tmp21_);
#line 812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp20_->basis_width = _tmp22_;
#line 813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp23_ = _result_;
#line 813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp24_ = screen;
#line 813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp25_ = gdk_screen_get_height (_tmp24_);
#line 813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp23_->basis_height = _tmp25_;
#line 810 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (screen);
#line 6221 "EditingTools.c"
		}
	}
#line 816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _result_;
#line 816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 6228 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_on_width_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event) {
	gboolean result = FALSE;
	EditingToolsCropToolCropToolWindow* _tmp0_;
	EditingToolsCropToolCropToolWindow* _tmp1_;
	GtkEntry* _tmp2_;
	GtkEntry* _tmp3_;
	GdkEventFocus* _tmp4_;
	gboolean _tmp5_;
#line 819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), FALSE);
#line 819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->crop_tool_window;
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->custom_width_entry;
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp0_->most_recently_edited);
#line 820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_->most_recently_edited = _tmp3_;
#line 821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = event;
#line 821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = editing_tools_crop_tool_on_custom_entry_focus_out (self, _tmp4_);
#line 821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp5_;
#line 821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 6264 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_on_height_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event) {
	gboolean result = FALSE;
	EditingToolsCropToolCropToolWindow* _tmp0_;
	EditingToolsCropToolCropToolWindow* _tmp1_;
	GtkEntry* _tmp2_;
	GtkEntry* _tmp3_;
	GdkEventFocus* _tmp4_;
	gboolean _tmp5_;
#line 824 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), FALSE);
#line 824 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->crop_tool_window;
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->custom_height_entry;
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _g_object_ref0 (_tmp2_);
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp0_->most_recently_edited);
#line 825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_->most_recently_edited = _tmp3_;
#line 826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = event;
#line 826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = editing_tools_crop_tool_on_custom_entry_focus_out (self, _tmp4_);
#line 826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp5_;
#line 826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 6300 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_on_custom_entry_focus_out (EditingToolsCropTool* self, GdkEventFocus* event) {
	gboolean result = FALSE;
	gint width = 0;
	EditingToolsCropToolCropToolWindow* _tmp0_;
	GtkEntry* _tmp1_;
	const gchar* _tmp2_;
	const gchar* _tmp3_;
	gint _tmp4_;
	gint height = 0;
	EditingToolsCropToolCropToolWindow* _tmp5_;
	GtkEntry* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	gint _tmp9_;
	gint _tmp10_;
	gint _tmp16_;
	gboolean _tmp22_ = FALSE;
	gint _tmp23_;
	gint _tmp24_;
	gint _tmp27_;
	gint _tmp28_;
	gfloat _tmp29_;
	gint _tmp63_;
	gint _tmp64_;
	Box new_crop = {0};
	Box _tmp65_;
	Box _tmp66_ = {0};
	Box _tmp67_;
	Box _tmp68_;
	EditingToolsPhotoCanvas* _tmp69_;
	Box _tmp70_;
	EditingToolsPhotoCanvas* _tmp71_;
	gint _tmp72_;
	gint _tmp73_;
#line 829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), FALSE);
#line 829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->custom_width_entry;
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_entry_get_text (_tmp1_);
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = atoi (_tmp3_);
#line 830 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	width = _tmp4_;
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->crop_tool_window;
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_->custom_height_entry;
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = gtk_entry_get_text (_tmp6_);
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_;
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = atoi (_tmp8_);
#line 831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	height = _tmp9_;
#line 833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = width;
#line 833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp10_ < 1) {
#line 6370 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp11_;
		GtkEntry* _tmp12_;
		gint _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
#line 834 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		width = 1;
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = self->priv->crop_tool_window;
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = _tmp11_->custom_width_entry;
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = width;
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = g_strdup_printf ("%d", _tmp13_);
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = _tmp14_;
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp12_, _tmp15_);
#line 835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp15_);
#line 6392 "EditingTools.c"
	}
#line 838 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = height;
#line 838 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp16_ < 1) {
#line 6398 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp17_;
		GtkEntry* _tmp18_;
		gint _tmp19_;
		gchar* _tmp20_;
		gchar* _tmp21_;
#line 839 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		height = 1;
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = self->priv->crop_tool_window;
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp18_ = _tmp17_->custom_height_entry;
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = height;
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp20_ = g_strdup_printf ("%d", _tmp19_);
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = _tmp20_;
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp18_, _tmp21_);
#line 840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp21_);
#line 6420 "EditingTools.c"
	}
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = width;
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->custom_width;
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp23_ == _tmp24_) {
#line 6428 "EditingTools.c"
		gint _tmp25_;
		gint _tmp26_;
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp25_ = height;
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = self->priv->custom_height;
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = _tmp25_ == _tmp26_;
#line 6437 "EditingTools.c"
	} else {
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = FALSE;
#line 6441 "EditingTools.c"
	}
#line 843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp22_) {
#line 844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 6449 "EditingTools.c"
	}
#line 846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = width;
#line 846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = height;
#line 846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_aspect_ratio = ((gfloat) _tmp27_) / ((gfloat) _tmp28_);
#line 848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->priv->custom_aspect_ratio;
#line 848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp29_ < EDITING_TOOLS_CROP_TOOL_MIN_ASPECT_RATIO) {
#line 6461 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp30_;
		GtkEntry* _tmp31_;
		EditingToolsCropToolCropToolWindow* _tmp32_;
		GtkEntry* _tmp33_;
#line 849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp30_ = self->priv->crop_tool_window;
#line 849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp31_ = _tmp30_->most_recently_edited;
#line 849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp32_ = self->priv->crop_tool_window;
#line 849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp33_ = _tmp32_->custom_height_entry;
#line 849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp31_ == _tmp33_) {
#line 6476 "EditingTools.c"
			gint _tmp34_;
			EditingToolsCropToolCropToolWindow* _tmp35_;
			GtkEntry* _tmp36_;
			gint _tmp37_;
			gchar* _tmp38_;
			gchar* _tmp39_;
#line 850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp34_ = width;
#line 850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			height = (gint) (_tmp34_ / EDITING_TOOLS_CROP_TOOL_MIN_ASPECT_RATIO);
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp35_ = self->priv->crop_tool_window;
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp36_ = _tmp35_->custom_height_entry;
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp37_ = height;
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp38_ = g_strdup_printf ("%d", _tmp37_);
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp39_ = _tmp38_;
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_entry_set_text (_tmp36_, _tmp39_);
#line 851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_free0 (_tmp39_);
#line 6501 "EditingTools.c"
		} else {
			gint _tmp40_;
			EditingToolsCropToolCropToolWindow* _tmp41_;
			GtkEntry* _tmp42_;
			gint _tmp43_;
			gchar* _tmp44_;
			gchar* _tmp45_;
#line 853 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp40_ = height;
#line 853 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			width = (gint) (_tmp40_ * EDITING_TOOLS_CROP_TOOL_MIN_ASPECT_RATIO);
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp41_ = self->priv->crop_tool_window;
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp42_ = _tmp41_->custom_width_entry;
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp43_ = width;
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp44_ = g_strdup_printf ("%d", _tmp43_);
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp45_ = _tmp44_;
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_entry_set_text (_tmp42_, _tmp45_);
#line 854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_free0 (_tmp45_);
#line 6527 "EditingTools.c"
		}
	} else {
		gfloat _tmp46_;
#line 856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp46_ = self->priv->custom_aspect_ratio;
#line 856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp46_ > EDITING_TOOLS_CROP_TOOL_MAX_ASPECT_RATIO) {
#line 6535 "EditingTools.c"
			EditingToolsCropToolCropToolWindow* _tmp47_;
			GtkEntry* _tmp48_;
			EditingToolsCropToolCropToolWindow* _tmp49_;
			GtkEntry* _tmp50_;
#line 857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp47_ = self->priv->crop_tool_window;
#line 857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp48_ = _tmp47_->most_recently_edited;
#line 857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp49_ = self->priv->crop_tool_window;
#line 857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp50_ = _tmp49_->custom_height_entry;
#line 857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp48_ == _tmp50_) {
#line 6550 "EditingTools.c"
				gint _tmp51_;
				EditingToolsCropToolCropToolWindow* _tmp52_;
				GtkEntry* _tmp53_;
				gint _tmp54_;
				gchar* _tmp55_;
				gchar* _tmp56_;
#line 858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp51_ = width;
#line 858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				height = (gint) (_tmp51_ / EDITING_TOOLS_CROP_TOOL_MAX_ASPECT_RATIO);
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp52_ = self->priv->crop_tool_window;
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp53_ = _tmp52_->custom_height_entry;
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp54_ = height;
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp55_ = g_strdup_printf ("%d", _tmp54_);
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp56_ = _tmp55_;
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				gtk_entry_set_text (_tmp53_, _tmp56_);
#line 859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_g_free0 (_tmp56_);
#line 6575 "EditingTools.c"
			} else {
				gint _tmp57_;
				EditingToolsCropToolCropToolWindow* _tmp58_;
				GtkEntry* _tmp59_;
				gint _tmp60_;
				gchar* _tmp61_;
				gchar* _tmp62_;
#line 861 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp57_ = height;
#line 861 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				width = (gint) (_tmp57_ * EDITING_TOOLS_CROP_TOOL_MAX_ASPECT_RATIO);
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp58_ = self->priv->crop_tool_window;
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp59_ = _tmp58_->custom_width_entry;
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp60_ = width;
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp61_ = g_strdup_printf ("%d", _tmp60_);
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp62_ = _tmp61_;
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				gtk_entry_set_text (_tmp59_, _tmp62_);
#line 862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_g_free0 (_tmp62_);
#line 6601 "EditingTools.c"
			}
		}
	}
#line 866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp63_ = width;
#line 866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp64_ = height;
#line 866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_aspect_ratio = ((gfloat) _tmp63_) / ((gfloat) _tmp64_);
#line 868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp65_ = self->priv->scaled_crop;
#line 868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_constrain_crop (self, &_tmp65_, &_tmp66_);
#line 868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_crop = _tmp66_;
#line 870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp67_ = new_crop;
#line 870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_crop_resized (self, &_tmp67_);
#line 871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp68_ = new_crop;
#line 871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_crop = _tmp68_;
#line 872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp69_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp70_ = new_crop;
#line 872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp69_, &_tmp70_);
#line 873 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp71_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 873 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp71_);
#line 875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp72_ = width;
#line 875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_width = _tmp72_;
#line 876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp73_ = height;
#line 876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_height = _tmp73_;
#line 878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 6647 "EditingTools.c"
}


static void editing_tools_crop_tool_on_width_insert_text (EditingToolsCropTool* self, const gchar* text, gint length, gint* position) {
	EditingToolsCropToolCropToolWindow* _tmp0_;
	GtkEntry* _tmp1_;
	const gchar* _tmp2_;
	gint _tmp3_;
#line 881 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 881 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (text != NULL);
#line 882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->custom_width_entry;
#line 882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = text;
#line 882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = length;
#line 882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_entry_insert_text (self, _tmp1_, _tmp2_, _tmp3_, position);
#line 6670 "EditingTools.c"
}


static void editing_tools_crop_tool_on_height_insert_text (EditingToolsCropTool* self, const gchar* text, gint length, gint* position) {
	EditingToolsCropToolCropToolWindow* _tmp0_;
	GtkEntry* _tmp1_;
	const gchar* _tmp2_;
	gint _tmp3_;
#line 885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (text != NULL);
#line 886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->custom_height_entry;
#line 886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = text;
#line 886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = length;
#line 886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_entry_insert_text (self, _tmp1_, _tmp2_, _tmp3_, position);
#line 6693 "EditingTools.c"
}


static gchar string_get (const gchar* self, glong index) {
	gchar result = '\0';
	glong _tmp0_;
	gchar _tmp1_;
#line 1110 "/usr/share/vala-0.36/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, '\0');
#line 1111 "/usr/share/vala-0.36/vapi/glib-2.0.vapi"
	_tmp0_ = index;
#line 1111 "/usr/share/vala-0.36/vapi/glib-2.0.vapi"
	_tmp1_ = ((gchar*) self)[_tmp0_];
#line 1111 "/usr/share/vala-0.36/vapi/glib-2.0.vapi"
	result = _tmp1_;
#line 1111 "/usr/share/vala-0.36/vapi/glib-2.0.vapi"
	return result;
#line 6711 "EditingTools.c"
}


static void editing_tools_crop_tool_on_entry_insert_text (EditingToolsCropTool* self, GtkEntry* sender, const gchar* text, gint length, gint* position) {
	gboolean _tmp0_;
	gint _tmp1_;
	gchar* new_text = NULL;
	gchar* _tmp5_;
	const gchar* _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
	GtkEntry* _tmp29_;
#line 889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GTK_IS_ENTRY (sender));
#line 889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (text != NULL);
#line 890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->entry_insert_in_progress;
#line 890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 6736 "EditingTools.c"
	}
#line 893 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->entry_insert_in_progress = TRUE;
#line 895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = length;
#line 895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ == -1) {
#line 6744 "EditingTools.c"
		const gchar* _tmp2_;
		gint _tmp3_;
		gint _tmp4_;
#line 896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = text;
#line 896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = strlen (_tmp2_);
#line 896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = _tmp3_;
#line 896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		length = (gint) _tmp4_;
#line 6756 "EditingTools.c"
	}
#line 899 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = g_strdup ("");
#line 899 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_text = _tmp5_;
#line 6762 "EditingTools.c"
	{
		gint ctr = 0;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		ctr = 0;
#line 6767 "EditingTools.c"
		{
			gboolean _tmp6_ = FALSE;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp6_ = TRUE;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			while (TRUE) {
#line 6774 "EditingTools.c"
				gint _tmp8_;
				gint _tmp9_;
				const gchar* _tmp10_;
				gint _tmp11_;
				gchar _tmp12_;
				gboolean _tmp13_;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (!_tmp6_) {
#line 6783 "EditingTools.c"
					gint _tmp7_;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp7_ = ctr;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					ctr = _tmp7_ + 1;
#line 6789 "EditingTools.c"
				}
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp6_ = FALSE;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp8_ = ctr;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp9_ = length;
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (!(_tmp8_ < _tmp9_)) {
#line 900 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					break;
#line 6801 "EditingTools.c"
				}
#line 901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp10_ = text;
#line 901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp11_ = ctr;
#line 901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp12_ = string_get (_tmp10_, (glong) _tmp11_);
#line 901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp13_ = g_ascii_isdigit (_tmp12_);
#line 901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp13_) {
#line 6813 "EditingTools.c"
					const gchar* _tmp14_;
					const gchar* _tmp15_;
					gint _tmp16_;
					gchar _tmp17_;
					gchar* _tmp18_;
					gchar* _tmp19_;
					gchar* _tmp20_;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp14_ = new_text;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp15_ = text;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp16_ = ctr;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp17_ = string_get (_tmp15_, (glong) _tmp16_);
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp18_ = g_strdup_printf ("%c", (gchar) _tmp17_);
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp19_ = _tmp18_;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp20_ = g_strconcat (_tmp14_, _tmp19_, NULL);
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_g_free0 (new_text);
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_text = _tmp20_;
#line 902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_g_free0 (_tmp19_);
#line 6841 "EditingTools.c"
				}
			}
		}
	}
#line 906 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = new_text;
#line 906 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = strlen (_tmp21_);
#line 906 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_;
#line 906 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp23_ > 0) {
#line 6854 "EditingTools.c"
		GtkEntry* _tmp24_;
		const gchar* _tmp25_;
		const gchar* _tmp26_;
		gint _tmp27_;
		gint _tmp28_;
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp24_ = sender;
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp25_ = new_text;
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = new_text;
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp27_ = strlen (_tmp26_);
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp28_ = _tmp27_;
#line 907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_editable_insert_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, GTK_TYPE_EDITABLE, GtkEditable), _tmp25_, (gint) _tmp28_, position);
#line 6872 "EditingTools.c"
	}
#line 909 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = sender;
#line 909 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_stop_emission_by_name (_tmp29_, "insert-text");
#line 911 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->entry_insert_in_progress = FALSE;
#line 889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (new_text);
#line 6882 "EditingTools.c"
}


static gfloat editing_tools_crop_tool_get_constraint_aspect_ratio (EditingToolsCropTool* self) {
	gfloat result = 0.0F;
	gfloat _result_ = 0.0F;
	EditingToolsCropToolConstraintDescription* _tmp0_;
	EditingToolsCropToolConstraintDescription* _tmp1_;
	gfloat _tmp2_;
	gfloat _tmp3_;
	gfloat _tmp4_;
	EditingToolsCropToolReticleOrientation _tmp20_;
#line 914 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), 0.0F);
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_crop_tool_get_selected_constraint (self);
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->aspect_ratio;
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_crop_tool_constraint_description_unref0 (_tmp1_);
#line 915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp3_;
#line 917 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _result_;
#line 917 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp4_ == EDITING_TOOLS_CROP_TOOL_ORIGINAL_ASPECT_RATIO) {
#line 6913 "EditingTools.c"
		EditingToolsPhotoCanvas* _tmp5_;
		GdkRectangle _tmp6_ = {0};
		gint _tmp7_;
		EditingToolsPhotoCanvas* _tmp8_;
		GdkRectangle _tmp9_ = {0};
		gint _tmp10_;
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp5_, &_tmp6_);
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = _tmp6_.width;
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp8_, &_tmp9_);
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = _tmp9_.height;
#line 918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_result_ = ((gfloat) _tmp7_) / ((gfloat) _tmp10_);
#line 6934 "EditingTools.c"
	} else {
		gfloat _tmp11_;
#line 920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = _result_;
#line 920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp11_ == EDITING_TOOLS_CROP_TOOL_SCREEN_ASPECT_RATIO) {
#line 6941 "EditingTools.c"
			GdkScreen* screen = NULL;
			GdkScreen* _tmp12_;
			GdkScreen* _tmp13_;
			GdkScreen* _tmp14_;
			gint _tmp15_;
			GdkScreen* _tmp16_;
			gint _tmp17_;
#line 921 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp12_ = gdk_screen_get_default ();
#line 921 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp13_ = _g_object_ref0 (_tmp12_);
#line 921 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			screen = _tmp13_;
#line 922 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp14_ = screen;
#line 922 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp15_ = gdk_screen_get_width (_tmp14_);
#line 922 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp16_ = screen;
#line 922 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp17_ = gdk_screen_get_height (_tmp16_);
#line 922 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_result_ = ((gfloat) _tmp15_) / ((gfloat) _tmp17_);
#line 920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (screen);
#line 6967 "EditingTools.c"
		} else {
			gfloat _tmp18_;
#line 923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp18_ = _result_;
#line 923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp18_ == EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO) {
#line 6974 "EditingTools.c"
				gfloat _tmp19_;
#line 924 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp19_ = self->priv->custom_aspect_ratio;
#line 924 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_result_ = _tmp19_;
#line 6980 "EditingTools.c"
			}
		}
	}
#line 926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->priv->reticle_orientation;
#line 926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp20_ == EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT) {
#line 6988 "EditingTools.c"
		gfloat _tmp21_;
#line 927 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = _result_;
#line 927 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_result_ = 1.0f / _tmp21_;
#line 6994 "EditingTools.c"
	}
#line 929 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _result_;
#line 929 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 7000 "EditingTools.c"
}


static gfloat editing_tools_crop_tool_get_constraint_aspect_ratio_for_constraint (EditingToolsCropTool* self, EditingToolsCropToolConstraintDescription* constraint, Photo* photo) {
	gfloat result = 0.0F;
	gfloat _result_ = 0.0F;
	EditingToolsCropToolConstraintDescription* _tmp0_;
	gfloat _tmp1_;
	gfloat _tmp2_;
	EditingToolsCropToolReticleOrientation _tmp18_;
#line 932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), 0.0F);
#line 932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_CROP_TOOL_IS_CONSTRAINT_DESCRIPTION (constraint), 0.0F);
#line 932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), 0.0F);
#line 933 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = constraint;
#line 933 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->aspect_ratio;
#line 933 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_ = _tmp1_;
#line 935 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _result_;
#line 935 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ == EDITING_TOOLS_CROP_TOOL_ORIGINAL_ASPECT_RATIO) {
#line 7027 "EditingTools.c"
		Dimensions orig_dim = {0};
		Photo* _tmp3_;
		Dimensions _tmp4_ = {0};
		Dimensions _tmp5_;
		gint _tmp6_;
		Dimensions _tmp7_;
		gint _tmp8_;
#line 936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = photo;
#line 936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		photo_get_original_dimensions (_tmp3_, &_tmp4_);
#line 936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		orig_dim = _tmp4_;
#line 937 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = orig_dim;
#line 937 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.width;
#line 937 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = orig_dim;
#line 937 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp7_.height;
#line 937 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_result_ = ((gfloat) _tmp6_) / ((gfloat) _tmp8_);
#line 7051 "EditingTools.c"
	} else {
		gfloat _tmp9_;
#line 938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _result_;
#line 938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp9_ == EDITING_TOOLS_CROP_TOOL_SCREEN_ASPECT_RATIO) {
#line 7058 "EditingTools.c"
			GdkScreen* screen = NULL;
			GdkScreen* _tmp10_;
			GdkScreen* _tmp11_;
			GdkScreen* _tmp12_;
			gint _tmp13_;
			GdkScreen* _tmp14_;
			gint _tmp15_;
#line 939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp10_ = gdk_screen_get_default ();
#line 939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp11_ = _g_object_ref0 (_tmp10_);
#line 939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			screen = _tmp11_;
#line 940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp12_ = screen;
#line 940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp13_ = gdk_screen_get_width (_tmp12_);
#line 940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp14_ = screen;
#line 940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp15_ = gdk_screen_get_height (_tmp14_);
#line 940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_result_ = ((gfloat) _tmp13_) / ((gfloat) _tmp15_);
#line 938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (screen);
#line 7084 "EditingTools.c"
		} else {
			gfloat _tmp16_;
#line 941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp16_ = _result_;
#line 941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp16_ == EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO) {
#line 7091 "EditingTools.c"
				gfloat _tmp17_;
#line 942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp17_ = self->priv->custom_aspect_ratio;
#line 942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_result_ = _tmp17_;
#line 7097 "EditingTools.c"
			}
		}
	}
#line 944 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->reticle_orientation;
#line 944 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp18_ == EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_PORTRAIT) {
#line 7105 "EditingTools.c"
		gfloat _tmp19_;
#line 945 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = _result_;
#line 945 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_result_ = 1.0f / _tmp19_;
#line 7111 "EditingTools.c"
	}
#line 947 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _result_;
#line 947 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 7117 "EditingTools.c"
}


static void editing_tools_crop_tool_constraint_changed (EditingToolsCropTool* self) {
	EditingToolsCropToolConstraintDescription* selected_constraint = NULL;
	EditingToolsCropToolConstraintDescription* _tmp0_;
	EditingToolsCropToolConstraintDescription* _tmp1_;
	gfloat _tmp2_;
	EditingToolsCropToolConstraintDescription* _tmp13_;
	EditingToolsCropToolConstraintDescription* _tmp14_;
	gboolean _tmp15_;
	gboolean _tmp16_;
	gfloat _tmp17_;
	gfloat _tmp18_;
#line 951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 952 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_crop_tool_get_selected_constraint (self);
#line 952 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	selected_constraint = _tmp0_;
#line 953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = selected_constraint;
#line 953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->aspect_ratio;
#line 953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ == EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO) {
#line 954 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_set_custom_constraint_mode (self);
#line 7146 "EditingTools.c"
	} else {
		EditingToolsCropToolConstraintDescription* _tmp3_;
		gfloat _tmp4_;
#line 956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_set_normal_constraint_mode (self);
#line 958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = selected_constraint;
#line 958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = _tmp3_->aspect_ratio;
#line 958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp4_ != EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 7158 "EditingTools.c"
			ConfigFacade* _tmp5_;
			ConfigFacade* _tmp6_;
			gint _tmp7_;
			ConfigFacade* _tmp8_;
			ConfigFacade* _tmp9_;
			gint _tmp10_;
			gint _tmp11_;
			gint _tmp12_;
#line 962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp5_ = config_facade_get_instance ();
#line 962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp6_ = _tmp5_;
#line 962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = configuration_facade_get_last_crop_width (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade));
#line 962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			self->priv->custom_init_width = _tmp7_;
#line 962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (_tmp6_);
#line 963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp8_ = config_facade_get_instance ();
#line 963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp9_ = _tmp8_;
#line 963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp10_ = configuration_facade_get_last_crop_height (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade));
#line 963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			self->priv->custom_init_height = _tmp10_;
#line 963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (_tmp9_);
#line 964 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp11_ = self->priv->custom_init_width;
#line 964 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp12_ = self->priv->custom_init_height;
#line 964 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			self->priv->custom_aspect_ratio = ((gfloat) _tmp11_) / ((gfloat) _tmp12_);
#line 7193 "EditingTools.c"
		}
	}
#line 968 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_update_pivot_button_state (self);
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = editing_tools_crop_tool_get_selected_constraint (self);
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_;
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_->is_pivotable;
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = !_tmp15_;
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_crop_tool_constraint_description_unref0 (_tmp14_);
#line 970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp16_) {
#line 971 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->reticle_orientation = EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE;
#line 7212 "EditingTools.c"
	}
#line 973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->pre_aspect_ratio;
#line 973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp17_ != _tmp18_) {
#line 7220 "EditingTools.c"
		Box new_crop = {0};
		Box _tmp19_;
		Box _tmp20_ = {0};
		Box _tmp21_;
		Box _tmp22_;
		EditingToolsPhotoCanvas* _tmp23_;
		Box _tmp24_;
		EditingToolsPhotoCanvas* _tmp25_;
		gfloat _tmp26_;
#line 974 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = self->priv->scaled_crop;
#line 974 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_constrain_crop (self, &_tmp19_, &_tmp20_);
#line 974 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		new_crop = _tmp20_;
#line 976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = new_crop;
#line 976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_crop_resized (self, &_tmp21_);
#line 977 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = new_crop;
#line 977 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->scaled_crop = _tmp22_;
#line 978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp23_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp24_ = new_crop;
#line 978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_invalidate_area (_tmp23_, &_tmp24_);
#line 979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp25_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_repaint (_tmp25_);
#line 981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->pre_aspect_ratio = _tmp26_;
#line 7258 "EditingTools.c"
	}
#line 951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_crop_tool_constraint_description_unref0 (selected_constraint);
#line 7262 "EditingTools.c"
}


static void editing_tools_crop_tool_set_custom_constraint_mode (EditingToolsCropTool* self) {
	EditingToolsCropToolConstraintMode _tmp0_;
	gboolean _tmp1_ = FALSE;
	EditingToolsCropToolCropToolWindow* _tmp2_;
	gint _tmp3_;
	EditingToolsCropToolCropToolWindow* _tmp11_;
	GtkBox* _tmp12_;
	EditingToolsCropToolCropToolWindow* _tmp13_;
	GtkComboBox* _tmp14_;
	EditingToolsCropToolCropToolWindow* _tmp15_;
	GtkBox* _tmp16_;
	EditingToolsCropToolCropToolWindow* _tmp17_;
	GtkButton* _tmp18_;
	EditingToolsCropToolCropToolWindow* _tmp19_;
	GtkBox* _tmp20_;
	EditingToolsCropToolCropToolWindow* _tmp21_;
	GtkBox* _tmp22_;
	EditingToolsCropToolCropToolWindow* _tmp23_;
	GtkBox* _tmp24_;
	EditingToolsCropToolCropToolWindow* _tmp25_;
	GtkComboBox* _tmp26_;
	EditingToolsCropToolCropToolWindow* _tmp27_;
	GtkBox* _tmp28_;
	EditingToolsCropToolCropToolWindow* _tmp29_;
	GtkEntry* _tmp30_;
	EditingToolsCropToolCropToolWindow* _tmp31_;
	GtkBox* _tmp32_;
	EditingToolsCropToolCropToolWindow* _tmp33_;
	GtkLabel* _tmp34_;
	EditingToolsCropToolCropToolWindow* _tmp35_;
	GtkBox* _tmp36_;
	EditingToolsCropToolCropToolWindow* _tmp37_;
	GtkEntry* _tmp38_;
	EditingToolsCropToolCropToolWindow* _tmp39_;
	GtkBox* _tmp40_;
	EditingToolsCropToolCropToolWindow* _tmp41_;
	GtkButton* _tmp42_;
	EditingToolsCropToolCropToolWindow* _tmp43_;
	GtkBox* _tmp44_;
	EditingToolsCropToolCropToolWindow* _tmp45_;
	GtkBox* _tmp46_;
	EditingToolsCropToolReticleOrientation _tmp47_;
	gint _tmp68_;
	gint _tmp69_;
	EditingToolsCropToolCropToolWindow* _tmp70_;
#line 985 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->constraint_mode;
#line 986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_CUSTOM) {
#line 987 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 7319 "EditingTools.c"
	}
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->crop_tool_window;
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->normal_width;
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp3_ == -1) {
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = TRUE;
#line 7329 "EditingTools.c"
	} else {
		EditingToolsCropToolCropToolWindow* _tmp4_;
		gint _tmp5_;
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->crop_tool_window;
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = _tmp4_->normal_height;
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = _tmp5_ == -1;
#line 7339 "EditingTools.c"
	}
#line 989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 7343 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp6_;
		EditingToolsCropToolCropToolWindow* _tmp7_;
		EditingToolsCropToolCropToolWindow* _tmp8_;
		gint _tmp9_ = 0;
		gint _tmp10_ = 0;
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = self->priv->crop_tool_window;
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = self->priv->crop_tool_window;
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = self->priv->crop_tool_window;
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_window_get_size (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, gtk_window_get_type (), GtkWindow), &_tmp9_, &_tmp10_);
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_->normal_width = _tmp9_;
#line 990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_->normal_height = _tmp10_;
#line 7361 "EditingTools.c"
	}
#line 993 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->crop_tool_window;
#line 993 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_->layout;
#line 993 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->crop_tool_window;
#line 993 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_->constraint_combo;
#line 993 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, gtk_widget_get_type (), GtkWidget));
#line 994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->crop_tool_window;
#line 994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_->layout;
#line 994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->crop_tool_window;
#line 994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_->pivot_reticle_button;
#line 994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, gtk_widget_get_type (), GtkWidget));
#line 995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = self->priv->crop_tool_window;
#line 995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_->layout;
#line 995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->crop_tool_window;
#line 995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_->response_layout;
#line 995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, gtk_widget_get_type (), GtkWidget));
#line 997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->crop_tool_window;
#line 997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = _tmp23_->layout;
#line 997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->priv->crop_tool_window;
#line 997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_->constraint_combo;
#line 997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_widget_get_type (), GtkWidget));
#line 998 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = self->priv->crop_tool_window;
#line 998 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = _tmp27_->layout;
#line 998 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->priv->crop_tool_window;
#line 998 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = _tmp29_->custom_width_entry;
#line 998 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp28_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp30_, gtk_widget_get_type (), GtkWidget));
#line 999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = self->priv->crop_tool_window;
#line 999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = _tmp31_->layout;
#line 999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->crop_tool_window;
#line 999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_->custom_mulsign_label;
#line 999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp32_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_widget_get_type (), GtkWidget));
#line 1000 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = self->priv->crop_tool_window;
#line 1000 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = _tmp35_->layout;
#line 1000 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = self->priv->crop_tool_window;
#line 1000 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = _tmp37_->custom_height_entry;
#line 1000 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp36_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, gtk_widget_get_type (), GtkWidget));
#line 1001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = self->priv->crop_tool_window;
#line 1001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = _tmp39_->layout;
#line 1001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41_ = self->priv->crop_tool_window;
#line 1001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = _tmp41_->pivot_reticle_button;
#line 1001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp40_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp42_, gtk_widget_get_type (), GtkWidget));
#line 1002 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43_ = self->priv->crop_tool_window;
#line 1002 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp44_ = _tmp43_->layout;
#line 1002 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45_ = self->priv->crop_tool_window;
#line 1002 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp46_ = _tmp45_->response_layout;
#line 1002 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp44_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp46_, gtk_widget_get_type (), GtkWidget));
#line 1004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp47_ = self->priv->reticle_orientation;
#line 1004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp47_ == EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE) {
#line 7457 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp48_;
		GtkEntry* _tmp49_;
		gint _tmp50_;
		gchar* _tmp51_;
		gchar* _tmp52_;
		EditingToolsCropToolCropToolWindow* _tmp53_;
		GtkEntry* _tmp54_;
		gint _tmp55_;
		gchar* _tmp56_;
		gchar* _tmp57_;
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp48_ = self->priv->crop_tool_window;
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp49_ = _tmp48_->custom_width_entry;
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp50_ = self->priv->custom_init_width;
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp51_ = g_strdup_printf ("%d", _tmp50_);
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp52_ = _tmp51_;
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp49_, _tmp52_);
#line 1005 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp52_);
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp53_ = self->priv->crop_tool_window;
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp54_ = _tmp53_->custom_height_entry;
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp55_ = self->priv->custom_init_height;
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp56_ = g_strdup_printf ("%d", _tmp55_);
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp57_ = _tmp56_;
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp54_, _tmp57_);
#line 1006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp57_);
#line 7496 "EditingTools.c"
	} else {
		EditingToolsCropToolCropToolWindow* _tmp58_;
		GtkEntry* _tmp59_;
		gint _tmp60_;
		gchar* _tmp61_;
		gchar* _tmp62_;
		EditingToolsCropToolCropToolWindow* _tmp63_;
		GtkEntry* _tmp64_;
		gint _tmp65_;
		gchar* _tmp66_;
		gchar* _tmp67_;
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp58_ = self->priv->crop_tool_window;
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp59_ = _tmp58_->custom_width_entry;
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp60_ = self->priv->custom_init_height;
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp61_ = g_strdup_printf ("%d", _tmp60_);
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp62_ = _tmp61_;
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp59_, _tmp62_);
#line 1008 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp62_);
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp63_ = self->priv->crop_tool_window;
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp64_ = _tmp63_->custom_height_entry;
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp65_ = self->priv->custom_init_width;
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp66_ = g_strdup_printf ("%d", _tmp65_);
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp67_ = _tmp66_;
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp64_, _tmp67_);
#line 1009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp67_);
#line 7536 "EditingTools.c"
	}
#line 1011 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp68_ = self->priv->custom_init_width;
#line 1011 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp69_ = self->priv->custom_init_height;
#line 1011 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_aspect_ratio = ((gfloat) _tmp68_) / ((gfloat) _tmp69_);
#line 1013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp70_ = self->priv->crop_tool_window;
#line 1013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_show_all (G_TYPE_CHECK_INSTANCE_CAST (_tmp70_, gtk_widget_get_type (), GtkWidget));
#line 1015 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraint_mode = EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_CUSTOM;
#line 7550 "EditingTools.c"
}


static void editing_tools_crop_tool_set_normal_constraint_mode (EditingToolsCropTool* self) {
	EditingToolsCropToolConstraintMode _tmp0_;
	EditingToolsCropToolCropToolWindow* _tmp1_;
	GtkBox* _tmp2_;
	EditingToolsCropToolCropToolWindow* _tmp3_;
	GtkComboBox* _tmp4_;
	EditingToolsCropToolCropToolWindow* _tmp5_;
	GtkBox* _tmp6_;
	EditingToolsCropToolCropToolWindow* _tmp7_;
	GtkEntry* _tmp8_;
	EditingToolsCropToolCropToolWindow* _tmp9_;
	GtkBox* _tmp10_;
	EditingToolsCropToolCropToolWindow* _tmp11_;
	GtkLabel* _tmp12_;
	EditingToolsCropToolCropToolWindow* _tmp13_;
	GtkBox* _tmp14_;
	EditingToolsCropToolCropToolWindow* _tmp15_;
	GtkEntry* _tmp16_;
	EditingToolsCropToolCropToolWindow* _tmp17_;
	GtkBox* _tmp18_;
	EditingToolsCropToolCropToolWindow* _tmp19_;
	GtkButton* _tmp20_;
	EditingToolsCropToolCropToolWindow* _tmp21_;
	GtkBox* _tmp22_;
	EditingToolsCropToolCropToolWindow* _tmp23_;
	GtkBox* _tmp24_;
	EditingToolsCropToolCropToolWindow* _tmp25_;
	GtkBox* _tmp26_;
	EditingToolsCropToolCropToolWindow* _tmp27_;
	GtkComboBox* _tmp28_;
	EditingToolsCropToolCropToolWindow* _tmp29_;
	GtkBox* _tmp30_;
	EditingToolsCropToolCropToolWindow* _tmp31_;
	GtkButton* _tmp32_;
	EditingToolsCropToolCropToolWindow* _tmp33_;
	GtkBox* _tmp34_;
	EditingToolsCropToolCropToolWindow* _tmp35_;
	GtkBox* _tmp36_;
	EditingToolsCropToolCropToolWindow* _tmp37_;
	EditingToolsCropToolCropToolWindow* _tmp38_;
	gint _tmp39_;
	EditingToolsCropToolCropToolWindow* _tmp40_;
	gint _tmp41_;
	EditingToolsCropToolCropToolWindow* _tmp42_;
#line 1018 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1019 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->constraint_mode;
#line 1019 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL) {
#line 1020 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 7606 "EditingTools.c"
	}
#line 1022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->crop_tool_window;
#line 1022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->layout;
#line 1022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->crop_tool_window;
#line 1022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->constraint_combo;
#line 1022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, gtk_widget_get_type (), GtkWidget));
#line 1023 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->crop_tool_window;
#line 1023 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_->layout;
#line 1023 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->crop_tool_window;
#line 1023 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_->custom_width_entry;
#line 1023 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, gtk_widget_get_type (), GtkWidget));
#line 1024 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->crop_tool_window;
#line 1024 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_->layout;
#line 1024 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->crop_tool_window;
#line 1024 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_->custom_mulsign_label;
#line 1024 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, gtk_widget_get_type (), GtkWidget));
#line 1025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->crop_tool_window;
#line 1025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_->layout;
#line 1025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->crop_tool_window;
#line 1025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_->custom_height_entry;
#line 1025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, gtk_widget_get_type (), GtkWidget));
#line 1026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->crop_tool_window;
#line 1026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_->layout;
#line 1026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = self->priv->crop_tool_window;
#line 1026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_->pivot_reticle_button;
#line 1026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, gtk_widget_get_type (), GtkWidget));
#line 1027 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->crop_tool_window;
#line 1027 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_->layout;
#line 1027 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->crop_tool_window;
#line 1027 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = _tmp23_->response_layout;
#line 1027 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_remove (G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, gtk_widget_get_type (), GtkWidget));
#line 1029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->priv->crop_tool_window;
#line 1029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_->layout;
#line 1029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = self->priv->crop_tool_window;
#line 1029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = _tmp27_->constraint_combo;
#line 1029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp28_, gtk_widget_get_type (), GtkWidget));
#line 1030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->priv->crop_tool_window;
#line 1030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = _tmp29_->layout;
#line 1030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = self->priv->crop_tool_window;
#line 1030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = _tmp31_->pivot_reticle_button;
#line 1030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp30_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp32_, gtk_widget_get_type (), GtkWidget));
#line 1031 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->crop_tool_window;
#line 1031 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_->layout;
#line 1031 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = self->priv->crop_tool_window;
#line 1031 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = _tmp35_->response_layout;
#line 1031 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp36_, gtk_widget_get_type (), GtkWidget));
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = self->priv->crop_tool_window;
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = self->priv->crop_tool_window;
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = _tmp38_->normal_width;
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = self->priv->crop_tool_window;
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41_ = _tmp40_->normal_height;
#line 1033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_window_resize (G_TYPE_CHECK_INSTANCE_CAST (_tmp37_, gtk_window_get_type (), GtkWindow), _tmp39_, _tmp41_);
#line 1036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = self->priv->crop_tool_window;
#line 1036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_show_all (G_TYPE_CHECK_INSTANCE_CAST (_tmp42_, gtk_widget_get_type (), GtkWidget));
#line 1038 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraint_mode = EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL;
#line 7716 "EditingTools.c"
}


static void editing_tools_crop_tool_constrain_crop (EditingToolsCropTool* self, Box* crop, Box* result) {
	gfloat user_aspect_ratio = 0.0F;
	gfloat _tmp0_;
	gfloat _tmp1_;
	gfloat old_area = 0.0F;
	gint _tmp3_;
	gint _tmp4_;
	gfloat _tmp5_;
	gfloat _tmp6_;
	gdouble _tmp7_;
	gfloat _tmp8_;
	gfloat _tmp9_;
	gdouble _tmp10_;
	Dimensions image_size = {0};
	Dimensions _tmp11_ = {0};
	gdouble angle = 0.0;
	EditingToolsPhotoCanvas* _tmp12_;
	Photo* _tmp13_;
	Photo* _tmp14_;
	gdouble _tmp15_ = 0.0;
	Box _tmp16_;
	Dimensions _tmp17_;
	gint _tmp18_;
	Dimensions _tmp19_;
	gint _tmp20_;
	gdouble _tmp21_;
	Box _tmp22_ = {0};
	gint _tmp23_;
	gint _tmp24_;
	gfloat _tmp25_;
	Box _tmp30_;
#line 1041 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1041 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (crop != NULL);
#line 1042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	user_aspect_ratio = _tmp0_;
#line 1043 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = user_aspect_ratio;
#line 1043 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 7763 "EditingTools.c"
		Box _tmp2_;
#line 1044 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = *crop;
#line 1044 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*result = _tmp2_;
#line 1044 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 7771 "EditingTools.c"
	}
#line 1047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = box_get_width (crop);
#line 1047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = box_get_height (crop);
#line 1047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old_area = (gfloat) (_tmp3_ * _tmp4_);
#line 1048 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = old_area;
#line 1048 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = user_aspect_ratio;
#line 1048 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = sqrt ((gdouble) (_tmp5_ / _tmp6_));
#line 1048 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_adjust_height (crop, (gint) _tmp7_);
#line 1049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = old_area;
#line 1049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = user_aspect_ratio;
#line 1049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = sqrt ((gdouble) (_tmp8_ * _tmp9_));
#line 1049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_adjust_width (crop, (gint) _tmp10_);
#line 1052 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_get_photo_dimensions (self, &_tmp11_);
#line 1052 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	image_size = _tmp11_;
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = editing_tools_photo_canvas_get_photo (_tmp12_);
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_;
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_get_straighten (_tmp14_, &_tmp15_);
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	angle = _tmp15_;
#line 1054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp14_);
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = *crop;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = image_size;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_.width;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = image_size;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_.height;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = angle;
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	clamp_inside_rotated_image (&_tmp16_, _tmp18_, _tmp20_, _tmp21_, FALSE, &_tmp22_);
#line 1055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*crop = _tmp22_;
#line 1058 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = box_get_width (crop);
#line 1058 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = box_get_height (crop);
#line 1058 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = user_aspect_ratio;
#line 1058 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (((gfloat) _tmp23_) >= (_tmp24_ * _tmp25_)) {
#line 7835 "EditingTools.c"
		gint _tmp26_;
		gfloat _tmp27_;
#line 1059 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = box_get_height (crop);
#line 1059 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp27_ = user_aspect_ratio;
#line 1059 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_adjust_width (crop, (gint) (_tmp26_ * _tmp27_));
#line 7844 "EditingTools.c"
	} else {
		gint _tmp28_;
		gfloat _tmp29_;
#line 1061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp28_ = box_get_width (crop);
#line 1061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp29_ = user_aspect_ratio;
#line 1061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_adjust_height (crop, (gint) (_tmp28_ / _tmp29_));
#line 7854 "EditingTools.c"
	}
#line 1063 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = *crop;
#line 1063 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp30_;
#line 1063 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 7862 "EditingTools.c"
}


static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_get_last_constraint (EditingToolsCropTool* self, gint* index) {
	gint _vala_index = 0;
	EditingToolsCropToolConstraintDescription* result = NULL;
	ConfigFacade* _tmp0_;
	ConfigFacade* _tmp1_;
	gint _tmp2_;
	EditingToolsCropToolConstraintDescription* _tmp3_ = NULL;
	gint _tmp4_;
	EditingToolsCropToolConstraintDescription** _tmp5_;
	gint _tmp5__length1;
	EditingToolsCropToolConstraintDescription* _tmp9_;
#line 1066 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), NULL);
#line 1067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = config_facade_get_instance ();
#line 1067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 1067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = configuration_facade_get_last_crop_menu_choice (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade));
#line 1067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_index = _tmp2_;
#line 1067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp1_);
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _vala_index;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->constraints;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5__length1 = self->priv->constraints_length1;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp4_ < _tmp5__length1) {
#line 7897 "EditingTools.c"
		EditingToolsCropToolConstraintDescription** _tmp6_;
		gint _tmp6__length1;
		gint _tmp7_;
		EditingToolsCropToolConstraintDescription* _tmp8_;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = self->priv->constraints;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6__length1 = self->priv->constraints_length1;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = _vala_index;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp6_[_tmp7_];
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp8_;
#line 7912 "EditingTools.c"
	} else {
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = NULL;
#line 7916 "EditingTools.c"
	}
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _editing_tools_crop_tool_constraint_description_ref0 (_tmp3_);
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp9_;
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (index) {
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*index = _vala_index;
#line 7926 "EditingTools.c"
	}
#line 1069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 7930 "EditingTools.c"
}


static void editing_tools_crop_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas) {
	EditingToolsCropTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
	cairo_t* _tmp2_;
	cairo_t* _tmp3_;
	EditingToolsPhotoCanvas* _tmp4_;
	Dimensions _tmp5_ = {0};
	cairo_surface_t* _tmp6_;
	EditingToolsPhotoCanvas* _tmp7_;
	GdkRectangle _tmp8_ = {0};
	gint _tmp9_;
	EditingToolsPhotoCanvas* _tmp10_;
	GdkRectangle _tmp11_ = {0};
	gint _tmp12_;
	cairo_surface_t* _tmp13_;
	cairo_t* ctx = NULL;
	cairo_surface_t* _tmp14_;
	cairo_t* _tmp15_;
	cairo_t* _tmp16_;
	cairo_t* _tmp17_;
	EditingToolsPhotoCanvas* _tmp18_;
	GtkWindow* _tmp19_;
	GtkWindow* _tmp20_;
	EditingToolsCropToolCropToolWindow* _tmp21_;
	EditingToolsCropToolCropToolWindow* _tmp22_;
	GtkComboBox* _tmp23_;
	GtkListStore* _tmp24_;
	EditingToolsPhotoCanvas* _tmp25_;
	Photo* _tmp26_;
	Photo* _tmp27_;
	gboolean _tmp28_;
	gboolean _tmp29_;
	Dimensions uncropped_dim = {0};
	EditingToolsPhotoCanvas* _tmp61_;
	Photo* _tmp62_;
	Photo* _tmp63_;
	Dimensions _tmp64_ = {0};
	Dimensions _tmp65_;
	Box crop = {0};
	EditingToolsPhotoCanvas* _tmp66_;
	Photo* _tmp67_;
	Photo* _tmp68_;
	Box _tmp69_ = {0};
	gboolean _tmp70_;
	gboolean _tmp71_;
	Dimensions _tmp84_;
	EditingToolsPhotoCanvas* _tmp85_;
	GdkRectangle _tmp86_ = {0};
	Dimensions _tmp87_ = {0};
	Box _tmp88_ = {0};
	ConfigFacade* _tmp89_;
	ConfigFacade* _tmp90_;
	gint _tmp91_;
	ConfigFacade* _tmp92_;
	ConfigFacade* _tmp93_;
	gint _tmp94_;
	gint _tmp95_;
	gint _tmp96_;
	gint _tmp97_;
	gint _tmp98_;
	EditingToolsPhotoCanvas* _tmp99_;
	EditingToolsCropToolCropToolWindow* _tmp100_;
	EditingToolsPhotoCanvas* _tmp101_;
	Photo* _tmp102_;
	Photo* _tmp103_;
	gboolean _tmp104_;
	gboolean _tmp105_;
	Box new_crop = {0};
	Box _tmp114_;
	Box _tmp115_ = {0};
	Box _tmp116_;
	Box _tmp117_;
	EditingToolsPhotoCanvas* _tmp118_;
	Box _tmp119_;
	EditingToolsPhotoCanvas* _tmp120_;
	gfloat _tmp121_;
#line 1072 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1072 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 1073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 1073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_bind_canvas_handlers (self, _tmp0_);
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = canvas;
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_photo_canvas_get_default_ctx (_tmp1_);
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = canvas;
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_surface_dim (_tmp4_, &_tmp5_);
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_prepare_ctx (self, _tmp3_, &_tmp5_);
#line 1075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (_tmp3_);
#line 1077 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->crop_surface;
#line 1077 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp6_ != NULL) {
#line 1078 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_cairo_surface_destroy0 (self->priv->crop_surface);
#line 1078 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->crop_surface = NULL;
#line 8041 "EditingTools.c"
	}
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = canvas;
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp7_, &_tmp8_);
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.width;
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = canvas;
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp10_, &_tmp11_);
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.height;
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, _tmp9_, _tmp12_);
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->crop_surface);
#line 1080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_surface = _tmp13_;
#line 1084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->crop_surface;
#line 1084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = cairo_create (_tmp14_);
#line 1084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	ctx = _tmp15_;
#line 1085 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = ctx;
#line 1085 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (_tmp16_, 0.0, 0.0, 0.0, 1.0);
#line 1086 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = ctx;
#line 1086 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (_tmp17_);
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = canvas;
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = editing_tools_photo_canvas_get_container (_tmp18_);
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_;
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = editing_tools_crop_tool_crop_tool_window_new (_tmp20_);
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp21_);
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->crop_tool_window);
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_tool_window = _tmp21_;
#line 1089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp20_);
#line 1092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->priv->crop_tool_window;
#line 1092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_->constraint_combo;
#line 1092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->constraint_list;
#line 1092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_combo_box_set_model (_tmp23_, G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, GTK_TYPE_TREE_MODEL, GtkTreeModel));
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = canvas;
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = editing_tools_photo_canvas_get_photo (_tmp25_);
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_;
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = photo_has_crop (_tmp27_);
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = !_tmp28_;
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp27_);
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp29_) {
#line 8113 "EditingTools.c"
		gint index = 0;
		EditingToolsCropToolConstraintDescription* desc = NULL;
		gint _tmp30_ = 0;
		EditingToolsCropToolConstraintDescription* _tmp31_;
		gboolean _tmp32_ = FALSE;
		EditingToolsCropToolConstraintDescription* _tmp33_;
#line 1095 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp31_ = editing_tools_crop_tool_get_last_constraint (self, &_tmp30_);
#line 1095 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		index = _tmp30_;
#line 1095 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		desc = _tmp31_;
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp33_ = desc;
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp33_ != NULL) {
#line 8130 "EditingTools.c"
			EditingToolsCropToolConstraintDescription* _tmp34_;
			gboolean _tmp35_;
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp34_ = desc;
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp35_ = editing_tools_crop_tool_constraint_description_is_separator (_tmp34_);
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp32_ = !_tmp35_;
#line 8139 "EditingTools.c"
		} else {
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp32_ = FALSE;
#line 8143 "EditingTools.c"
		}
#line 1096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp32_) {
#line 8147 "EditingTools.c"
			EditingToolsCropToolCropToolWindow* _tmp36_;
			GtkComboBox* _tmp37_;
			gint _tmp38_;
#line 1097 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp36_ = self->priv->crop_tool_window;
#line 1097 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp37_ = _tmp36_->constraint_combo;
#line 1097 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp38_ = index;
#line 1097 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_combo_box_set_active (_tmp37_, _tmp38_);
#line 8159 "EditingTools.c"
		}
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_editing_tools_crop_tool_constraint_description_unref0 (desc);
#line 8163 "EditingTools.c"
	} else {
		Photo* photo = NULL;
		EditingToolsPhotoCanvas* _tmp39_;
		Photo* _tmp40_;
		Dimensions cropped_dim = {0};
		Photo* _tmp41_;
		Dimensions _tmp42_ = {0};
		gfloat ratio = 0.0F;
		Dimensions _tmp43_;
		gint _tmp44_;
		Dimensions _tmp45_;
		gint _tmp46_;
#line 1101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp39_ = canvas;
#line 1101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp40_ = editing_tools_photo_canvas_get_photo (_tmp39_);
#line 1101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		photo = _tmp40_;
#line 1102 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp41_ = photo;
#line 1102 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp41_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp42_);
#line 1102 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cropped_dim = _tmp42_;
#line 1103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp43_ = cropped_dim;
#line 1103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp44_ = _tmp43_.width;
#line 1103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp45_ = cropped_dim;
#line 1103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp46_ = _tmp45_.height;
#line 1103 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		ratio = ((gfloat) _tmp44_) / ((gfloat) _tmp46_);
#line 8198 "EditingTools.c"
		{
			gint index = 0;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			index = 1;
#line 8203 "EditingTools.c"
			{
				gboolean _tmp47_ = FALSE;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp47_ = TRUE;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				while (TRUE) {
#line 8210 "EditingTools.c"
					gint _tmp49_;
					EditingToolsCropToolConstraintDescription** _tmp50_;
					gint _tmp50__length1;
					gfloat _tmp51_;
					EditingToolsCropToolConstraintDescription** _tmp52_;
					gint _tmp52__length1;
					gint _tmp53_;
					EditingToolsCropToolConstraintDescription* _tmp54_;
					Photo* _tmp55_;
					gfloat _tmp56_;
					gdouble _tmp57_;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					if (!_tmp47_) {
#line 8224 "EditingTools.c"
						gint _tmp48_;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						_tmp48_ = index;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						index = _tmp48_ + 1;
#line 8230 "EditingTools.c"
					}
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp47_ = FALSE;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp49_ = index;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp50_ = self->priv->constraints;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp50__length1 = self->priv->constraints_length1;
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					if (!(_tmp49_ < _tmp50__length1)) {
#line 1104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						break;
#line 8244 "EditingTools.c"
					}
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp51_ = ratio;
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp52_ = self->priv->constraints;
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp52__length1 = self->priv->constraints_length1;
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp53_ = index;
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp54_ = _tmp52_[_tmp53_];
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp55_ = photo;
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp56_ = editing_tools_crop_tool_get_constraint_aspect_ratio_for_constraint (self, _tmp54_, _tmp55_);
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp57_ = fabs ((gdouble) (_tmp51_ - _tmp56_));
#line 1105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					if (_tmp57_ < 0.005) {
#line 8264 "EditingTools.c"
						EditingToolsCropToolCropToolWindow* _tmp58_;
						GtkComboBox* _tmp59_;
						gint _tmp60_;
#line 1106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						_tmp58_ = self->priv->crop_tool_window;
#line 1106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						_tmp59_ = _tmp58_->constraint_combo;
#line 1106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						_tmp60_ = index;
#line 1106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						gtk_combo_box_set_active (_tmp59_, _tmp60_);
#line 8276 "EditingTools.c"
					}
				}
			}
		}
#line 1093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (photo);
#line 8283 "EditingTools.c"
	}
#line 1111 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_update_pivot_button_state (self);
#line 1112 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->reticle_orientation = EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE;
#line 1114 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_bind_window_handlers (self);
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp61_ = canvas;
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp62_ = editing_tools_photo_canvas_get_photo (_tmp61_);
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp63_ = _tmp62_;
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp63_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp64_);
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp65_ = _tmp64_;
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp63_);
#line 1117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	uncropped_dim = _tmp65_;
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp66_ = canvas;
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp67_ = editing_tools_photo_canvas_get_photo (_tmp66_);
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp68_ = _tmp67_;
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp70_ = photo_get_crop (_tmp68_, &_tmp69_, PHOTO_EXCEPTION_NONE);
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	crop = _tmp69_;
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp71_ = !_tmp70_;
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp68_);
#line 1120 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp71_) {
#line 8321 "EditingTools.c"
		gint xofs = 0;
		Dimensions _tmp72_;
		gint _tmp73_;
		gint yofs = 0;
		Dimensions _tmp74_;
		gint _tmp75_;
		gint _tmp76_;
		gint _tmp77_;
		Dimensions _tmp78_;
		gint _tmp79_;
		gint _tmp80_;
		Dimensions _tmp81_;
		gint _tmp82_;
		gint _tmp83_;
#line 1121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp72_ = uncropped_dim;
#line 1121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp73_ = _tmp72_.width;
#line 1121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		xofs = (gint) (_tmp73_ * EDITING_TOOLS_CROP_TOOL_CROP_INIT_X_PCT);
#line 1122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp74_ = uncropped_dim;
#line 1122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp75_ = _tmp74_.height;
#line 1122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		yofs = (gint) (_tmp75_ * EDITING_TOOLS_CROP_TOOL_CROP_INIT_Y_PCT);
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp76_ = xofs;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp77_ = yofs;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp78_ = uncropped_dim;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp79_ = _tmp78_.width;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp80_ = xofs;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp81_ = uncropped_dim;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp82_ = _tmp81_.height;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp83_ = yofs;
#line 1126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_init (&crop, _tmp76_, _tmp77_, _tmp79_ - _tmp80_, _tmp82_ - _tmp83_);
#line 8366 "EditingTools.c"
	}
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp84_ = uncropped_dim;
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp85_ = canvas;
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp85_, &_tmp86_);
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dimensions_for_rectangle (&_tmp86_, &_tmp87_);
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_scaled_similar (&crop, &_tmp84_, &_tmp87_, &_tmp88_);
#line 1131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_crop = _tmp88_;
#line 1136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp89_ = config_facade_get_instance ();
#line 1136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp90_ = _tmp89_;
#line 1136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp91_ = configuration_facade_get_last_crop_width (G_TYPE_CHECK_INSTANCE_CAST (_tmp90_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade));
#line 1136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_width = _tmp91_;
#line 1136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp90_);
#line 1137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp92_ = config_facade_get_instance ();
#line 1137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp93_ = _tmp92_;
#line 1137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp94_ = configuration_facade_get_last_crop_height (G_TYPE_CHECK_INSTANCE_CAST (_tmp93_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade));
#line 1137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_height = _tmp94_;
#line 1137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp93_);
#line 1138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp95_ = self->priv->custom_width;
#line 1138 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_init_width = _tmp95_;
#line 1139 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp96_ = self->priv->custom_height;
#line 1139 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_init_height = _tmp96_;
#line 1140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp97_ = self->priv->custom_init_width;
#line 1140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp98_ = self->priv->custom_init_height;
#line 1140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->pre_aspect_ratio = ((gfloat) _tmp97_) / ((gfloat) _tmp98_);
#line 1142 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraint_mode = EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL;
#line 1144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp99_ = canvas;
#line 1144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_crop_tool_parent_class)->activate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp99_);
#line 1146 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp100_ = self->priv->crop_tool_window;
#line 1146 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_show_all (G_TYPE_CHECK_INSTANCE_CAST (_tmp100_, gtk_widget_get_type (), GtkWidget));
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp101_ = canvas;
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp102_ = editing_tools_photo_canvas_get_photo (_tmp101_);
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp103_ = _tmp102_;
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp104_ = photo_has_crop (_tmp103_);
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp105_ = !_tmp104_;
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp103_);
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp105_) {
#line 8438 "EditingTools.c"
		EditingToolsCropToolConstraintDescription* desc = NULL;
		EditingToolsCropToolConstraintDescription* _tmp106_;
		gboolean _tmp107_ = FALSE;
		gboolean _tmp108_ = FALSE;
		EditingToolsCropToolConstraintDescription* _tmp109_;
#line 1150 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp106_ = editing_tools_crop_tool_get_last_constraint (self, NULL);
#line 1150 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		desc = _tmp106_;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp109_ = desc;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp109_ != NULL) {
#line 8452 "EditingTools.c"
			EditingToolsCropToolConstraintDescription* _tmp110_;
			gboolean _tmp111_;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp110_ = desc;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp111_ = editing_tools_crop_tool_constraint_description_is_separator (_tmp110_);
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp108_ = !_tmp111_;
#line 8461 "EditingTools.c"
		} else {
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp108_ = FALSE;
#line 8465 "EditingTools.c"
		}
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp108_) {
#line 8469 "EditingTools.c"
			EditingToolsCropToolConstraintDescription* _tmp112_;
			gfloat _tmp113_;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp112_ = desc;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp113_ = _tmp112_->aspect_ratio;
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp107_ = _tmp113_ == EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO;
#line 8478 "EditingTools.c"
		} else {
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp107_ = FALSE;
#line 8482 "EditingTools.c"
		}
#line 1151 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp107_) {
#line 1152 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			editing_tools_crop_tool_set_custom_constraint_mode (self);
#line 8488 "EditingTools.c"
		}
#line 1149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_editing_tools_crop_tool_constraint_description_unref0 (desc);
#line 8492 "EditingTools.c"
	}
#line 1159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp114_ = self->priv->scaled_crop;
#line 1159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_constrain_crop (self, &_tmp114_, &_tmp115_);
#line 1159 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_crop = _tmp115_;
#line 1161 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp116_ = new_crop;
#line 1161 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_crop_resized (self, &_tmp116_);
#line 1162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp117_ = new_crop;
#line 1162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_crop = _tmp117_;
#line 1163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp118_ = canvas;
#line 1163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp119_ = new_crop;
#line 1163 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp118_, &_tmp119_);
#line 1164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp120_ = canvas;
#line 1164 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp120_);
#line 1166 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp121_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1166 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->pre_aspect_ratio = _tmp121_;
#line 1072 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (ctx);
#line 8524 "EditingTools.c"
}


static void _editing_tools_crop_tool_prepare_ctx_editing_tools_photo_canvas_new_surface (EditingToolsPhotoCanvas* _sender, cairo_t* ctx, Dimensions* dim, gpointer self) {
#line 1170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_prepare_ctx ((EditingToolsCropTool*) self, ctx, dim);
#line 8531 "EditingTools.c"
}


static void _editing_tools_crop_tool_on_resized_pixbuf_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self) {
#line 1171 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_resized_pixbuf ((EditingToolsCropTool*) self, old_dim, scaled, scaled_position);
#line 8538 "EditingTools.c"
}


static void editing_tools_crop_tool_bind_canvas_handlers (EditingToolsCropTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
#line 1169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 1170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 1170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp0_, "new-surface", (GCallback) _editing_tools_crop_tool_prepare_ctx_editing_tools_photo_canvas_new_surface, self);
#line 1171 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = canvas;
#line 1171 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp1_, "resized-scaled-pixbuf", (GCallback) _editing_tools_crop_tool_on_resized_pixbuf_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 8557 "EditingTools.c"
}


static void editing_tools_crop_tool_unbind_canvas_handlers (EditingToolsCropTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	guint _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	guint _tmp3_;
#line 1174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 1175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 1175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("new-surface", EDITING_TOOLS_TYPE_PHOTO_CANVAS, &_tmp1_, NULL, FALSE);
#line 1175 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _editing_tools_crop_tool_prepare_ctx_editing_tools_photo_canvas_new_surface, self);
#line 1176 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = canvas;
#line 1176 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("resized-scaled-pixbuf", EDITING_TOOLS_TYPE_PHOTO_CANVAS, &_tmp3_, NULL, FALSE);
#line 1176 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_resized_pixbuf_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 8582 "EditingTools.c"
}


static void _editing_tools_crop_tool_on_crop_ok_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_crop_ok ((EditingToolsCropTool*) self);
#line 8589 "EditingTools.c"
}


static void _editing_tools_editing_tool_notify_cancel_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_editing_tool_notify_cancel ((EditingToolsEditingTool*) self);
#line 8596 "EditingTools.c"
}


static void _editing_tools_crop_tool_constraint_changed_gtk_combo_box_changed (GtkComboBox* _sender, gpointer self) {
#line 1183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_constraint_changed ((EditingToolsCropTool*) self);
#line 8603 "EditingTools.c"
}


static void _editing_tools_crop_tool_on_pivot_button_clicked_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 1184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_pivot_button_clicked ((EditingToolsCropTool*) self);
#line 8610 "EditingTools.c"
}


static gboolean _editing_tools_crop_tool_on_width_entry_focus_out_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self) {
	gboolean result;
	result = editing_tools_crop_tool_on_width_entry_focus_out ((EditingToolsCropTool*) self, event);
#line 1187 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 8619 "EditingTools.c"
}


static gboolean _editing_tools_crop_tool_on_height_entry_focus_out_gtk_widget_focus_out_event (GtkWidget* _sender, GdkEventFocus* event, gpointer self) {
	gboolean result;
	result = editing_tools_crop_tool_on_height_entry_focus_out ((EditingToolsCropTool*) self, event);
#line 1188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 8628 "EditingTools.c"
}


static void _editing_tools_crop_tool_on_width_insert_text_gtk_editable_insert_text (GtkEditable* _sender, const gchar* new_text, gint new_text_length, gint* position, gpointer self) {
#line 1189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_width_insert_text ((EditingToolsCropTool*) self, new_text, new_text_length, position);
#line 8635 "EditingTools.c"
}


static void _editing_tools_crop_tool_on_height_insert_text_gtk_editable_insert_text (GtkEditable* _sender, const gchar* new_text, gint new_text_length, gint* position, gpointer self) {
#line 1190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_on_height_insert_text ((EditingToolsCropTool*) self, new_text, new_text_length, position);
#line 8642 "EditingTools.c"
}


static void editing_tools_crop_tool_bind_window_handlers (EditingToolsCropTool* self) {
	EditingToolsCropToolCropToolWindow* _tmp0_;
	EditingToolsCropToolCropToolWindow* _tmp1_;
	GtkButton* _tmp2_;
	EditingToolsCropToolCropToolWindow* _tmp3_;
	GtkButton* _tmp4_;
	EditingToolsCropToolCropToolWindow* _tmp5_;
	GtkComboBox* _tmp6_;
	EditingToolsCropToolCropToolWindow* _tmp7_;
	GtkButton* _tmp8_;
	EditingToolsCropToolCropToolWindow* _tmp9_;
	GtkEntry* _tmp10_;
	EditingToolsCropToolCropToolWindow* _tmp11_;
	GtkEntry* _tmp12_;
	EditingToolsCropToolCropToolWindow* _tmp13_;
	GtkEntry* _tmp14_;
	EditingToolsCropToolCropToolWindow* _tmp15_;
	GtkEntry* _tmp16_;
#line 1179 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 1180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_widget_get_type (), GtkWidget), "key-press-event", (GCallback) _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 1181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->crop_tool_window;
#line 1181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->ok_button;
#line 1181 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp2_, "clicked", (GCallback) _editing_tools_crop_tool_on_crop_ok_gtk_button_clicked, self);
#line 1182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->crop_tool_window;
#line 1182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->cancel_button;
#line 1182 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp4_, "clicked", (GCallback) _editing_tools_editing_tool_notify_cancel_gtk_button_clicked, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 1183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->crop_tool_window;
#line 1183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_->constraint_combo;
#line 1183 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp6_, "changed", (GCallback) _editing_tools_crop_tool_constraint_changed_gtk_combo_box_changed, self);
#line 1184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->crop_tool_window;
#line 1184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_->pivot_reticle_button;
#line 1184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp8_, "clicked", (GCallback) _editing_tools_crop_tool_on_pivot_button_clicked_gtk_button_clicked, self);
#line 1187 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->crop_tool_window;
#line 1187 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_->custom_width_entry;
#line 1187 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, gtk_widget_get_type (), GtkWidget), "focus-out-event", (GCallback) _editing_tools_crop_tool_on_width_entry_focus_out_gtk_widget_focus_out_event, self);
#line 1188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->crop_tool_window;
#line 1188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_->custom_height_entry;
#line 1188 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, gtk_widget_get_type (), GtkWidget), "focus-out-event", (GCallback) _editing_tools_crop_tool_on_height_entry_focus_out_gtk_widget_focus_out_event, self);
#line 1189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->crop_tool_window;
#line 1189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_->custom_width_entry;
#line 1189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, GTK_TYPE_EDITABLE, GtkEditable), "insert-text", (GCallback) _editing_tools_crop_tool_on_width_insert_text_gtk_editable_insert_text, self);
#line 1190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->crop_tool_window;
#line 1190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_->custom_height_entry;
#line 1190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, GTK_TYPE_EDITABLE, GtkEditable), "insert-text", (GCallback) _editing_tools_crop_tool_on_height_insert_text_gtk_editable_insert_text, self);
#line 8718 "EditingTools.c"
}


static void editing_tools_crop_tool_unbind_window_handlers (EditingToolsCropTool* self) {
	EditingToolsCropToolCropToolWindow* _tmp0_;
	guint _tmp1_;
	EditingToolsCropToolCropToolWindow* _tmp2_;
	GtkButton* _tmp3_;
	guint _tmp4_;
	EditingToolsCropToolCropToolWindow* _tmp5_;
	GtkButton* _tmp6_;
	guint _tmp7_;
	EditingToolsCropToolCropToolWindow* _tmp8_;
	GtkComboBox* _tmp9_;
	guint _tmp10_;
	EditingToolsCropToolCropToolWindow* _tmp11_;
	GtkButton* _tmp12_;
	guint _tmp13_;
	EditingToolsCropToolCropToolWindow* _tmp14_;
	GtkEntry* _tmp15_;
	guint _tmp16_;
	EditingToolsCropToolCropToolWindow* _tmp17_;
	GtkEntry* _tmp18_;
	guint _tmp19_;
	EditingToolsCropToolCropToolWindow* _tmp20_;
	GtkEntry* _tmp21_;
	guint _tmp22_;
#line 1193 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 1194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("key-press-event", gtk_widget_get_type (), &_tmp1_, NULL, FALSE);
#line 1194 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _editing_tools_editing_tool_on_keypress_gtk_widget_key_press_event, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 1195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->crop_tool_window;
#line 1195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->ok_button;
#line 1195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp4_, NULL, FALSE);
#line 1195 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp3_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp4_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_crop_ok_gtk_button_clicked, self);
#line 1196 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->crop_tool_window;
#line 1196 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_->cancel_button;
#line 1196 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp7_, NULL, FALSE);
#line 1196 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp6_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp7_, 0, NULL, (GCallback) _editing_tools_editing_tool_notify_cancel_gtk_button_clicked, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 1197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->crop_tool_window;
#line 1197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_->constraint_combo;
#line 1197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("changed", gtk_combo_box_get_type (), &_tmp10_, NULL, FALSE);
#line 1197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp9_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp10_, 0, NULL, (GCallback) _editing_tools_crop_tool_constraint_changed_gtk_combo_box_changed, self);
#line 1198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->crop_tool_window;
#line 1198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_->pivot_reticle_button;
#line 1198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp13_, NULL, FALSE);
#line 1198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp12_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp13_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_pivot_button_clicked_gtk_button_clicked, self);
#line 1201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->crop_tool_window;
#line 1201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_->custom_width_entry;
#line 1201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("focus-out-event", gtk_widget_get_type (), &_tmp16_, NULL, FALSE);
#line 1201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp15_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp16_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_width_entry_focus_out_gtk_widget_focus_out_event, self);
#line 1202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->crop_tool_window;
#line 1202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_->custom_height_entry;
#line 1202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("focus-out-event", gtk_widget_get_type (), &_tmp19_, NULL, FALSE);
#line 1202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp19_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_height_entry_focus_out_gtk_widget_focus_out_event, self);
#line 1203 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->priv->crop_tool_window;
#line 1203 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_->custom_width_entry;
#line 1203 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("insert-text", GTK_TYPE_EDITABLE, &_tmp22_, NULL, FALSE);
#line 1203 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp21_, GTK_TYPE_EDITABLE, GtkEditable), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp22_, 0, NULL, (GCallback) _editing_tools_crop_tool_on_width_insert_text_gtk_editable_insert_text, self);
#line 8810 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event) {
	EditingToolsCropTool * self;
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GdkEventKey* _tmp2_;
	guint _tmp3_;
	const gchar* _tmp4_;
	GdkEventKey* _tmp11_;
	gboolean _tmp12_;
#line 1206 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1206 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = event;
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->keyval;
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gdk_keyval_name (_tmp3_);
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_strcmp0 (_tmp4_, "KP_Enter") == 0) {
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = TRUE;
#line 8838 "EditingTools.c"
	} else {
		GdkEventKey* _tmp5_;
		guint _tmp6_;
		const gchar* _tmp7_;
#line 1208 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = event;
#line 1208 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_->keyval;
#line 1208 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = gdk_keyval_name (_tmp6_);
#line 1208 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = g_strcmp0 (_tmp7_, "Enter") == 0;
#line 8851 "EditingTools.c"
	}
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = TRUE;
#line 8857 "EditingTools.c"
	} else {
		GdkEventKey* _tmp8_;
		guint _tmp9_;
		const gchar* _tmp10_;
#line 1209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = event;
#line 1209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_->keyval;
#line 1209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = gdk_keyval_name (_tmp9_);
#line 1209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = g_strcmp0 (_tmp10_, "Return") == 0;
#line 8870 "EditingTools.c"
	}
#line 1207 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 1210 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_on_crop_ok (self);
#line 1211 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 1211 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 8880 "EditingTools.c"
	}
#line 1214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = event;
#line 1214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_crop_tool_parent_class)->on_keypress (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp11_);
#line 1214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp12_;
#line 1214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 8890 "EditingTools.c"
}


static void editing_tools_crop_tool_on_pivot_button_clicked (EditingToolsCropTool* self) {
	EditingToolsCropToolConstraintDescription* _tmp0_;
	EditingToolsCropToolConstraintDescription* _tmp1_;
	gfloat _tmp2_;
	gboolean _tmp3_;
	EditingToolsCropToolReticleOrientation _tmp21_;
	EditingToolsCropToolReticleOrientation _tmp22_;
#line 1217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_crop_tool_get_selected_constraint (self);
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_->aspect_ratio;
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_ == EDITING_TOOLS_CROP_TOOL_CUSTOM_ASPECT_RATIO;
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_editing_tools_crop_tool_constraint_description_unref0 (_tmp1_);
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp3_) {
#line 8915 "EditingTools.c"
		gchar* width_text = NULL;
		EditingToolsCropToolCropToolWindow* _tmp4_;
		GtkEntry* _tmp5_;
		const gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* height_text = NULL;
		EditingToolsCropToolCropToolWindow* _tmp8_;
		GtkEntry* _tmp9_;
		const gchar* _tmp10_;
		gchar* _tmp11_;
		EditingToolsCropToolCropToolWindow* _tmp12_;
		GtkEntry* _tmp13_;
		const gchar* _tmp14_;
		EditingToolsCropToolCropToolWindow* _tmp15_;
		GtkEntry* _tmp16_;
		const gchar* _tmp17_;
		gint temp = 0;
		gint _tmp18_;
		gint _tmp19_;
		gint _tmp20_;
#line 1219 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->crop_tool_window;
#line 1219 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = _tmp4_->custom_width_entry;
#line 1219 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = gtk_entry_get_text (_tmp5_);
#line 1219 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = g_strdup (_tmp6_);
#line 1219 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		width_text = _tmp7_;
#line 1220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = self->priv->crop_tool_window;
#line 1220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_->custom_height_entry;
#line 1220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = gtk_entry_get_text (_tmp9_);
#line 1220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = g_strdup (_tmp10_);
#line 1220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		height_text = _tmp11_;
#line 1221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = self->priv->crop_tool_window;
#line 1221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = _tmp12_->custom_width_entry;
#line 1221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = height_text;
#line 1221 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp13_, _tmp14_);
#line 1222 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = self->priv->crop_tool_window;
#line 1222 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _tmp15_->custom_height_entry;
#line 1222 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = width_text;
#line 1222 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_entry_set_text (_tmp16_, _tmp17_);
#line 1224 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp18_ = self->priv->custom_width;
#line 1224 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		temp = _tmp18_;
#line 1225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = self->priv->custom_height;
#line 1225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->custom_width = _tmp19_;
#line 1226 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp20_ = temp;
#line 1226 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->custom_height = _tmp20_;
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (height_text);
#line 1218 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (width_text);
#line 8988 "EditingTools.c"
	}
#line 1228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->reticle_orientation;
#line 1228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = editing_tools_crop_tool_reticle_orientation_toggle (_tmp21_);
#line 1228 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->reticle_orientation = _tmp22_;
#line 1229 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_constraint_changed (self);
#line 8998 "EditingTools.c"
}


static void editing_tools_crop_tool_real_deactivate (EditingToolsEditingTool* base) {
	EditingToolsCropTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsCropToolCropToolWindow* _tmp2_;
	EditingToolsPhotoCanvas* _tmp5_;
#line 1232 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != NULL) {
#line 9013 "EditingTools.c"
		EditingToolsPhotoCanvas* _tmp1_;
#line 1234 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1234 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_unbind_canvas_handlers (self, _tmp1_);
#line 9019 "EditingTools.c"
	}
#line 1236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->crop_tool_window;
#line 1236 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ != NULL) {
#line 9025 "EditingTools.c"
		EditingToolsCropToolCropToolWindow* _tmp3_;
		EditingToolsCropToolCropToolWindow* _tmp4_;
#line 1237 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_unbind_window_handlers (self);
#line 1238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = self->priv->crop_tool_window;
#line 1238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_hide (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_widget_get_type (), GtkWidget));
#line 1239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->crop_tool_window;
#line 1239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_destroy (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, gtk_widget_get_type (), GtkWidget));
#line 1240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->crop_tool_window);
#line 1240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->crop_tool_window = NULL;
#line 9042 "EditingTools.c"
	}
#line 1244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ != NULL) {
#line 9048 "EditingTools.c"
		GdkWindow* drawing_window = NULL;
		EditingToolsPhotoCanvas* _tmp6_;
		GdkWindow* _tmp7_;
		GdkDisplay* display = NULL;
		GdkWindow* _tmp8_;
		GdkDisplay* _tmp9_;
		GdkDisplay* _tmp10_;
		GdkCursor* cursor = NULL;
		GdkDisplay* _tmp11_;
		GdkCursor* _tmp12_;
		GdkWindow* _tmp13_;
		GdkCursor* _tmp14_;
#line 1245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = editing_tools_photo_canvas_get_drawing_window (_tmp6_);
#line 1245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		drawing_window = _tmp7_;
#line 1246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = drawing_window;
#line 1246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = gdk_window_get_display (_tmp8_);
#line 1246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = _g_object_ref0 (_tmp9_);
#line 1246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		display = _tmp10_;
#line 1247 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = display;
#line 1247 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = gdk_cursor_new_for_display (_tmp11_, GDK_LEFT_PTR);
#line 1247 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cursor = _tmp12_;
#line 1249 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = drawing_window;
#line 1249 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = cursor;
#line 1249 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gdk_window_set_cursor (_tmp13_, _tmp14_);
#line 1244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (cursor);
#line 1244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (display);
#line 1244 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (drawing_window);
#line 9093 "EditingTools.c"
	}
#line 1252 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->crop_surface);
#line 1252 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_surface = NULL;
#line 1254 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_crop_tool_parent_class)->deactivate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 9101 "EditingTools.c"
}


static EditingToolsEditingToolWindow* editing_tools_crop_tool_real_get_tool_window (EditingToolsEditingTool* base) {
	EditingToolsCropTool * self;
	EditingToolsEditingToolWindow* result = NULL;
	EditingToolsCropToolCropToolWindow* _tmp0_;
	EditingToolsEditingToolWindow* _tmp1_;
#line 1257 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_tool_window;
#line 1258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow));
#line 1258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 1258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 9120 "EditingTools.c"
}


static GdkPixbuf* editing_tools_crop_tool_real_get_display_pixbuf (EditingToolsEditingTool* base, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error) {
	EditingToolsCropTool * self;
	Dimensions _vala_max_dim = {0};
	GdkPixbuf* result = NULL;
	Photo* _tmp0_;
	Dimensions _tmp1_ = {0};
	GdkPixbuf* _tmp2_ = NULL;
	Photo* _tmp3_;
	Scaling _tmp4_;
	GdkPixbuf* _tmp5_;
	GdkPixbuf* _tmp6_;
	GError * _inner_error_ = NULL;
#line 1261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, NULL);
#line 1261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), NULL);
#line 1263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = photo;
#line 1263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp1_);
#line 1263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_max_dim = _tmp1_;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = photo;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *scaling;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = photo_get_pixbuf_with_options (_tmp3_, &_tmp4_, PHOTO_EXCEPTION_CROP, BACKING_FETCH_MODE_BASELINE, &_inner_error_);
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp5_;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_propagate_error (error, _inner_error_);
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return NULL;
#line 9162 "EditingTools.c"
	}
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp2_;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = NULL;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp6_;
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (max_dim) {
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*max_dim = _vala_max_dim;
#line 9176 "EditingTools.c"
	}
#line 1265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 9180 "EditingTools.c"
}


static void editing_tools_crop_tool_prepare_ctx (EditingToolsCropTool* self, cairo_t* ctx, Dimensions* dim) {
	cairo_t* _tmp0_;
	cairo_surface_t* _tmp1_;
	cairo_t* _tmp2_;
	cairo_t* _tmp3_;
	cairo_t* _tmp4_;
	cairo_t* _tmp5_;
	cairo_surface_t* _tmp6_;
	cairo_t* _tmp7_;
	cairo_t* _tmp8_;
	cairo_t* _tmp9_;
	cairo_t* _tmp10_;
	cairo_surface_t* _tmp11_;
	cairo_t* _tmp12_;
	cairo_t* _tmp13_;
	cairo_t* _tmp14_;
	cairo_t* _tmp15_;
	cairo_surface_t* _tmp16_;
	cairo_t* _tmp17_;
	cairo_t* _tmp18_;
#line 1268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 1268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (dim != NULL);
#line 1269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = ctx;
#line 1269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = cairo_get_target (_tmp0_);
#line 1269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = cairo_create (_tmp1_);
#line 1269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wide_black_ctx);
#line 1269 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wide_black_ctx = _tmp2_;
#line 1270 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->wide_black_ctx;
#line 1270 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp3_, "#000");
#line 1271 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->wide_black_ctx;
#line 1271 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_line_width (_tmp4_, (gdouble) 1);
#line 1273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = ctx;
#line 1273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = cairo_get_target (_tmp5_);
#line 1273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = cairo_create (_tmp6_);
#line 1273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wide_white_ctx);
#line 1273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wide_white_ctx = _tmp7_;
#line 1274 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->wide_white_ctx;
#line 1274 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp8_, "#FFF");
#line 1275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->wide_white_ctx;
#line 1275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_line_width (_tmp9_, (gdouble) 1);
#line 1277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = ctx;
#line 1277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = cairo_get_target (_tmp10_);
#line 1277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = cairo_create (_tmp11_);
#line 1277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->thin_white_ctx);
#line 1277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->thin_white_ctx = _tmp12_;
#line 1278 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->thin_white_ctx;
#line 1278 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp13_, "#FFF");
#line 1279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->thin_white_ctx;
#line 1279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_line_width (_tmp14_, 0.5);
#line 1281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = ctx;
#line 1281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = cairo_get_target (_tmp15_);
#line 1281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = cairo_create (_tmp16_);
#line 1281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->text_ctx);
#line 1281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->text_ctx = _tmp17_;
#line 1282 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->text_ctx;
#line 1282 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_select_font_face (_tmp18_, "Sans", CAIRO_FONT_SLANT_NORMAL, CAIRO_FONT_WEIGHT_NORMAL);
#line 9278 "EditingTools.c"
}


static void editing_tools_crop_tool_on_resized_pixbuf (EditingToolsCropTool* self, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position) {
	Dimensions new_dim = {0};
	GdkPixbuf* _tmp0_;
	Dimensions _tmp1_ = {0};
	Dimensions uncropped_dim = {0};
	EditingToolsPhotoCanvas* _tmp2_;
	Photo* _tmp3_;
	Photo* _tmp4_;
	Dimensions _tmp5_ = {0};
	Dimensions _tmp6_;
	Box crop = {0};
	Dimensions _tmp7_;
	Dimensions _tmp8_;
	Box _tmp9_ = {0};
	Dimensions _tmp10_;
	Dimensions _tmp11_;
	Box _tmp12_ = {0};
	cairo_surface_t* _tmp13_;
	GdkPixbuf* _tmp14_;
	gint _tmp15_;
	gint _tmp16_;
	GdkPixbuf* _tmp17_;
	gint _tmp18_;
	gint _tmp19_;
	cairo_surface_t* _tmp20_;
	cairo_t* ctx = NULL;
	cairo_surface_t* _tmp21_;
	cairo_t* _tmp22_;
#line 1285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (old_dim != NULL);
#line 1285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GDK_IS_PIXBUF (scaled));
#line 1285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (scaled_position != NULL);
#line 1286 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = scaled;
#line 1286 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dimensions_for_pixbuf (_tmp0_, &_tmp1_);
#line 1286 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_dim = _tmp1_;
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_photo_canvas_get_photo (_tmp2_);
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp5_);
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_;
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp4_);
#line 1287 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	uncropped_dim = _tmp6_;
#line 1290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = *old_dim;
#line 1290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = uncropped_dim;
#line 1290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_scaled_similar (&self->priv->scaled_crop, &_tmp7_, &_tmp8_, &_tmp9_);
#line 1290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	crop = _tmp9_;
#line 1293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = uncropped_dim;
#line 1293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = new_dim;
#line 1293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_scaled_similar (&crop, &_tmp10_, &_tmp11_, &_tmp12_);
#line 1293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_crop = _tmp12_;
#line 1294 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->crop_surface;
#line 1294 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp13_ != NULL) {
#line 1295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_cairo_surface_destroy0 (self->priv->crop_surface);
#line 1295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->crop_surface = NULL;
#line 9362 "EditingTools.c"
	}
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = scaled;
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = gdk_pixbuf_get_width (_tmp14_);
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_;
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = scaled;
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = gdk_pixbuf_get_height (_tmp17_);
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_;
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, _tmp16_, _tmp19_);
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->crop_surface);
#line 1297 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_surface = _tmp20_;
#line 1298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->crop_surface;
#line 1298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = cairo_create (_tmp21_);
#line 1298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	ctx = _tmp22_;
#line 1299 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (ctx, 0.0, 0.0, 0.0, 1.0);
#line 1300 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (ctx);
#line 1285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (ctx);
#line 9394 "EditingTools.c"
}


static void editing_tools_crop_tool_real_on_left_click (EditingToolsEditingTool* base, gint x, gint y) {
	EditingToolsCropTool * self;
	GdkRectangle scaled_pixbuf_pos = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	GdkRectangle _tmp1_ = {0};
	Box offset_scaled_crop = {0};
	GdkRectangle _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	Box _tmp6_ = {0};
	gint _tmp7_;
	gint _tmp8_;
	BoxLocation _tmp9_;
	gint _tmp10_;
	GdkRectangle _tmp11_;
	gint _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	GdkRectangle _tmp15_;
	gint _tmp16_;
	gint _tmp17_;
	EditingToolsPhotoCanvas* _tmp18_;
#line 1304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp0_, &_tmp1_);
#line 1305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaled_pixbuf_pos = _tmp1_;
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = scaled_pixbuf_pos;
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = scaled_pixbuf_pos;
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.y;
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_offset (&self->priv->scaled_crop, _tmp3_, _tmp5_, &_tmp6_);
#line 1308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	offset_scaled_crop = _tmp6_;
#line 1311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = x;
#line 1311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = y;
#line 1311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = box_approx_location (&offset_scaled_crop, _tmp7_, _tmp8_);
#line 1311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->in_manipulation = _tmp9_;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = x;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = scaled_pixbuf_pos;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.x;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	x = _tmp10_ - _tmp12_;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = x;
#line 1312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_x = _tmp13_;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = y;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = scaled_pixbuf_pos;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.y;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	y = _tmp14_ - _tmp16_;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = y;
#line 1313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_y = _tmp17_;
#line 1316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp18_);
#line 9477 "EditingTools.c"
}


static void editing_tools_crop_tool_real_on_left_released (EditingToolsEditingTool* base, gint x, gint y) {
	EditingToolsCropTool * self;
	BoxLocation _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	EditingToolsPhotoCanvas* _tmp3_;
#line 1319 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1321 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->in_manipulation;
#line 1321 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == BOX_LOCATION_OUTSIDE) {
#line 1322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 9495 "EditingTools.c"
	}
#line 1325 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->in_manipulation = BOX_LOCATION_OUTSIDE;
#line 1326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_x = -1;
#line 1327 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_y = -1;
#line 1329 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = x;
#line 1329 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = y;
#line 1329 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_update_cursor (self, _tmp1_, _tmp2_);
#line 1332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp3_);
#line 9513 "EditingTools.c"
}


static void editing_tools_crop_tool_real_on_motion (EditingToolsEditingTool* base, gint x, gint y, GdkModifierType mask) {
	EditingToolsCropTool * self;
	BoxLocation _tmp0_;
	gint _tmp3_;
	gint _tmp4_;
	EditingToolsPhotoCanvas* _tmp5_;
#line 1335 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1338 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->in_manipulation;
#line 1338 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != BOX_LOCATION_OUTSIDE) {
#line 9529 "EditingTools.c"
		gint _tmp1_;
		gint _tmp2_;
#line 1339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = x;
#line 1339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = y;
#line 1339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_on_canvas_manipulation (self, _tmp1_, _tmp2_);
#line 9538 "EditingTools.c"
	}
#line 1341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = x;
#line 1341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = y;
#line 1341 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_update_cursor (self, _tmp3_, _tmp4_);
#line 1342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp5_);
#line 9550 "EditingTools.c"
}


static void editing_tools_crop_tool_real_paint (EditingToolsEditingTool* base, cairo_t* default_ctx) {
	EditingToolsCropTool * self;
	gint w = 0;
	EditingToolsPhotoCanvas* _tmp0_;
	GdkWindow* _tmp1_;
	GdkWindow* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	gint h = 0;
	EditingToolsPhotoCanvas* _tmp5_;
	GdkWindow* _tmp6_;
	GdkWindow* _tmp7_;
	gint _tmp8_;
	gint _tmp9_;
	cairo_t* _tmp10_;
	cairo_t* _tmp11_;
	cairo_t* _tmp12_;
	cairo_t* _tmp13_;
	cairo_t* ctx = NULL;
	cairo_surface_t* _tmp14_;
	cairo_t* _tmp15_;
	Box _tmp16_;
	gint _tmp17_;
	Box _tmp18_;
	gint _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	EditingToolsPhotoCanvas* _tmp22_;
	cairo_surface_t* _tmp23_;
	Box _tmp24_;
#line 1345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 1345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (default_ctx != NULL);
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_photo_canvas_get_drawing_window (_tmp0_);
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_;
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = gdk_window_get_width (_tmp2_);
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 1347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	w = _tmp4_;
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = editing_tools_photo_canvas_get_drawing_window (_tmp5_);
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_;
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = gdk_window_get_height (_tmp7_);
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_;
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp7_);
#line 1348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	h = _tmp9_;
#line 1350 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = default_ctx;
#line 1350 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (_tmp10_, 0.0, 0.0, 0.0, 1.0);
#line 1351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = default_ctx;
#line 1351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (_tmp11_, (gdouble) 0, (gdouble) 0, (gdouble) w, (gdouble) h);
#line 1352 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = default_ctx;
#line 1352 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (_tmp12_);
#line 1353 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = default_ctx;
#line 1353 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (_tmp13_);
#line 1355 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->crop_surface;
#line 1355 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = cairo_create (_tmp14_);
#line 1355 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	ctx = _tmp15_;
#line 1356 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_operator (ctx, CAIRO_OPERATOR_SOURCE);
#line 1357 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (ctx, 0.0, 0.0, 0.0, 0.5);
#line 1358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_paint (ctx);
#line 1361 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (ctx, 0.0, 0.0, 0.0, 0.0);
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->scaled_crop;
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_.left;
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->scaled_crop;
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.top;
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = box_get_width (&self->priv->scaled_crop);
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = box_get_height (&self->priv->scaled_crop);
#line 1362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (ctx, (gdouble) _tmp17_, (gdouble) _tmp19_, (gdouble) _tmp20_, (gdouble) _tmp21_);
#line 1364 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (ctx);
#line 1365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->crop_surface;
#line 1365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_paint_surface (_tmp22_, _tmp23_, TRUE);
#line 1368 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->scaled_crop;
#line 1368 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_paint_crop_tool (self, &_tmp24_);
#line 1345 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (ctx);
#line 9674 "EditingTools.c"
}


static void editing_tools_crop_tool_on_crop_ok (EditingToolsCropTool* self) {
	ConfigFacade* _tmp0_;
	ConfigFacade* _tmp1_;
	EditingToolsCropToolCropToolWindow* _tmp2_;
	GtkComboBox* _tmp3_;
	gint _tmp4_;
	ConfigFacade* _tmp5_;
	ConfigFacade* _tmp6_;
	gint _tmp7_;
	ConfigFacade* _tmp8_;
	ConfigFacade* _tmp9_;
	gint _tmp10_;
	Box crop = {0};
	EditingToolsPhotoCanvas* _tmp11_;
	GdkRectangle _tmp12_ = {0};
	Dimensions _tmp13_ = {0};
	EditingToolsPhotoCanvas* _tmp14_;
	Photo* _tmp15_;
	Photo* _tmp16_;
	Dimensions _tmp17_ = {0};
	Box _tmp18_ = {0};
	Box _tmp19_;
	GdkPixbuf* cropped = NULL;
	EditingToolsPhotoCanvas* _tmp20_;
	GdkPixbuf* _tmp21_;
	GdkPixbuf* _tmp22_;
	Box _tmp23_;
	gint _tmp24_;
	Box _tmp25_;
	gint _tmp26_;
	gint _tmp27_;
	gint _tmp28_;
	GdkPixbuf* _tmp29_;
	GdkPixbuf* _tmp30_;
	EditingToolsPhotoCanvas* _tmp31_;
	Photo* _tmp32_;
	Photo* _tmp33_;
	Box _tmp34_;
	CropCommand* _tmp35_;
	CropCommand* _tmp36_;
	Dimensions _tmp37_ = {0};
#line 1371 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = config_facade_get_instance ();
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->crop_tool_window;
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->constraint_combo;
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gtk_combo_box_get_active (_tmp3_);
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	configuration_facade_set_last_crop_menu_choice (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade), _tmp4_);
#line 1375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp1_);
#line 1377 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = config_facade_get_instance ();
#line 1377 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_;
#line 1377 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->custom_width;
#line 1377 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	configuration_facade_set_last_crop_width (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade), _tmp7_);
#line 1377 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp6_);
#line 1378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = config_facade_get_instance ();
#line 1378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_;
#line 1378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->custom_height;
#line 1378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	configuration_facade_set_last_crop_height (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, TYPE_CONFIGURATION_FACADE, ConfigurationFacade), _tmp10_);
#line 1378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp9_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp11_, &_tmp12_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dimensions_for_rectangle (&_tmp12_, &_tmp13_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = editing_tools_photo_canvas_get_photo (_tmp14_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_;
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp17_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_scaled_similar (&self->priv->scaled_crop, &_tmp13_, &_tmp17_, &_tmp18_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_;
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp16_);
#line 1381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	crop = _tmp19_;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp20_);
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->scaled_crop;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = _tmp23_.left;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->priv->scaled_crop;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_.top;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = box_get_width (&self->priv->scaled_crop);
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = box_get_height (&self->priv->scaled_crop);
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = gdk_pixbuf_new_subpixbuf (_tmp22_, _tmp24_, _tmp26_, _tmp27_, _tmp28_);
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = _tmp29_;
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp22_);
#line 1386 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cropped = _tmp30_;
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = editing_tools_photo_canvas_get_photo (_tmp31_);
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = _tmp32_;
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = crop;
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = crop_command_new (_tmp33_, &_tmp34_, RESOURCES_CROP_LABEL, RESOURCES_CROP_TOOLTIP);
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = _tmp35_;
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_dimensions (&crop, &_tmp37_);
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_APPLIED_SIGNAL], 0, G_TYPE_CHECK_INSTANCE_CAST (_tmp36_, TYPE_COMMAND, Command), cropped, &_tmp37_, TRUE);
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp36_);
#line 1391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp33_);
#line 1371 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (cropped);
#line 9825 "EditingTools.c"
}


static void editing_tools_crop_tool_update_cursor (EditingToolsCropTool* self, gint x, gint y) {
	GdkRectangle scaled_pos = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	GdkRectangle _tmp1_ = {0};
	Box offset_scaled_crop = {0};
	GdkRectangle _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gint _tmp5_;
	Box _tmp6_ = {0};
	GdkCursorType cursor_type = 0;
	gint _tmp7_;
	gint _tmp8_;
	BoxLocation _tmp9_;
	GdkCursorType _tmp10_;
	GdkCursorType _tmp11_;
#line 1395 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp0_, &_tmp1_);
#line 1397 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaled_pos = _tmp1_;
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = scaled_pos;
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.x;
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = scaled_pos;
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.y;
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_offset (&self->priv->scaled_crop, _tmp3_, _tmp5_, &_tmp6_);
#line 1398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	offset_scaled_crop = _tmp6_;
#line 1400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cursor_type = GDK_LEFT_PTR;
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = x;
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = y;
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = box_approx_location (&offset_scaled_crop, _tmp7_, _tmp8_);
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	switch (_tmp9_) {
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_LEFT_SIDE:
#line 9877 "EditingTools.c"
		{
#line 1403 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_LEFT_SIDE;
#line 1404 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9883 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_SIDE:
#line 9887 "EditingTools.c"
		{
#line 1407 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_TOP_SIDE;
#line 1408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9893 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_RIGHT_SIDE:
#line 9897 "EditingTools.c"
		{
#line 1411 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_RIGHT_SIDE;
#line 1412 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9903 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_SIDE:
#line 9907 "EditingTools.c"
		{
#line 1415 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_BOTTOM_SIDE;
#line 1416 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9913 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_LEFT:
#line 9917 "EditingTools.c"
		{
#line 1419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_TOP_LEFT_CORNER;
#line 1420 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9923 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_LEFT:
#line 9927 "EditingTools.c"
		{
#line 1423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_BOTTOM_LEFT_CORNER;
#line 1424 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9933 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_RIGHT:
#line 9937 "EditingTools.c"
		{
#line 1427 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_TOP_RIGHT_CORNER;
#line 1428 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9943 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_RIGHT:
#line 9947 "EditingTools.c"
		{
#line 1431 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_BOTTOM_RIGHT_CORNER;
#line 1432 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9953 "EditingTools.c"
		}
#line 1401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_INSIDE:
#line 9957 "EditingTools.c"
		{
#line 1435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			cursor_type = GDK_FLEUR;
#line 1436 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9963 "EditingTools.c"
		}
		default:
		{
#line 1440 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 9969 "EditingTools.c"
		}
	}
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = cursor_type;
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->current_cursor_type;
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp10_ != _tmp11_) {
#line 9978 "EditingTools.c"
		GdkWindow* drawing_window = NULL;
		EditingToolsPhotoCanvas* _tmp12_;
		GdkWindow* _tmp13_;
		GdkDisplay* display = NULL;
		GdkWindow* _tmp14_;
		GdkDisplay* _tmp15_;
		GdkDisplay* _tmp16_;
		GdkCursor* cursor = NULL;
		GdkDisplay* _tmp17_;
		GdkCursorType _tmp18_;
		GdkCursor* _tmp19_;
		GdkWindow* _tmp20_;
		GdkCursor* _tmp21_;
		GdkCursorType _tmp22_;
#line 1444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = editing_tools_photo_canvas_get_drawing_window (_tmp12_);
#line 1444 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		drawing_window = _tmp13_;
#line 1445 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = drawing_window;
#line 1445 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = gdk_window_get_display (_tmp14_);
#line 1445 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _g_object_ref0 (_tmp15_);
#line 1445 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		display = _tmp16_;
#line 1446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = display;
#line 1446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp18_ = cursor_type;
#line 1446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = gdk_cursor_new_for_display (_tmp17_, _tmp18_);
#line 1446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		cursor = _tmp19_;
#line 1447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp20_ = drawing_window;
#line 1447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = cursor;
#line 1447 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gdk_window_set_cursor (_tmp20_, _tmp21_);
#line 1448 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = cursor_type;
#line 1448 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->current_cursor_type = _tmp22_;
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (cursor);
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (display);
#line 1443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (drawing_window);
#line 10031 "EditingTools.c"
	}
}


static gint editing_tools_crop_tool_eval_radial_line (EditingToolsCropTool* self, gdouble center_x, gdouble center_y, gdouble bounds_x, gdouble bounds_y, gdouble user_x) {
	gint result = 0;
	gdouble decision_slope = 0.0;
	gdouble _tmp0_;
	gdouble _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_;
	gdouble decision_intercept = 0.0;
	gdouble _tmp4_;
	gdouble _tmp5_;
	gdouble _tmp6_;
#line 1452 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), 0);
#line 1454 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = bounds_y;
#line 1454 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = center_y;
#line 1454 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = bounds_x;
#line 1454 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = center_x;
#line 1454 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	decision_slope = (_tmp0_ - _tmp1_) / (_tmp2_ - _tmp3_);
#line 1455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = bounds_y;
#line 1455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = bounds_x;
#line 1455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	decision_intercept = _tmp4_ - (decision_slope * _tmp5_);
#line 1457 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = user_x;
#line 1457 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = (gint) ((decision_slope * _tmp6_) + decision_intercept);
#line 1457 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 10071 "EditingTools.c"
}


static void editing_tools_crop_tool_get_photo_dimensions (EditingToolsCropTool* self, Dimensions* result) {
	Dimensions photo_dims = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	Photo* _tmp1_;
	Photo* _tmp2_;
	Dimensions _tmp3_ = {0};
	Dimensions _tmp4_;
	Dimensions surface_dims = {0};
	EditingToolsPhotoCanvas* _tmp5_;
	Dimensions _tmp6_ = {0};
	gdouble scale_factor = 0.0;
	Dimensions _tmp7_;
	gint _tmp8_;
	Dimensions _tmp9_;
	gint _tmp10_;
	Dimensions _tmp11_;
	gint _tmp12_;
	Dimensions _tmp13_;
	gint _tmp14_;
	gdouble _tmp15_;
	gdouble _tmp16_;
	gdouble _tmp17_;
	EditingToolsPhotoCanvas* _tmp18_;
	Photo* _tmp19_;
	Photo* _tmp20_;
	Dimensions _tmp21_ = {0};
	Dimensions _tmp22_;
	gint _tmp23_;
	gdouble _tmp24_;
	Dimensions _tmp25_;
	gint _tmp26_;
	gdouble _tmp27_;
	Dimensions _tmp28_ = {0};
#line 1461 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_photo_canvas_get_photo (_tmp0_);
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_;
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp3_);
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 1462 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_dims = _tmp4_;
#line 1463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_surface_dim (_tmp5_, &_tmp6_);
#line 1463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	surface_dims = _tmp6_;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = surface_dims;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_.width;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = photo_dims;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.width;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = surface_dims;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.height;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = photo_dims;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.height;
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = MIN (((gdouble) _tmp8_) / _tmp10_, ((gdouble) _tmp12_) / _tmp14_);
#line 1464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scale_factor = _tmp15_;
#line 1466 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = scale_factor;
#line 1466 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = MIN (_tmp16_, 1.0);
#line 1466 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scale_factor = _tmp17_;
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = editing_tools_photo_canvas_get_photo (_tmp18_);
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_;
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP | PHOTO_EXCEPTION_STRAIGHTEN, &_tmp21_);
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_dims = _tmp21_;
#line 1468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp20_);
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = photo_dims;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.width;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = scale_factor;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = photo_dims;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_.height;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = scale_factor;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_.width = (gint) (_tmp23_ * _tmp24_);
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_.height = (gint) (_tmp26_ * _tmp27_);
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _tmp28_;
#line 1471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 10188 "EditingTools.c"
}


static gboolean _box_equal (const Box * s1, const Box * s2) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1 == s2) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return TRUE;
#line 10197 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1 == NULL) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10203 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s2 == NULL) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10209 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1->left != s2->left) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10215 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1->top != s2->top) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10221 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1->right != s2->right) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10227 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (s1->bottom != s2->bottom) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return FALSE;
#line 10233 "EditingTools.c"
	}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return TRUE;
#line 10237 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_on_canvas_manipulation (EditingToolsCropTool* self, gint x, gint y) {
	gboolean result = FALSE;
	GdkRectangle scaled_pos = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	GdkRectangle _tmp1_ = {0};
	gint _tmp2_;
	GdkRectangle _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
	gint _tmp14_;
	gint left = 0;
	Box _tmp20_;
	gint _tmp21_;
	gint top = 0;
	Box _tmp22_;
	gint _tmp23_;
	gint right = 0;
	Box _tmp24_;
	gint _tmp25_;
	gint bottom = 0;
	Box _tmp26_;
	gint _tmp27_;
	gint center_x = 0;
	gint _tmp28_;
	gint _tmp29_;
	gint center_y = 0;
	gint _tmp30_;
	gint _tmp31_;
	BoxLocation _tmp32_;
	gint width = 0;
	gint _tmp199_;
	gint _tmp200_;
	gint height = 0;
	gint _tmp201_;
	gint _tmp202_;
	Dimensions photo_dims = {0};
	Dimensions _tmp203_ = {0};
	gdouble angle = 0.0;
	EditingToolsPhotoCanvas* _tmp204_;
	Photo* _tmp205_;
	Photo* _tmp206_;
	gdouble _tmp207_ = 0.0;
	Box new_crop = {0};
	gfloat _tmp208_;
	BoxLocation _tmp254_;
	Box _tmp257_;
	gfloat _tmp258_;
#line 1475 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self), FALSE);
#line 1476 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1476 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp0_, &_tmp1_);
#line 1476 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaled_pos = _tmp1_;
#line 1480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = x;
#line 1480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = scaled_pos;
#line 1480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.x;
#line 1480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	x = _tmp2_ - _tmp4_;
#line 1481 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = x;
#line 1481 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ < 0) {
#line 1482 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x = 0;
#line 10313 "EditingTools.c"
	} else {
		gint _tmp6_;
		GdkRectangle _tmp7_;
		gint _tmp8_;
#line 1483 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = x;
#line 1483 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = scaled_pos;
#line 1483 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp7_.width;
#line 1483 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp6_ >= _tmp8_) {
#line 10326 "EditingTools.c"
			GdkRectangle _tmp9_;
			gint _tmp10_;
#line 1484 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp9_ = scaled_pos;
#line 1484 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp10_ = _tmp9_.width;
#line 1484 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			x = _tmp10_ - 1;
#line 10335 "EditingTools.c"
		}
	}
#line 1486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = y;
#line 1486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = scaled_pos;
#line 1486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.y;
#line 1486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	y = _tmp11_ - _tmp13_;
#line 1487 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = y;
#line 1487 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp14_ < 0) {
#line 1488 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y = 0;
#line 10352 "EditingTools.c"
	} else {
		gint _tmp15_;
		GdkRectangle _tmp16_;
		gint _tmp17_;
#line 1489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = y;
#line 1489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = scaled_pos;
#line 1489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = _tmp16_.height;
#line 1489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp15_ >= _tmp17_) {
#line 10365 "EditingTools.c"
			GdkRectangle _tmp18_;
			gint _tmp19_;
#line 1490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp18_ = scaled_pos;
#line 1490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp19_ = _tmp18_.height;
#line 1490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			y = _tmp19_ - 1;
#line 10374 "EditingTools.c"
		}
	}
#line 1494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->priv->scaled_crop;
#line 1494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_.left;
#line 1494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	left = _tmp21_;
#line 1495 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->priv->scaled_crop;
#line 1495 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.top;
#line 1495 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	top = _tmp23_;
#line 1496 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->scaled_crop;
#line 1496 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_.right;
#line 1496 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	right = _tmp25_;
#line 1497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = self->priv->scaled_crop;
#line 1497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_.bottom;
#line 1497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bottom = _tmp27_;
#line 1500 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = left;
#line 1500 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = right;
#line 1500 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	center_x = (_tmp28_ + _tmp29_) / 2;
#line 1501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = top;
#line 1501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = bottom;
#line 1501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	center_y = (_tmp30_ + _tmp31_) / 2;
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = self->priv->in_manipulation;
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	switch (_tmp32_) {
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_LEFT_SIDE:
#line 10419 "EditingTools.c"
		{
			gint _tmp33_;
			gfloat _tmp34_;
#line 1505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp33_ = x;
#line 1505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			left = _tmp33_;
#line 1506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp34_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp34_ != EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10431 "EditingTools.c"
				gfloat new_height = 0.0F;
				gint _tmp35_;
				gint _tmp36_;
				gfloat _tmp37_;
				gint _tmp38_;
				gfloat _tmp39_;
#line 1507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp35_ = right;
#line 1507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp36_ = left;
#line 1507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp37_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				new_height = ((gfloat) (_tmp35_ - _tmp36_)) / _tmp37_;
#line 1508 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp38_ = top;
#line 1508 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp39_ = new_height;
#line 1508 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				bottom = _tmp38_ + ((gint) _tmp39_);
#line 10452 "EditingTools.c"
			}
#line 1510 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10456 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_SIDE:
#line 10460 "EditingTools.c"
		{
			gint _tmp40_;
			gfloat _tmp41_;
#line 1513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp40_ = y;
#line 1513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			top = _tmp40_;
#line 1514 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp41_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1514 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp41_ != EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10472 "EditingTools.c"
				gfloat new_width = 0.0F;
				gint _tmp42_;
				gint _tmp43_;
				gfloat _tmp44_;
				gint _tmp45_;
				gfloat _tmp46_;
#line 1515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp42_ = bottom;
#line 1515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp43_ = top;
#line 1515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp44_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				new_width = ((gfloat) (_tmp42_ - _tmp43_)) * _tmp44_;
#line 1516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp45_ = left;
#line 1516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp46_ = new_width;
#line 1516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				right = _tmp45_ + ((gint) _tmp46_);
#line 10493 "EditingTools.c"
			}
#line 1518 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10497 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_RIGHT_SIDE:
#line 10501 "EditingTools.c"
		{
			gint _tmp47_;
			gfloat _tmp48_;
#line 1521 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp47_ = x;
#line 1521 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			right = _tmp47_;
#line 1522 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp48_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1522 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp48_ != EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10513 "EditingTools.c"
				gfloat new_height = 0.0F;
				gint _tmp49_;
				gint _tmp50_;
				gfloat _tmp51_;
				gint _tmp52_;
				gfloat _tmp53_;
#line 1523 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp49_ = right;
#line 1523 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp50_ = left;
#line 1523 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp51_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1523 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				new_height = ((gfloat) (_tmp49_ - _tmp50_)) / _tmp51_;
#line 1524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp52_ = top;
#line 1524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp53_ = new_height;
#line 1524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				bottom = _tmp52_ + ((gint) _tmp53_);
#line 10534 "EditingTools.c"
			}
#line 1526 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10538 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_SIDE:
#line 10542 "EditingTools.c"
		{
			gint _tmp54_;
			gfloat _tmp55_;
#line 1529 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp54_ = y;
#line 1529 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			bottom = _tmp54_;
#line 1530 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp55_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1530 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp55_ != EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10554 "EditingTools.c"
				gfloat new_width = 0.0F;
				gint _tmp56_;
				gint _tmp57_;
				gfloat _tmp58_;
				gint _tmp59_;
				gfloat _tmp60_;
#line 1531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp56_ = bottom;
#line 1531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp57_ = top;
#line 1531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp58_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				new_width = ((gfloat) (_tmp56_ - _tmp57_)) * _tmp58_;
#line 1532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp59_ = left;
#line 1532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp60_ = new_width;
#line 1532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				right = _tmp59_ + ((gint) _tmp60_);
#line 10575 "EditingTools.c"
			}
#line 1534 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10579 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_LEFT:
#line 10583 "EditingTools.c"
		{
			gfloat _tmp61_;
#line 1537 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp61_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1537 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp61_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10590 "EditingTools.c"
				gint _tmp62_;
				gint _tmp63_;
#line 1538 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp62_ = y;
#line 1538 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				top = _tmp62_;
#line 1539 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp63_ = x;
#line 1539 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				left = _tmp63_;
#line 10601 "EditingTools.c"
			} else {
				gint _tmp64_;
				gint _tmp65_;
				gint _tmp66_;
				gint _tmp67_;
				gint _tmp68_;
				gint _tmp69_;
				gint _tmp70_;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp64_ = y;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp65_ = center_x;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp66_ = center_y;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp67_ = left;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp68_ = top;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp69_ = x;
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp70_ = editing_tools_crop_tool_eval_radial_line (self, (gdouble) _tmp65_, (gdouble) _tmp66_, (gdouble) _tmp67_, (gdouble) _tmp68_, (gdouble) _tmp69_);
#line 1541 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp64_ < _tmp70_) {
#line 10626 "EditingTools.c"
					gint _tmp71_;
					gfloat new_width = 0.0F;
					gint _tmp72_;
					gint _tmp73_;
					gfloat _tmp74_;
					gint _tmp75_;
					gfloat _tmp76_;
#line 1542 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp71_ = y;
#line 1542 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = _tmp71_;
#line 1543 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp72_ = bottom;
#line 1543 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp73_ = top;
#line 1543 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp74_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1543 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_width = ((gfloat) (_tmp72_ - _tmp73_)) * _tmp74_;
#line 1544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp75_ = right;
#line 1544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp76_ = new_width;
#line 1544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = _tmp75_ - ((gint) _tmp76_);
#line 10652 "EditingTools.c"
				} else {
					gint _tmp77_;
					gfloat new_height = 0.0F;
					gint _tmp78_;
					gint _tmp79_;
					gfloat _tmp80_;
					gint _tmp81_;
					gfloat _tmp82_;
#line 1546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp77_ = x;
#line 1546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = _tmp77_;
#line 1547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp78_ = right;
#line 1547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp79_ = left;
#line 1547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp80_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1547 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_height = ((gfloat) (_tmp78_ - _tmp79_)) / _tmp80_;
#line 1548 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp81_ = bottom;
#line 1548 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp82_ = new_height;
#line 1548 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = _tmp81_ - ((gint) _tmp82_);
#line 10679 "EditingTools.c"
				}
			}
#line 1551 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10684 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_LEFT:
#line 10688 "EditingTools.c"
		{
			gfloat _tmp83_;
#line 1554 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp83_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1554 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp83_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10695 "EditingTools.c"
				gint _tmp84_;
				gint _tmp85_;
#line 1555 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp84_ = y;
#line 1555 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				bottom = _tmp84_;
#line 1556 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp85_ = x;
#line 1556 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				left = _tmp85_;
#line 10706 "EditingTools.c"
			} else {
				gint _tmp86_;
				gint _tmp87_;
				gint _tmp88_;
				gint _tmp89_;
				gint _tmp90_;
				gint _tmp91_;
				gint _tmp92_;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp86_ = y;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp87_ = center_x;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp88_ = center_y;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp89_ = left;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp90_ = bottom;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp91_ = x;
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp92_ = editing_tools_crop_tool_eval_radial_line (self, (gdouble) _tmp87_, (gdouble) _tmp88_, (gdouble) _tmp89_, (gdouble) _tmp90_, (gdouble) _tmp91_);
#line 1558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp86_ < _tmp92_) {
#line 10731 "EditingTools.c"
					gint _tmp93_;
					gfloat new_height = 0.0F;
					gint _tmp94_;
					gint _tmp95_;
					gfloat _tmp96_;
					gint _tmp97_;
					gfloat _tmp98_;
#line 1559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp93_ = x;
#line 1559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = _tmp93_;
#line 1560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp94_ = right;
#line 1560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp95_ = left;
#line 1560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp96_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1560 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_height = ((gfloat) (_tmp94_ - _tmp95_)) / _tmp96_;
#line 1561 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp97_ = top;
#line 1561 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp98_ = new_height;
#line 1561 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = _tmp97_ + ((gint) _tmp98_);
#line 10757 "EditingTools.c"
				} else {
					gint _tmp99_;
					gfloat new_width = 0.0F;
					gint _tmp100_;
					gint _tmp101_;
					gfloat _tmp102_;
					gint _tmp103_;
					gfloat _tmp104_;
#line 1563 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp99_ = y;
#line 1563 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = _tmp99_;
#line 1564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp100_ = bottom;
#line 1564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp101_ = top;
#line 1564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp102_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_width = ((gfloat) (_tmp100_ - _tmp101_)) * _tmp102_;
#line 1565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp103_ = right;
#line 1565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp104_ = new_width;
#line 1565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = _tmp103_ - ((gint) _tmp104_);
#line 10784 "EditingTools.c"
				}
			}
#line 1568 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10789 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_TOP_RIGHT:
#line 10793 "EditingTools.c"
		{
			gfloat _tmp105_;
#line 1571 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp105_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1571 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp105_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10800 "EditingTools.c"
				gint _tmp106_;
				gint _tmp107_;
#line 1572 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp106_ = y;
#line 1572 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				top = _tmp106_;
#line 1573 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp107_ = x;
#line 1573 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				right = _tmp107_;
#line 10811 "EditingTools.c"
			} else {
				gint _tmp108_;
				gint _tmp109_;
				gint _tmp110_;
				gint _tmp111_;
				gint _tmp112_;
				gint _tmp113_;
				gint _tmp114_;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp108_ = y;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp109_ = center_x;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp110_ = center_y;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp111_ = right;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp112_ = top;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp113_ = x;
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp114_ = editing_tools_crop_tool_eval_radial_line (self, (gdouble) _tmp109_, (gdouble) _tmp110_, (gdouble) _tmp111_, (gdouble) _tmp112_, (gdouble) _tmp113_);
#line 1575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp108_ < _tmp114_) {
#line 10836 "EditingTools.c"
					gint _tmp115_;
					gfloat new_width = 0.0F;
					gint _tmp116_;
					gint _tmp117_;
					gfloat _tmp118_;
					gint _tmp119_;
					gfloat _tmp120_;
#line 1576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp115_ = y;
#line 1576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = _tmp115_;
#line 1577 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp116_ = bottom;
#line 1577 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp117_ = top;
#line 1577 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp118_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1577 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_width = ((gfloat) (_tmp116_ - _tmp117_)) * _tmp118_;
#line 1578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp119_ = left;
#line 1578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp120_ = new_width;
#line 1578 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = _tmp119_ + ((gint) _tmp120_);
#line 10862 "EditingTools.c"
				} else {
					gint _tmp121_;
					gfloat new_height = 0.0F;
					gint _tmp122_;
					gint _tmp123_;
					gfloat _tmp124_;
					gint _tmp125_;
					gfloat _tmp126_;
#line 1580 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp121_ = x;
#line 1580 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = _tmp121_;
#line 1581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp122_ = right;
#line 1581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp123_ = left;
#line 1581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp124_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_height = ((gfloat) (_tmp122_ - _tmp123_)) / _tmp124_;
#line 1582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp125_ = bottom;
#line 1582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp126_ = new_height;
#line 1582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = _tmp125_ - ((gint) _tmp126_);
#line 10889 "EditingTools.c"
				}
			}
#line 1585 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10894 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_BOTTOM_RIGHT:
#line 10898 "EditingTools.c"
		{
			gfloat _tmp127_;
#line 1588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp127_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp127_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 10905 "EditingTools.c"
				gint _tmp128_;
				gint _tmp129_;
#line 1589 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp128_ = y;
#line 1589 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				bottom = _tmp128_;
#line 1590 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp129_ = x;
#line 1590 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				right = _tmp129_;
#line 10916 "EditingTools.c"
			} else {
				gint _tmp130_;
				gint _tmp131_;
				gint _tmp132_;
				gint _tmp133_;
				gint _tmp134_;
				gint _tmp135_;
				gint _tmp136_;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp130_ = y;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp131_ = center_x;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp132_ = center_y;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp133_ = right;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp134_ = bottom;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp135_ = x;
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp136_ = editing_tools_crop_tool_eval_radial_line (self, (gdouble) _tmp131_, (gdouble) _tmp132_, (gdouble) _tmp133_, (gdouble) _tmp134_, (gdouble) _tmp135_);
#line 1592 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp130_ < _tmp136_) {
#line 10941 "EditingTools.c"
					gint _tmp137_;
					gfloat new_height = 0.0F;
					gint _tmp138_;
					gint _tmp139_;
					gfloat _tmp140_;
					gint _tmp141_;
					gfloat _tmp142_;
#line 1593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp137_ = x;
#line 1593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = _tmp137_;
#line 1594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp138_ = right;
#line 1594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp139_ = left;
#line 1594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp140_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_height = ((gfloat) (_tmp138_ - _tmp139_)) / _tmp140_;
#line 1595 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp141_ = top;
#line 1595 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp142_ = new_height;
#line 1595 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = _tmp141_ + ((gint) _tmp142_);
#line 10967 "EditingTools.c"
				} else {
					gint _tmp143_;
					gfloat new_width = 0.0F;
					gint _tmp144_;
					gint _tmp145_;
					gfloat _tmp146_;
					gint _tmp147_;
					gfloat _tmp148_;
#line 1597 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp143_ = y;
#line 1597 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = _tmp143_;
#line 1598 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp144_ = bottom;
#line 1598 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp145_ = top;
#line 1598 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp146_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1598 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					new_width = ((gfloat) (_tmp144_ - _tmp145_)) * _tmp146_;
#line 1599 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp147_ = left;
#line 1599 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp148_ = new_width;
#line 1599 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = _tmp147_ + ((gint) _tmp148_);
#line 10994 "EditingTools.c"
				}
			}
#line 1602 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 10999 "EditingTools.c"
		}
#line 1503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case BOX_LOCATION_INSIDE:
#line 11003 "EditingTools.c"
		{
			gint _tmp149_;
			gint _tmp150_;
			gint delta_x = 0;
			gint _tmp151_;
			gint _tmp152_;
			gint delta_y = 0;
			gint _tmp153_;
			gint _tmp154_;
			gint _tmp155_;
			gint _tmp156_;
			gint width = 0;
			gint _tmp157_;
			gint _tmp158_;
			gint height = 0;
			gint _tmp159_;
			gint _tmp160_;
			gint _tmp161_;
			gint _tmp162_;
			gint _tmp163_;
			gint _tmp164_;
			gint _tmp165_;
			gint _tmp166_;
			gint _tmp167_;
			gint _tmp168_;
			gint _tmp169_;
			gint _tmp170_;
			gint _tmp171_;
			GdkRectangle _tmp172_;
			gint _tmp173_;
			gint _tmp176_;
			GdkRectangle _tmp177_;
			gint _tmp178_;
			gint adj_width = 0;
			gint _tmp181_;
			gint _tmp182_;
			gint adj_height = 0;
			gint _tmp183_;
			gint _tmp184_;
			gint _tmp185_;
			gint _tmp186_;
			gint _tmp192_;
			gint _tmp193_;
#line 1605 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp149_ = self->priv->last_grab_x;
#line 1605 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_vala_assert (_tmp149_ >= 0, "last_grab_x >= 0");
#line 1606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp150_ = self->priv->last_grab_y;
#line 1606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_vala_assert (_tmp150_ >= 0, "last_grab_y >= 0");
#line 1608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp151_ = x;
#line 1608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp152_ = self->priv->last_grab_x;
#line 1608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			delta_x = _tmp151_ - _tmp152_;
#line 1609 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp153_ = y;
#line 1609 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp154_ = self->priv->last_grab_y;
#line 1609 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			delta_y = _tmp153_ - _tmp154_;
#line 1611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp155_ = x;
#line 1611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			self->priv->last_grab_x = _tmp155_;
#line 1612 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp156_ = y;
#line 1612 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			self->priv->last_grab_y = _tmp156_;
#line 1614 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp157_ = right;
#line 1614 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp158_ = left;
#line 1614 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			width = (_tmp157_ - _tmp158_) + 1;
#line 1615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp159_ = bottom;
#line 1615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp160_ = top;
#line 1615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			height = (_tmp159_ - _tmp160_) + 1;
#line 1617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp161_ = left;
#line 1617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp162_ = delta_x;
#line 1617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			left = _tmp161_ + _tmp162_;
#line 1618 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp163_ = top;
#line 1618 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp164_ = delta_y;
#line 1618 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			top = _tmp163_ + _tmp164_;
#line 1619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp165_ = right;
#line 1619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp166_ = delta_x;
#line 1619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			right = _tmp165_ + _tmp166_;
#line 1620 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp167_ = bottom;
#line 1620 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp168_ = delta_y;
#line 1620 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			bottom = _tmp167_ + _tmp168_;
#line 1623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp169_ = left;
#line 1623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp169_ < 0) {
#line 1624 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				left = 0;
#line 11117 "EditingTools.c"
			}
#line 1626 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp170_ = top;
#line 1626 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp170_ < 0) {
#line 1627 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				top = 0;
#line 11125 "EditingTools.c"
			}
#line 1629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp171_ = right;
#line 1629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp172_ = scaled_pos;
#line 1629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp173_ = _tmp172_.width;
#line 1629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp171_ >= _tmp173_) {
#line 11135 "EditingTools.c"
				GdkRectangle _tmp174_;
				gint _tmp175_;
#line 1630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp174_ = scaled_pos;
#line 1630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp175_ = _tmp174_.width;
#line 1630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				right = _tmp175_ - 1;
#line 11144 "EditingTools.c"
			}
#line 1632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp176_ = bottom;
#line 1632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp177_ = scaled_pos;
#line 1632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp178_ = _tmp177_.height;
#line 1632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp176_ >= _tmp178_) {
#line 11154 "EditingTools.c"
				GdkRectangle _tmp179_;
				gint _tmp180_;
#line 1633 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp179_ = scaled_pos;
#line 1633 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp180_ = _tmp179_.height;
#line 1633 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				bottom = _tmp180_ - 1;
#line 11163 "EditingTools.c"
			}
#line 1635 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp181_ = right;
#line 1635 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp182_ = left;
#line 1635 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			adj_width = (_tmp181_ - _tmp182_) + 1;
#line 1636 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp183_ = bottom;
#line 1636 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp184_ = top;
#line 1636 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			adj_height = (_tmp183_ - _tmp184_) + 1;
#line 1639 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp185_ = adj_width;
#line 1639 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp186_ = width;
#line 1639 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp185_ != _tmp186_) {
#line 11183 "EditingTools.c"
				gint _tmp187_;
#line 1640 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp187_ = delta_x;
#line 1640 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp187_ < 0) {
#line 11189 "EditingTools.c"
					gint _tmp188_;
					gint _tmp189_;
#line 1641 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp188_ = left;
#line 1641 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp189_ = width;
#line 1641 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = (_tmp188_ + _tmp189_) - 1;
#line 11198 "EditingTools.c"
				} else {
					gint _tmp190_;
					gint _tmp191_;
#line 1643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp190_ = right;
#line 1643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp191_ = width;
#line 1643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = (_tmp190_ - _tmp191_) + 1;
#line 11208 "EditingTools.c"
				}
			}
#line 1646 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp192_ = adj_height;
#line 1646 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp193_ = height;
#line 1646 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (_tmp192_ != _tmp193_) {
#line 11217 "EditingTools.c"
				gint _tmp194_;
#line 1647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp194_ = delta_y;
#line 1647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp194_ < 0) {
#line 11223 "EditingTools.c"
					gint _tmp195_;
					gint _tmp196_;
#line 1648 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp195_ = top;
#line 1648 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp196_ = height;
#line 1648 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = (_tmp195_ + _tmp196_) - 1;
#line 11232 "EditingTools.c"
				} else {
					gint _tmp197_;
					gint _tmp198_;
#line 1650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp197_ = bottom;
#line 1650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp198_ = height;
#line 1650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = (_tmp197_ - _tmp198_) + 1;
#line 11242 "EditingTools.c"
				}
			}
#line 1652 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 11247 "EditingTools.c"
		}
		default:
		{
#line 1656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			result = FALSE;
#line 1656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return result;
#line 11255 "EditingTools.c"
		}
	}
#line 1666 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp199_ = right;
#line 1666 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp200_ = left;
#line 1666 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	width = (_tmp199_ - _tmp200_) + 1;
#line 1667 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp201_ = bottom;
#line 1667 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp202_ = top;
#line 1667 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	height = (_tmp201_ - _tmp202_) + 1;
#line 1669 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_get_photo_dimensions (self, &_tmp203_);
#line 1669 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_dims = _tmp203_;
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp204_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp205_ = editing_tools_photo_canvas_get_photo (_tmp204_);
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp206_ = _tmp205_;
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_get_straighten (_tmp206_, &_tmp207_);
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	angle = _tmp207_;
#line 1671 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp206_);
#line 1674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp208_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp208_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 11290 "EditingTools.c"
		gint _tmp209_;
		gint _tmp210_;
		gint _tmp211_;
		gint _tmp212_;
		BoxLocation _tmp213_;
		BoxLocation _tmp218_;
		gint _tmp223_;
		gint _tmp224_;
		gint _tmp225_;
		gint _tmp226_;
		Box _tmp227_ = {0};
		Dimensions _tmp228_;
		gint _tmp229_;
		Dimensions _tmp230_;
		gint _tmp231_;
		gdouble _tmp232_;
		BoxLocation _tmp233_;
		Box _tmp234_ = {0};
#line 1675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp209_ = right;
#line 1675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp210_ = left;
#line 1675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		width = (_tmp209_ - _tmp210_) + 1;
#line 1676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp211_ = bottom;
#line 1676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp212_ = top;
#line 1676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		height = (_tmp211_ - _tmp212_) + 1;
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp213_ = self->priv->in_manipulation;
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		switch (_tmp213_) {
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_LEFT_SIDE:
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_TOP_LEFT:
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_BOTTOM_LEFT:
#line 11331 "EditingTools.c"
			{
				gint _tmp214_;
#line 1682 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp214_ = width;
#line 1682 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp214_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE) {
#line 11338 "EditingTools.c"
					gint _tmp215_;
#line 1683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp215_ = right;
#line 1683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					left = _tmp215_ - EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11344 "EditingTools.c"
				}
#line 1684 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11348 "EditingTools.c"
			}
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_RIGHT_SIDE:
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_TOP_RIGHT:
#line 1678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_BOTTOM_RIGHT:
#line 11356 "EditingTools.c"
			{
				gint _tmp216_;
#line 1689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp216_ = width;
#line 1689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp216_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE) {
#line 11363 "EditingTools.c"
					gint _tmp217_;
#line 1690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp217_ = left;
#line 1690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					right = _tmp217_ + EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11369 "EditingTools.c"
				}
#line 1691 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11373 "EditingTools.c"
			}
			default:
			{
#line 1694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11379 "EditingTools.c"
			}
		}
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp218_ = self->priv->in_manipulation;
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		switch (_tmp218_) {
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_TOP_SIDE:
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_TOP_LEFT:
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_TOP_RIGHT:
#line 11392 "EditingTools.c"
			{
				gint _tmp219_;
#line 1701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp219_ = height;
#line 1701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp219_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE) {
#line 11399 "EditingTools.c"
					gint _tmp220_;
#line 1702 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp220_ = bottom;
#line 1702 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					top = _tmp220_ - EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11405 "EditingTools.c"
				}
#line 1703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11409 "EditingTools.c"
			}
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_BOTTOM_SIDE:
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_BOTTOM_LEFT:
#line 1697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			case BOX_LOCATION_BOTTOM_RIGHT:
#line 11417 "EditingTools.c"
			{
				gint _tmp221_;
#line 1708 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp221_ = height;
#line 1708 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (_tmp221_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE) {
#line 11424 "EditingTools.c"
					gint _tmp222_;
#line 1709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp222_ = top;
#line 1709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					bottom = _tmp222_ + EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11430 "EditingTools.c"
				}
#line 1710 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11434 "EditingTools.c"
			}
			default:
			{
#line 1713 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 11440 "EditingTools.c"
			}
		}
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp223_ = left;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp224_ = top;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp225_ = right;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp226_ = bottom;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_init (&_tmp227_, _tmp223_, _tmp224_, _tmp225_, _tmp226_);
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp228_ = photo_dims;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp229_ = _tmp228_.width;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp230_ = photo_dims;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp231_ = _tmp230_.height;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp232_ = angle;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp233_ = self->priv->in_manipulation;
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		clamp_inside_rotated_image (&_tmp227_, _tmp229_, _tmp231_, _tmp232_, _tmp233_ == BOX_LOCATION_INSIDE, &_tmp234_);
#line 1719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		new_crop = _tmp234_;
#line 11469 "EditingTools.c"
	} else {
		gint _tmp235_;
		gint _tmp236_;
		gint _tmp237_;
		gint _tmp238_;
		Box adjusted = {0};
		Box _tmp239_;
		Dimensions _tmp240_;
		gint _tmp241_;
		Dimensions _tmp242_;
		gint _tmp243_;
		gdouble _tmp244_;
		BoxLocation _tmp245_;
		Box _tmp246_ = {0};
		gboolean _tmp247_ = FALSE;
		gboolean _tmp248_ = FALSE;
		Box _tmp249_;
		Box _tmp250_;
#line 1728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp235_ = left;
#line 1728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp236_ = top;
#line 1728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp237_ = right;
#line 1728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp238_ = bottom;
#line 1728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_init (&new_crop, _tmp235_, _tmp236_, _tmp237_, _tmp238_);
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp239_ = new_crop;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp240_ = photo_dims;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp241_ = _tmp240_.width;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp242_ = photo_dims;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp243_ = _tmp242_.height;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp244_ = angle;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp245_ = self->priv->in_manipulation;
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		clamp_inside_rotated_image (&_tmp239_, _tmp241_, _tmp243_, _tmp244_, _tmp245_ == BOX_LOCATION_INSIDE, &_tmp246_);
#line 1729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		adjusted = _tmp246_;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp249_ = adjusted;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp250_ = new_crop;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_box_equal (&_tmp249_, &_tmp250_) != TRUE) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp248_ = TRUE;
#line 11524 "EditingTools.c"
		} else {
			gint _tmp251_;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp251_ = width;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp248_ = _tmp251_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11531 "EditingTools.c"
		}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp248_) {
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp247_ = TRUE;
#line 11537 "EditingTools.c"
		} else {
			gint _tmp252_;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp252_ = height;
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp247_ = _tmp252_ < EDITING_TOOLS_CROP_TOOL_CROP_MIN_SIZE;
#line 11544 "EditingTools.c"
		}
#line 1733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp247_) {
#line 11548 "EditingTools.c"
			Box _tmp253_;
#line 1734 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp253_ = self->priv->scaled_crop;
#line 1734 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			new_crop = _tmp253_;
#line 11554 "EditingTools.c"
		}
	}
#line 1738 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp254_ = self->priv->in_manipulation;
#line 1738 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp254_ != BOX_LOCATION_INSIDE) {
#line 11561 "EditingTools.c"
		Box _tmp255_;
#line 1739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp255_ = new_crop;
#line 1739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_crop_resized (self, &_tmp255_);
#line 11567 "EditingTools.c"
	} else {
		Box _tmp256_;
#line 1741 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp256_ = new_crop;
#line 1741 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_crop_moved (self, &_tmp256_);
#line 11574 "EditingTools.c"
	}
#line 1744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp257_ = new_crop;
#line 1744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->scaled_crop = _tmp257_;
#line 1746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp258_ = editing_tools_crop_tool_get_constraint_aspect_ratio (self);
#line 1746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp258_ == EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO) {
#line 11584 "EditingTools.c"
		gint _tmp259_;
		gint _tmp260_;
		gint _tmp261_;
		gint _tmp262_;
#line 1747 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp259_ = box_get_width (&self->priv->scaled_crop);
#line 1747 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->custom_init_width = _tmp259_;
#line 1748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp260_ = box_get_height (&self->priv->scaled_crop);
#line 1748 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->custom_init_height = _tmp260_;
#line 1749 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp261_ = self->priv->custom_init_width;
#line 1749 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp262_ = self->priv->custom_init_height;
#line 1749 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->custom_aspect_ratio = ((gfloat) _tmp261_) / ((gfloat) _tmp262_);
#line 11603 "EditingTools.c"
	}
#line 1752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 1752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 11609 "EditingTools.c"
}


static void editing_tools_crop_tool_crop_resized (EditingToolsCropTool* self, Box* new_crop) {
	Box _tmp0_;
	gboolean _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	Box _tmp3_;
	Box horizontal = {0};
	gboolean horizontal_enlarged = FALSE;
	Box vertical = {0};
	gboolean vertical_enlarged = FALSE;
	BoxComplements complements = 0;
	Box _tmp4_;
	Box _tmp5_ = {0};
	gboolean _tmp6_ = FALSE;
	Box _tmp7_ = {0};
	gboolean _tmp8_ = FALSE;
	BoxComplements _tmp9_;
	BoxComplements _tmp10_;
	gboolean _tmp11_ = FALSE;
	BoxComplements _tmp12_;
	gboolean _tmp17_ = FALSE;
	BoxComplements _tmp18_;
	Box _tmp23_;
	EditingToolsPhotoCanvas* _tmp24_;
	Box _tmp25_;
#line 1755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1755 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (new_crop != NULL);
#line 1756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = *new_crop;
#line 1756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = box_equals (&self->priv->scaled_crop, &_tmp0_);
#line 1756 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 1758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 11649 "EditingTools.c"
	}
#line 1761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->scaled_crop;
#line 1761 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp2_, &_tmp3_);
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = *new_crop;
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = box_resized_complements (&self->priv->scaled_crop, &_tmp4_, &_tmp5_, &_tmp6_, &_tmp7_, &_tmp8_);
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	horizontal = _tmp5_;
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	horizontal_enlarged = _tmp6_;
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	vertical = _tmp7_;
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	vertical_enlarged = _tmp8_;
#line 1767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	complements = _tmp9_;
#line 1771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = complements;
#line 1771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_assert (_tmp10_ != BOX_COMPLEMENTS_NONE, "complements != BoxComplements.NONE");
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = complements;
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp12_ == BOX_COMPLEMENTS_HORIZONTAL) {
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = TRUE;
#line 11681 "EditingTools.c"
	} else {
		BoxComplements _tmp13_;
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = complements;
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = _tmp13_ == BOX_COMPLEMENTS_BOTH;
#line 11688 "EditingTools.c"
	}
#line 1773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp11_) {
#line 11692 "EditingTools.c"
		gdouble _tmp14_ = 0.0;
		gboolean _tmp15_;
		Box _tmp16_;
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = horizontal_enlarged;
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp15_) {
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp14_ = 0.0;
#line 11702 "EditingTools.c"
		} else {
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp14_ = 0.5;
#line 11706 "EditingTools.c"
		}
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = horizontal;
#line 1774 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_set_area_alpha (self, &_tmp16_, _tmp14_);
#line 11712 "EditingTools.c"
	}
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = complements;
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp18_ == BOX_COMPLEMENTS_VERTICAL) {
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = TRUE;
#line 11720 "EditingTools.c"
	} else {
		BoxComplements _tmp19_;
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = complements;
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = _tmp19_ == BOX_COMPLEMENTS_BOTH;
#line 11727 "EditingTools.c"
	}
#line 1776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp17_) {
#line 11731 "EditingTools.c"
		gdouble _tmp20_ = 0.0;
		gboolean _tmp21_;
		Box _tmp22_;
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = vertical_enlarged;
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp21_) {
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp20_ = 0.0;
#line 11741 "EditingTools.c"
		} else {
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp20_ = 0.5;
#line 11745 "EditingTools.c"
		}
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = vertical;
#line 1777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_set_area_alpha (self, &_tmp22_, _tmp20_);
#line 11751 "EditingTools.c"
	}
#line 1779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = *new_crop;
#line 1779 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_paint_crop_tool (self, &_tmp23_);
#line 1780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = *new_crop;
#line 1780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp24_, &_tmp25_);
#line 11763 "EditingTools.c"
}


static void editing_tools_crop_tool_crop_moved (EditingToolsCropTool* self, Box* new_crop) {
	Box _tmp0_;
	gboolean _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	Box _tmp3_;
	Box _tmp4_;
	Box _tmp5_;
	Box _tmp6_;
	EditingToolsPhotoCanvas* _tmp7_;
	Box _tmp8_;
#line 1783 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1783 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (new_crop != NULL);
#line 1784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = *new_crop;
#line 1784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = box_equals (&self->priv->scaled_crop, &_tmp0_);
#line 1784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 1786 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 11789 "EditingTools.c"
	}
#line 1789 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1789 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->scaled_crop;
#line 1789 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp2_, &_tmp3_);
#line 1791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->scaled_crop;
#line 1791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_set_area_alpha (self, &_tmp4_, 0.5);
#line 1792 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = *new_crop;
#line 1792 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_set_area_alpha (self, &_tmp5_, 0.0);
#line 1796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = *new_crop;
#line 1796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_paint_crop_tool (self, &_tmp6_);
#line 1797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *new_crop;
#line 1797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_invalidate_area (_tmp7_, &_tmp8_);
#line 11815 "EditingTools.c"
}


static void editing_tools_crop_tool_set_area_alpha (EditingToolsCropTool* self, Box* area, gdouble alpha) {
	cairo_t* ctx = NULL;
	cairo_surface_t* _tmp0_;
	cairo_t* _tmp1_;
	gdouble _tmp2_;
	Box _tmp3_;
	gint _tmp4_;
	Box _tmp5_;
	gint _tmp6_;
	gint _tmp7_;
	gint _tmp8_;
	EditingToolsPhotoCanvas* _tmp9_;
	cairo_surface_t* _tmp10_;
	Box _tmp11_;
#line 1800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (area != NULL);
#line 1801 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->crop_surface;
#line 1801 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = cairo_create (_tmp0_);
#line 1801 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	ctx = _tmp1_;
#line 1802 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_operator (ctx, CAIRO_OPERATOR_SOURCE);
#line 1803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = alpha;
#line 1803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_source_rgba (ctx, 0.0, 0.0, 0.0, _tmp2_);
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = *area;
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.left;
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = *area;
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.top;
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = box_get_width (area);
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = box_get_height (area);
#line 1804 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_rectangle (ctx, (gdouble) _tmp4_, (gdouble) _tmp6_, (gdouble) _tmp7_, (gdouble) _tmp8_);
#line 1805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_fill (ctx);
#line 1806 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1806 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->crop_surface;
#line 1806 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = *area;
#line 1806 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_paint_surface_area (_tmp9_, _tmp10_, &_tmp11_, TRUE);
#line 1800 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (ctx);
#line 11875 "EditingTools.c"
}


static void editing_tools_crop_tool_paint_crop_tool (EditingToolsCropTool* self, Box* crop) {
	BoxLocation _tmp0_;
	EditingToolsPhotoCanvas* _tmp65_;
	cairo_t* _tmp66_;
	Box _tmp67_;
	EditingToolsPhotoCanvas* _tmp68_;
	cairo_t* _tmp69_;
	Box _tmp70_ = {0};
	EditingToolsPhotoCanvas* _tmp71_;
	cairo_t* _tmp72_;
	Box _tmp73_ = {0};
#line 1809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_CROP_TOOL (self));
#line 1809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (crop != NULL);
#line 1811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->in_manipulation;
#line 1811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != BOX_LOCATION_OUTSIDE) {
#line 11898 "EditingTools.c"
		gint one_third_x = 0;
		gint _tmp1_;
		gint one_third_y = 0;
		gint _tmp2_;
		EditingToolsPhotoCanvas* _tmp3_;
		cairo_t* _tmp4_;
		Box _tmp5_;
		gint _tmp6_;
		Box _tmp7_;
		gint _tmp8_;
		gint _tmp9_;
		gint _tmp10_;
		EditingToolsPhotoCanvas* _tmp11_;
		cairo_t* _tmp12_;
		Box _tmp13_;
		gint _tmp14_;
		Box _tmp15_;
		gint _tmp16_;
		gint _tmp17_;
		gint _tmp18_;
		EditingToolsPhotoCanvas* _tmp19_;
		cairo_t* _tmp20_;
		Box _tmp21_;
		gint _tmp22_;
		gint _tmp23_;
		Box _tmp24_;
		gint _tmp25_;
		gint _tmp26_;
		EditingToolsPhotoCanvas* _tmp27_;
		cairo_t* _tmp28_;
		Box _tmp29_;
		gint _tmp30_;
		gint _tmp31_;
		Box _tmp32_;
		gint _tmp33_;
		gint _tmp34_;
		Box adj_crop = {0};
		EditingToolsPhotoCanvas* _tmp35_;
		GdkRectangle _tmp36_ = {0};
		Dimensions _tmp37_ = {0};
		EditingToolsPhotoCanvas* _tmp38_;
		Photo* _tmp39_;
		Photo* _tmp40_;
		Dimensions _tmp41_ = {0};
		Box _tmp42_ = {0};
		Box _tmp43_;
		gchar* text = NULL;
		gint _tmp44_;
		gchar* _tmp45_;
		gchar* _tmp46_;
		gchar* _tmp47_;
		gchar* _tmp48_;
		gint _tmp49_;
		gchar* _tmp50_;
		gchar* _tmp51_;
		gchar* _tmp52_;
		gchar* _tmp53_;
		gint x = 0;
		Box _tmp54_;
		gint _tmp55_;
		gint _tmp56_;
		gint y = 0;
		Box _tmp57_;
		gint _tmp58_;
		gint _tmp59_;
		EditingToolsPhotoCanvas* _tmp60_;
		cairo_t* _tmp61_;
		const gchar* _tmp62_;
		gint _tmp63_;
		gint _tmp64_;
#line 1812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = box_get_width (crop);
#line 1812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		one_third_x = _tmp1_ / 3;
#line 1813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = box_get_height (crop);
#line 1813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		one_third_y = _tmp2_ / 3;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->thin_white_ctx;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = *crop;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.left;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = *crop;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp7_.top;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = one_third_y;
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = box_get_width (crop);
#line 1815 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_draw_horizontal_line (_tmp3_, _tmp4_, _tmp6_, _tmp8_ + _tmp9_, _tmp10_, TRUE);
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = self->priv->thin_white_ctx;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = *crop;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = _tmp13_.left;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = *crop;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _tmp15_.top;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = one_third_y;
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp18_ = box_get_width (crop);
#line 1816 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_draw_horizontal_line (_tmp11_, _tmp12_, _tmp14_, _tmp16_ + (_tmp17_ * 2), _tmp18_, TRUE);
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp20_ = self->priv->thin_white_ctx;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = *crop;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = _tmp21_.left;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp23_ = one_third_x;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp24_ = *crop;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp25_ = _tmp24_.top;
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = box_get_height (crop);
#line 1818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_draw_vertical_line (_tmp19_, _tmp20_, _tmp22_ + _tmp23_, _tmp25_, _tmp26_, TRUE);
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp27_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp28_ = self->priv->thin_white_ctx;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp29_ = *crop;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp30_ = _tmp29_.left;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp31_ = one_third_x;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp32_ = *crop;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp33_ = _tmp32_.top;
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp34_ = box_get_height (crop);
#line 1819 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_draw_vertical_line (_tmp27_, _tmp28_, _tmp30_ + (_tmp31_ * 2), _tmp33_, _tmp34_, TRUE);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp35_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp35_, &_tmp36_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dimensions_for_rectangle (&_tmp36_, &_tmp37_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp38_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp39_ = editing_tools_photo_canvas_get_photo (_tmp38_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp40_ = _tmp39_;
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp40_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_CROP, &_tmp41_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		box_get_scaled_similar (&self->priv->scaled_crop, &_tmp37_, &_tmp41_, &_tmp42_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp43_ = _tmp42_;
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp40_);
#line 1823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		adj_crop = _tmp43_;
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp44_ = box_get_width (&adj_crop);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp45_ = g_strdup_printf ("%i", _tmp44_);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp46_ = _tmp45_;
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp47_ = g_strconcat (_tmp46_, "x", NULL);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp48_ = _tmp47_;
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp49_ = box_get_height (&adj_crop);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp50_ = g_strdup_printf ("%i", _tmp49_);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp51_ = _tmp50_;
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp52_ = g_strconcat (_tmp48_, _tmp51_, NULL);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp53_ = _tmp52_;
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp51_);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp48_);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (_tmp46_);
#line 1826 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		text = _tmp53_;
#line 1827 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp54_ = *crop;
#line 1827 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp55_ = _tmp54_.left;
#line 1827 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp56_ = box_get_width (crop);
#line 1827 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x = _tmp55_ + (_tmp56_ / 2);
#line 1828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp57_ = *crop;
#line 1828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp58_ = _tmp57_.top;
#line 1828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp59_ = box_get_height (crop);
#line 1828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y = _tmp58_ + (_tmp59_ / 2);
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp60_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp61_ = self->priv->text_ctx;
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp62_ = text;
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp63_ = x;
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp64_ = y;
#line 1829 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_draw_text (_tmp60_, _tmp61_, _tmp62_, _tmp63_, _tmp64_, TRUE);
#line 1811 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_free0 (text);
#line 12129 "EditingTools.c"
	}
#line 1833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp65_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp66_ = self->priv->wide_black_ctx;
#line 1833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp67_ = *crop;
#line 1833 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_draw_box (_tmp65_, _tmp66_, &_tmp67_);
#line 1834 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp68_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1834 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp69_ = self->priv->wide_white_ctx;
#line 1834 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_reduced (crop, 1, &_tmp70_);
#line 1834 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_draw_box (_tmp68_, _tmp69_, &_tmp70_);
#line 1835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp71_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp72_ = self->priv->wide_white_ctx;
#line 1835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	box_get_reduced (crop, 2, &_tmp73_);
#line 1835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_draw_box (_tmp71_, _tmp72_, &_tmp73_);
#line 12155 "EditingTools.c"
}


static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_constraint_description_construct (GType object_type, const gchar* new_name, gint new_basis_width, gint new_basis_height, gboolean new_pivotable, gfloat new_aspect_ratio) {
	EditingToolsCropToolConstraintDescription* self = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	gfloat _tmp4_;
	gboolean _tmp8_;
#line 615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (new_name != NULL, NULL);
#line 615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsCropToolConstraintDescription*) g_type_create_instance (object_type);
#line 617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = new_name;
#line 617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (self->name);
#line 617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->name = _tmp1_;
#line 618 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = new_basis_width;
#line 618 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->basis_width = _tmp2_;
#line 619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = new_basis_height;
#line 619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->basis_height = _tmp3_;
#line 620 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = new_aspect_ratio;
#line 620 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp4_ == EDITING_TOOLS_CROP_TOOL_COMPUTE_FROM_BASIS) {
#line 12191 "EditingTools.c"
		gint _tmp5_;
		gint _tmp6_;
#line 621 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->basis_width;
#line 621 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = self->basis_height;
#line 621 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->aspect_ratio = ((gfloat) _tmp5_) / ((gfloat) _tmp6_);
#line 12200 "EditingTools.c"
	} else {
		gfloat _tmp7_;
#line 623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = new_aspect_ratio;
#line 623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->aspect_ratio = _tmp7_;
#line 12207 "EditingTools.c"
	}
#line 624 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = new_pivotable;
#line 624 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->is_pivotable = _tmp8_;
#line 615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 12215 "EditingTools.c"
}


static EditingToolsCropToolConstraintDescription* editing_tools_crop_tool_constraint_description_new (const gchar* new_name, gint new_basis_width, gint new_basis_height, gboolean new_pivotable, gfloat new_aspect_ratio) {
#line 615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_crop_tool_constraint_description_construct (EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION, new_name, new_basis_width, new_basis_height, new_pivotable, new_aspect_ratio);
#line 12222 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_constraint_description_is_separator (EditingToolsCropToolConstraintDescription* self) {
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
#line 627 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_CROP_TOOL_IS_CONSTRAINT_DESCRIPTION (self), FALSE);
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->is_pivotable;
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!_tmp1_) {
#line 12236 "EditingTools.c"
		gfloat _tmp2_;
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->aspect_ratio;
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = _tmp2_ == EDITING_TOOLS_CROP_TOOL_SEPARATOR;
#line 12242 "EditingTools.c"
	} else {
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = FALSE;
#line 12246 "EditingTools.c"
	}
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 12252 "EditingTools.c"
}


static void editing_tools_crop_tool_value_constraint_description_init (GValue* value) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	value->data[0].v_pointer = NULL;
#line 12259 "EditingTools.c"
}


static void editing_tools_crop_tool_value_constraint_description_free_value (GValue* value) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (value->data[0].v_pointer) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_constraint_description_unref (value->data[0].v_pointer);
#line 12268 "EditingTools.c"
	}
}


static void editing_tools_crop_tool_value_constraint_description_copy_value (const GValue* src_value, GValue* dest_value) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (src_value->data[0].v_pointer) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = editing_tools_crop_tool_constraint_description_ref (src_value->data[0].v_pointer);
#line 12278 "EditingTools.c"
	} else {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dest_value->data[0].v_pointer = NULL;
#line 12282 "EditingTools.c"
	}
}


static gpointer editing_tools_crop_tool_value_constraint_description_peek_pointer (const GValue* value) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 12290 "EditingTools.c"
}


static gchar* editing_tools_crop_tool_value_constraint_description_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (collect_values[0].v_pointer) {
#line 12297 "EditingTools.c"
		EditingToolsCropToolConstraintDescription * object;
		object = collect_values[0].v_pointer;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (object->parent_instance.g_class == NULL) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 12304 "EditingTools.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 12308 "EditingTools.c"
		}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = editing_tools_crop_tool_constraint_description_ref (object);
#line 12312 "EditingTools.c"
	} else {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 12316 "EditingTools.c"
	}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 12320 "EditingTools.c"
}


static gchar* editing_tools_crop_tool_value_constraint_description_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	EditingToolsCropToolConstraintDescription ** object_p;
	object_p = collect_values[0].v_pointer;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!object_p) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 12331 "EditingTools.c"
	}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!value->data[0].v_pointer) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = NULL;
#line 12337 "EditingTools.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = value->data[0].v_pointer;
#line 12341 "EditingTools.c"
	} else {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*object_p = editing_tools_crop_tool_constraint_description_ref (value->data[0].v_pointer);
#line 12345 "EditingTools.c"
	}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return NULL;
#line 12349 "EditingTools.c"
}


static GParamSpec* editing_tools_crop_tool_param_spec_constraint_description (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	EditingToolsCropToolParamSpecConstraintDescription* spec;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (g_type_is_a (object_type, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION), NULL);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return G_PARAM_SPEC (spec);
#line 12363 "EditingTools.c"
}


static gpointer editing_tools_crop_tool_value_get_constraint_description (const GValue* value) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION), NULL);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return value->data[0].v_pointer;
#line 12372 "EditingTools.c"
}


static void editing_tools_crop_tool_value_set_constraint_description (GValue* value, gpointer v_object) {
	EditingToolsCropToolConstraintDescription * old;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_constraint_description_ref (value->data[0].v_pointer);
#line 12392 "EditingTools.c"
	} else {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 12396 "EditingTools.c"
	}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_constraint_description_unref (old);
#line 12402 "EditingTools.c"
	}
}


static void editing_tools_crop_tool_value_take_constraint_description (GValue* value, gpointer v_object) {
	EditingToolsCropToolConstraintDescription * old;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old = value->data[0].v_pointer;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (v_object) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = v_object;
#line 12421 "EditingTools.c"
	} else {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		value->data[0].v_pointer = NULL;
#line 12425 "EditingTools.c"
	}
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (old) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_crop_tool_constraint_description_unref (old);
#line 12431 "EditingTools.c"
	}
}


static void editing_tools_crop_tool_constraint_description_class_init (EditingToolsCropToolConstraintDescriptionClass * klass) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_constraint_description_parent_class = g_type_class_peek_parent (klass);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsCropToolConstraintDescriptionClass *) klass)->finalize = editing_tools_crop_tool_constraint_description_finalize;
#line 12441 "EditingTools.c"
}


static void editing_tools_crop_tool_constraint_description_instance_init (EditingToolsCropToolConstraintDescription * self) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->ref_count = 1;
#line 12448 "EditingTools.c"
}


static void editing_tools_crop_tool_constraint_description_finalize (EditingToolsCropToolConstraintDescription * obj) {
	EditingToolsCropToolConstraintDescription * self;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_CROP_TOOL_TYPE_CONSTRAINT_DESCRIPTION, EditingToolsCropToolConstraintDescription);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_destroy (self);
#line 609 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (self->name);
#line 12460 "EditingTools.c"
}


static GType editing_tools_crop_tool_constraint_description_get_type (void) {
	static volatile gsize editing_tools_crop_tool_constraint_description_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_crop_tool_constraint_description_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { editing_tools_crop_tool_value_constraint_description_init, editing_tools_crop_tool_value_constraint_description_free_value, editing_tools_crop_tool_value_constraint_description_copy_value, editing_tools_crop_tool_value_constraint_description_peek_pointer, "p", editing_tools_crop_tool_value_constraint_description_collect_value, "p", editing_tools_crop_tool_value_constraint_description_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsCropToolConstraintDescriptionClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_crop_tool_constraint_description_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsCropToolConstraintDescription), 0, (GInstanceInitFunc) editing_tools_crop_tool_constraint_description_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType editing_tools_crop_tool_constraint_description_type_id;
		editing_tools_crop_tool_constraint_description_type_id = g_type_register_fundamental (g_type_fundamental_next (), "EditingToolsCropToolConstraintDescription", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&editing_tools_crop_tool_constraint_description_type_id__volatile, editing_tools_crop_tool_constraint_description_type_id);
	}
	return editing_tools_crop_tool_constraint_description_type_id__volatile;
}


static gpointer editing_tools_crop_tool_constraint_description_ref (gpointer instance) {
	EditingToolsCropToolConstraintDescription * self;
	self = instance;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_atomic_int_inc (&self->ref_count);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return instance;
#line 12485 "EditingTools.c"
}


static void editing_tools_crop_tool_constraint_description_unref (gpointer instance) {
	EditingToolsCropToolConstraintDescription * self;
	self = instance;
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		EDITING_TOOLS_CROP_TOOL_CONSTRAINT_DESCRIPTION_GET_CLASS (self)->finalize (self);
#line 608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 12498 "EditingTools.c"
	}
}


static gboolean _editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func_gtk_tree_view_row_separator_func (GtkTreeModel* model, GtkTreeIter* iter, gpointer self) {
	gboolean result;
	result = editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func (model, iter);
#line 676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 12508 "EditingTools.c"
}


static EditingToolsCropToolCropToolWindow* editing_tools_crop_tool_crop_tool_window_construct (GType object_type, GtkWindow* container) {
	EditingToolsCropToolCropToolWindow * self = NULL;
	GtkWindow* _tmp0_;
	GtkButton* _tmp1_;
	GtkButton* _tmp2_;
	GtkButton* _tmp3_;
	GtkButton* _tmp4_;
	GtkComboBox* _tmp5_;
	GtkCellRendererText* combo_text_renderer = NULL;
	GtkCellRendererText* _tmp6_;
	GtkComboBox* _tmp7_;
	GtkComboBox* _tmp8_;
	GtkComboBox* _tmp9_;
	GtkComboBox* _tmp10_;
	GtkImage* image = NULL;
	GtkImage* _tmp11_;
	GtkButton* _tmp12_;
	GtkButton* _tmp13_;
	GtkEntry* _tmp14_;
	GtkEntry* _tmp15_;
	GtkEntry* _tmp16_;
	GtkEntry* _tmp17_;
	GtkBox* _tmp18_;
	GtkBox* _tmp19_;
	GtkBox* _tmp20_;
	GtkButton* _tmp21_;
	GtkBox* _tmp22_;
	GtkButton* _tmp23_;
	GtkBox* _tmp24_;
	GtkBox* _tmp25_;
	GtkComboBox* _tmp26_;
	GtkBox* _tmp27_;
	GtkButton* _tmp28_;
	GtkBox* _tmp29_;
	GtkBox* _tmp30_;
	GtkBox* _tmp31_;
#line 663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WINDOW (container), NULL);
#line 664 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = container;
#line 664 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsCropToolCropToolWindow*) editing_tools_editing_tool_window_construct (object_type, _tmp0_);
#line 666 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->cancel_button;
#line 666 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_tooltip_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_widget_get_type (), GtkWidget), _ ("Return to current photo dimensions"));
#line 667 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->cancel_button;
#line 667 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_button_set_image_position (_tmp2_, GTK_POS_LEFT);
#line 669 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->ok_button;
#line 669 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_tooltip_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_widget_get_type (), GtkWidget), _ ("Set the crop for this photo"));
#line 670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->ok_button;
#line 670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_button_set_image_position (_tmp4_, GTK_POS_LEFT);
#line 672 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = (GtkComboBox*) gtk_combo_box_new ();
#line 672 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp5_);
#line 672 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->constraint_combo);
#line 672 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->constraint_combo = _tmp5_;
#line 673 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = (GtkCellRendererText*) gtk_cell_renderer_text_new ();
#line 673 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp6_);
#line 673 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	combo_text_renderer = _tmp6_;
#line 674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->constraint_combo;
#line 674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_cell_layout_pack_start (G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, GTK_TYPE_CELL_LAYOUT, GtkCellLayout), G_TYPE_CHECK_INSTANCE_CAST (combo_text_renderer, gtk_cell_renderer_get_type (), GtkCellRenderer), TRUE);
#line 675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->constraint_combo;
#line 675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_cell_layout_add_attribute (G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, GTK_TYPE_CELL_LAYOUT, GtkCellLayout), G_TYPE_CHECK_INSTANCE_CAST (combo_text_renderer, gtk_cell_renderer_get_type (), GtkCellRenderer), "text", 0);
#line 676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->constraint_combo;
#line 676 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_combo_box_set_row_separator_func (_tmp9_, _editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func_gtk_tree_view_row_separator_func, NULL, NULL);
#line 677 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->constraint_combo;
#line 677 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_combo_box_set_active (_tmp10_, 0);
#line 679 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = (GtkImage*) gtk_image_new_from_icon_name ("crop-pivot-reticle", GTK_ICON_SIZE_LARGE_TOOLBAR);
#line 679 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp11_);
#line 679 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	image = _tmp11_;
#line 680 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->pivot_reticle_button;
#line 680 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_button_set_image (_tmp12_, G_TYPE_CHECK_INSTANCE_CAST (image, gtk_widget_get_type (), GtkWidget));
#line 681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->pivot_reticle_button;
#line 681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_tooltip_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, gtk_widget_get_type (), GtkWidget), _ ("Pivot the crop rectangle between portrait and landscape orientations"));
#line 683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->custom_width_entry;
#line 683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_entry_set_width_chars (_tmp14_, 4);
#line 684 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->custom_width_entry;
#line 684 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_set (_tmp15_, "editable", TRUE, NULL);
#line 685 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->custom_height_entry;
#line 685 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_entry_set_width_chars (_tmp16_, 4);
#line 686 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->custom_height_entry;
#line 686 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_set (_tmp17_, "editable", TRUE, NULL);
#line 688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_CONTROL_SPACING);
#line 688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp18_);
#line 688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->response_layout);
#line 688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->response_layout = _tmp18_;
#line 689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = self->response_layout;
#line 689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_set_homogeneous (_tmp19_, TRUE);
#line 690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->response_layout;
#line 690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->cancel_button;
#line 690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp20_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp21_, gtk_widget_get_type (), GtkWidget));
#line 691 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->response_layout;
#line 691 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->ok_button;
#line 691 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, gtk_widget_get_type (), GtkWidget));
#line 693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, EDITING_TOOLS_CROP_TOOL_CROP_TOOL_WINDOW_CONTROL_SPACING);
#line 693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp24_);
#line 693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->layout);
#line 693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->layout = _tmp24_;
#line 694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->layout;
#line 694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = self->constraint_combo;
#line 694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp25_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_widget_get_type (), GtkWidget));
#line 695 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = self->layout;
#line 695 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = self->pivot_reticle_button;
#line 695 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp27_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp28_, gtk_widget_get_type (), GtkWidget));
#line 696 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->layout;
#line 696 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = self->response_layout;
#line 696 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (_tmp29_, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp30_, gtk_widget_get_type (), GtkWidget));
#line 698 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = self->layout;
#line 698 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, gtk_widget_get_type (), GtkWidget));
#line 663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (image);
#line 663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (combo_text_renderer);
#line 663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 12690 "EditingTools.c"
}


static EditingToolsCropToolCropToolWindow* editing_tools_crop_tool_crop_tool_window_new (GtkWindow* container) {
#line 663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_crop_tool_crop_tool_window_construct (EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW, container);
#line 12697 "EditingTools.c"
}


static gboolean editing_tools_crop_tool_crop_tool_window_constraint_combo_separator_func (GtkTreeModel* model, GtkTreeIter* iter) {
	gboolean result = FALSE;
	GValue val = {0};
	GtkTreeModel* _tmp0_;
	GtkTreeIter _tmp1_;
	GValue _tmp2_ = {0};
	gchar* _tmp3_;
	gchar* _tmp4_;
	gboolean _tmp5_;
#line 701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_TREE_MODEL (model), FALSE);
#line 701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (iter != NULL, FALSE);
#line 703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = model;
#line 703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = *iter;
#line 703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_tree_model_get_value (_tmp0_, &_tmp1_, 0, &_tmp2_);
#line 703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 703 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	val = _tmp2_;
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = g_value_dup_string (&val);
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = g_strcmp0 (_tmp4_, "-") == 0;
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_free0 (_tmp4_);
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp5_;
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_IS_VALUE (&val) ? (g_value_unset (&val), NULL) : NULL;
#line 705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 12738 "EditingTools.c"
}


static void editing_tools_crop_tool_crop_tool_window_class_init (EditingToolsCropToolCropToolWindowClass * klass) {
#line 647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_crop_tool_window_parent_class = g_type_class_peek_parent (klass);
#line 647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_crop_tool_crop_tool_window_finalize;
#line 12747 "EditingTools.c"
}


static void editing_tools_crop_tool_crop_tool_window_instance_init (EditingToolsCropToolCropToolWindow * self) {
	GtkButton* _tmp0_;
	GtkButton* _tmp1_;
	GtkButton* _tmp2_;
	GtkEntry* _tmp3_;
	GtkEntry* _tmp4_;
	GtkLabel* _tmp5_;
#line 650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = (GtkButton*) gtk_button_new_with_label (RESOURCES_CROP_LABEL);
#line 650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp0_);
#line 650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->ok_button = _tmp0_;
#line 651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = (GtkButton*) gtk_button_new_with_mnemonic (RESOURCES_CANCEL_LABEL);
#line 651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp1_);
#line 651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->cancel_button = _tmp1_;
#line 653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = (GtkButton*) gtk_button_new ();
#line 653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp2_);
#line 653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->pivot_reticle_button = _tmp2_;
#line 654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = (GtkEntry*) gtk_entry_new ();
#line 654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp3_);
#line 654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->custom_width_entry = _tmp3_;
#line 655 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = (GtkEntry*) gtk_entry_new ();
#line 655 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp4_);
#line 655 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->custom_height_entry = _tmp4_;
#line 656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = (GtkLabel*) gtk_label_new_with_mnemonic ("x");
#line 656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp5_);
#line 656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->custom_mulsign_label = _tmp5_;
#line 657 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->most_recently_edited = NULL;
#line 658 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->response_layout = NULL;
#line 659 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->layout = NULL;
#line 660 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->normal_width = -1;
#line 661 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->normal_height = -1;
#line 12804 "EditingTools.c"
}


static void editing_tools_crop_tool_crop_tool_window_finalize (GObject * obj) {
	EditingToolsCropToolCropToolWindow * self;
#line 647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_CROP_TOOL_TYPE_CROP_TOOL_WINDOW, EditingToolsCropToolCropToolWindow);
#line 650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->ok_button);
#line 651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->cancel_button);
#line 652 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->constraint_combo);
#line 653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->pivot_reticle_button);
#line 654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->custom_width_entry);
#line 655 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->custom_height_entry);
#line 656 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->custom_mulsign_label);
#line 657 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->most_recently_edited);
#line 658 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->response_layout);
#line 659 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->layout);
#line 647 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_crop_tool_crop_tool_window_parent_class)->finalize (obj);
#line 12834 "EditingTools.c"
}


static GType editing_tools_crop_tool_crop_tool_window_get_type (void) {
	static volatile gsize editing_tools_crop_tool_crop_tool_window_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_crop_tool_crop_tool_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsCropToolCropToolWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_crop_tool_crop_tool_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsCropToolCropToolWindow), 0, (GInstanceInitFunc) editing_tools_crop_tool_crop_tool_window_instance_init, NULL };
		GType editing_tools_crop_tool_crop_tool_window_type_id;
		editing_tools_crop_tool_crop_tool_window_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, "EditingToolsCropToolCropToolWindow", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_crop_tool_crop_tool_window_type_id__volatile, editing_tools_crop_tool_crop_tool_window_type_id);
	}
	return editing_tools_crop_tool_crop_tool_window_type_id__volatile;
}


static void editing_tools_crop_tool_class_init (EditingToolsCropToolClass * klass) {
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_crop_tool_parent_class = g_type_class_peek_parent (klass);
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->finalize = editing_tools_crop_tool_finalize;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsCropToolPrivate));
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->activate = (void (*) (EditingToolsEditingTool *, EditingToolsPhotoCanvas*)) editing_tools_crop_tool_real_activate;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_keypress = (gboolean (*) (EditingToolsEditingTool *, GdkEventKey*)) editing_tools_crop_tool_real_on_keypress;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->deactivate = (void (*) (EditingToolsEditingTool *)) editing_tools_crop_tool_real_deactivate;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_tool_window = (EditingToolsEditingToolWindow* (*) (EditingToolsEditingTool *)) editing_tools_crop_tool_real_get_tool_window;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_display_pixbuf = (GdkPixbuf* (*) (EditingToolsEditingTool *, Scaling*, Photo*, Dimensions*, GError**)) editing_tools_crop_tool_real_get_display_pixbuf;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_click = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_crop_tool_real_on_left_click;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_released = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_crop_tool_real_on_left_released;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_motion = (void (*) (EditingToolsEditingTool *, gint, gint, GdkModifierType)) editing_tools_crop_tool_real_on_motion;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->paint = (void (*) (EditingToolsEditingTool *, cairo_t*)) editing_tools_crop_tool_real_paint;
#line 12875 "EditingTools.c"
}


static void editing_tools_crop_tool_instance_init (EditingToolsCropTool * self) {
	gint _tmp0_;
	EditingToolsCropToolConstraintDescription** _tmp1_;
	gint _tmp2_;
	EditingToolsCropToolConstraintDescription** _tmp3_;
	EditingToolsCropToolConstraintDescription** _tmp4_;
	gint _tmp4__length1;
	GtkListStore* _tmp5_;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_CROP_TOOL_GET_PRIVATE (self);
#line 709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_tool_window = NULL;
#line 710 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->current_cursor_type = GDK_LEFT_PTR;
#line 711 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->in_manipulation = BOX_LOCATION_OUTSIDE;
#line 712 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wide_black_ctx = NULL;
#line 713 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wide_white_ctx = NULL;
#line 714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->thin_white_ctx = NULL;
#line 715 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->text_ctx = NULL;
#line 718 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->crop_surface = NULL;
#line 722 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_x = -1;
#line 723 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->last_grab_y = -1;
#line 725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_crop_tool_create_constraints (&_tmp0_);
#line 725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraints = _tmp1_;
#line 725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraints_length1 = _tmp0_;
#line 725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->_constraints_size_ = self->priv->constraints_length1;
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_crop_tool_create_constraints (&_tmp2_);
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4__length1 = _tmp2_;
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = editing_tools_crop_tool_create_constraint_list (_tmp4_, _tmp2_);
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraint_list = _tmp5_;
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = (_vala_array_free (_tmp4_, _tmp4__length1, (GDestroyNotify) editing_tools_crop_tool_constraint_description_unref), NULL);
#line 727 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->reticle_orientation = EDITING_TOOLS_CROP_TOOL_RETICLE_ORIENTATION_LANDSCAPE;
#line 728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraint_mode = EDITING_TOOLS_CROP_TOOL_CONSTRAINT_MODE_NORMAL;
#line 729 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->entry_insert_in_progress = FALSE;
#line 730 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_aspect_ratio = 1.0f;
#line 731 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_width = -1;
#line 732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_height = -1;
#line 733 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_init_width = -1;
#line 734 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->custom_init_height = -1;
#line 735 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->pre_aspect_ratio = EDITING_TOOLS_CROP_TOOL_ANY_ASPECT_RATIO;
#line 12947 "EditingTools.c"
}


static void editing_tools_crop_tool_finalize (EditingToolsEditingTool * obj) {
	EditingToolsCropTool * self;
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_CROP_TOOL, EditingToolsCropTool);
#line 709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->crop_tool_window);
#line 712 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wide_black_ctx);
#line 713 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wide_white_ctx);
#line 714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->thin_white_ctx);
#line 715 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->text_ctx);
#line 718 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_surface_destroy0 (self->priv->crop_surface);
#line 725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->constraints = (_vala_array_free (self->priv->constraints, self->priv->constraints_length1, (GDestroyNotify) editing_tools_crop_tool_constraint_description_unref), NULL);
#line 726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->constraint_list);
#line 587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_crop_tool_parent_class)->finalize (obj);
#line 12973 "EditingTools.c"
}


GType editing_tools_crop_tool_get_type (void) {
	static volatile gsize editing_tools_crop_tool_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_crop_tool_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsCropToolClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_crop_tool_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsCropTool), 0, (GInstanceInitFunc) editing_tools_crop_tool_instance_init, NULL };
		GType editing_tools_crop_tool_type_id;
		editing_tools_crop_tool_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL, "EditingToolsCropTool", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_crop_tool_type_id__volatile, editing_tools_crop_tool_type_id);
	}
	return editing_tools_crop_tool_type_id__volatile;
}


static void editing_tools_redeye_instance_init (EditingToolsRedeyeInstance *self) {
	GdkPoint default_center = {0};
	GdkPoint _tmp0_;
#line 1848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memset (self, 0, sizeof (EditingToolsRedeyeInstance));
#line 1849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memset (&default_center, 0, sizeof (GdkPoint));
#line 1850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = default_center;
#line 1850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*self).center = _tmp0_;
#line 1851 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	(*self).radius = EDITING_TOOLS_REDEYE_INSTANCE_DEFAULT_RADIUS;
#line 13002 "EditingTools.c"
}


void editing_tools_redeye_instance_to_bounds_rect (EditingToolsRedeyeInstance* inst, GdkRectangle* result) {
	GdkRectangle _result_ = {0};
	EditingToolsRedeyeInstance _tmp0_;
	GdkPoint _tmp1_;
	gint _tmp2_;
	EditingToolsRedeyeInstance _tmp3_;
	gint _tmp4_;
	EditingToolsRedeyeInstance _tmp5_;
	GdkPoint _tmp6_;
	gint _tmp7_;
	EditingToolsRedeyeInstance _tmp8_;
	gint _tmp9_;
	EditingToolsRedeyeInstance _tmp10_;
	gint _tmp11_;
	GdkRectangle _tmp12_;
	gint _tmp13_;
#line 1854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (inst != NULL);
#line 1855 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memset (&_result_, 0, sizeof (GdkRectangle));
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = *inst;
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_.center;
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_.x;
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = *inst;
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.radius;
#line 1856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.x = _tmp2_ - _tmp4_;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = *inst;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.center;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *inst;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.radius;
#line 1857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.y = _tmp7_ - _tmp9_;
#line 1858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = *inst;
#line 1858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.radius;
#line 1858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.width = 2 * _tmp11_;
#line 1859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _result_;
#line 1859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.width;
#line 1859 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.height = _tmp13_;
#line 1861 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _result_;
#line 1861 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 13066 "EditingTools.c"
}


void editing_tools_redeye_instance_from_bounds_rect (GdkRectangle* rect, EditingToolsRedeyeInstance* result) {
	GdkRectangle in_rect = {0};
	GdkRectangle _tmp0_;
	EditingToolsRedeyeInstance _result_ = {0};
	GdkRectangle _tmp1_;
	gint _tmp2_;
	GdkRectangle _tmp3_;
	gint _tmp4_;
	GdkRectangle _tmp5_;
	gint _tmp6_;
	EditingToolsRedeyeInstance _tmp7_;
	gint _tmp8_;
	GdkRectangle _tmp9_;
	gint _tmp10_;
	EditingToolsRedeyeInstance _tmp11_;
	gint _tmp12_;
#line 1864 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (rect != NULL);
#line 1865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = *rect;
#line 1865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	in_rect = _tmp0_;
#line 1867 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_instance_init (&_result_);
#line 1868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = in_rect;
#line 1868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_.width;
#line 1868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = in_rect;
#line 1868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.height;
#line 1868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.radius = (_tmp2_ + _tmp4_) / 4;
#line 1869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = in_rect;
#line 1869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.x;
#line 1869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _result_;
#line 1869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_.radius;
#line 1869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.center.x = _tmp6_ + _tmp8_;
#line 1870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = in_rect;
#line 1870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.y;
#line 1870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _result_;
#line 1870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.radius;
#line 1870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.center.y = _tmp10_ + _tmp12_;
#line 1872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _result_;
#line 1872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 13128 "EditingTools.c"
}


EditingToolsRedeyeInstance* editing_tools_redeye_instance_dup (const EditingToolsRedeyeInstance* self) {
	EditingToolsRedeyeInstance* dup;
#line 1840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dup = g_new0 (EditingToolsRedeyeInstance, 1);
#line 1840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	memcpy (dup, self, sizeof (EditingToolsRedeyeInstance));
#line 1840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return dup;
#line 13140 "EditingTools.c"
}


void editing_tools_redeye_instance_free (EditingToolsRedeyeInstance* self) {
#line 1840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_free (self);
#line 13147 "EditingTools.c"
}


GType editing_tools_redeye_instance_get_type (void) {
	static volatile gsize editing_tools_redeye_instance_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_redeye_instance_type_id__volatile)) {
		GType editing_tools_redeye_instance_type_id;
		editing_tools_redeye_instance_type_id = g_boxed_type_register_static ("EditingToolsRedeyeInstance", (GBoxedCopyFunc) editing_tools_redeye_instance_dup, (GBoxedFreeFunc) editing_tools_redeye_instance_free);
		g_once_init_leave (&editing_tools_redeye_instance_type_id__volatile, editing_tools_redeye_instance_type_id);
	}
	return editing_tools_redeye_instance_type_id__volatile;
}


static EditingToolsRedeyeTool* editing_tools_redeye_tool_construct (GType object_type) {
	EditingToolsRedeyeTool* self = NULL;
#line 1924 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsRedeyeTool*) editing_tools_editing_tool_construct (object_type, "RedeyeTool");
#line 1923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 13168 "EditingTools.c"
}


static EditingToolsRedeyeTool* editing_tools_redeye_tool_new (void) {
#line 1923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_redeye_tool_construct (EDITING_TOOLS_TYPE_REDEYE_TOOL);
#line 13175 "EditingTools.c"
}


EditingToolsRedeyeTool* editing_tools_redeye_tool_factory (void) {
	EditingToolsRedeyeTool* result = NULL;
	EditingToolsRedeyeTool* _tmp0_;
#line 1928 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_redeye_tool_new ();
#line 1928 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 1928 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 13188 "EditingTools.c"
}


gboolean editing_tools_redeye_tool_is_available (Photo* photo, Scaling* scaling) {
	gboolean result = FALSE;
	Dimensions dim = {0};
	Photo* _tmp0_;
	Dimensions _tmp1_ = {0};
	Dimensions _tmp2_ = {0};
	gboolean _tmp3_ = FALSE;
	Dimensions _tmp4_;
	gint _tmp5_;
#line 1931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), FALSE);
#line 1931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, FALSE);
#line 1932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = photo;
#line 1932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp1_);
#line 1932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaling_get_scaled_dimensions (scaling, &_tmp1_, &_tmp2_);
#line 1932 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dim = _tmp2_;
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = dim;
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_.width;
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ >= (EDITING_TOOLS_REDEYE_INSTANCE_MAX_RADIUS * 2)) {
#line 13219 "EditingTools.c"
		Dimensions _tmp6_;
		gint _tmp7_;
#line 1935 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = dim;
#line 1935 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = _tmp6_.height;
#line 1935 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp7_ >= (EDITING_TOOLS_REDEYE_INSTANCE_MAX_RADIUS * 2);
#line 13228 "EditingTools.c"
	} else {
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = FALSE;
#line 13232 "EditingTools.c"
	}
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp3_;
#line 1934 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 13238 "EditingTools.c"
}


static void editing_tools_redeye_tool_new_interaction_instance (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas, EditingToolsRedeyeInstance* result) {
	GdkRectangle photo_bounds = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	GdkRectangle _tmp1_ = {0};
	GdkPoint photo_center = {0};
	GdkPoint _tmp2_ = {0};
	GdkRectangle _tmp3_;
	gint _tmp4_;
	GdkRectangle _tmp5_;
	gint _tmp6_;
	GdkRectangle _tmp7_;
	gint _tmp8_;
	GdkRectangle _tmp9_;
	gint _tmp10_;
	EditingToolsRedeyeInstance _result_ = {0};
	GdkPoint _tmp11_;
	gint _tmp12_;
	GdkPoint _tmp13_;
	gint _tmp14_;
#line 1938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 1938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 1939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 1939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp0_, &_tmp1_);
#line 1939 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_bounds = _tmp1_;
#line 1940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_.x = 0;
#line 1940 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_center = _tmp2_;
#line 1941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = photo_bounds;
#line 1941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.x;
#line 1941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = photo_bounds;
#line 1941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.width;
#line 1941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_center.x = _tmp4_ + (_tmp6_ / 2);
#line 1942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = photo_bounds;
#line 1942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_.y;
#line 1942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = photo_bounds;
#line 1942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.height;
#line 1942 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_center.y = _tmp8_ + (_tmp10_ / 2);
#line 1944 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_instance_init (&_result_);
#line 1945 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = photo_center;
#line 1945 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _tmp11_.x;
#line 1945 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.center.x = _tmp12_;
#line 1946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = photo_center;
#line 1946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.y;
#line 1946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.center.y = _tmp14_;
#line 1947 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_result_.radius = EDITING_TOOLS_REDEYE_INSTANCE_DEFAULT_RADIUS;
#line 1949 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	*result = _result_;
#line 1949 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return;
#line 13315 "EditingTools.c"
}


static void editing_tools_redeye_tool_prepare_ctx (EditingToolsRedeyeTool* self, cairo_t* ctx, Dimensions* dim) {
	cairo_t* _tmp0_;
	cairo_surface_t* _tmp1_;
	cairo_t* _tmp2_;
	cairo_t* _tmp3_;
	cairo_t* _tmp4_;
	cairo_t* _tmp5_;
	cairo_surface_t* _tmp6_;
	cairo_t* _tmp7_;
	cairo_t* _tmp8_;
	cairo_t* _tmp9_;
#line 1952 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 1952 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 1952 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (dim != NULL);
#line 1953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = ctx;
#line 1953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = cairo_get_target (_tmp0_);
#line 1953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = cairo_create (_tmp1_);
#line 1953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wider_gray_ctx);
#line 1953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wider_gray_ctx = _tmp2_;
#line 1954 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->wider_gray_ctx;
#line 1954 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp3_, "#111");
#line 1955 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->wider_gray_ctx;
#line 1955 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_line_width (_tmp4_, (gdouble) 3);
#line 1957 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = ctx;
#line 1957 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = cairo_get_target (_tmp5_);
#line 1957 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = cairo_create (_tmp6_);
#line 1957 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->thin_white_ctx);
#line 1957 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->thin_white_ctx = _tmp7_;
#line 1958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->thin_white_ctx;
#line 1958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	set_source_color_from_string (_tmp8_, "#FFF");
#line 1959 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->thin_white_ctx;
#line 1959 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cairo_set_line_width (_tmp9_, (gdouble) 1);
#line 13372 "EditingTools.c"
}


static void editing_tools_redeye_tool_draw_redeye_instance (EditingToolsRedeyeTool* self, EditingToolsRedeyeInstance* inst) {
	EditingToolsPhotoCanvas* _tmp0_;
	cairo_t* _tmp1_;
	EditingToolsRedeyeInstance _tmp2_;
	GdkPoint _tmp3_;
	gint _tmp4_;
	EditingToolsRedeyeInstance _tmp5_;
	GdkPoint _tmp6_;
	gint _tmp7_;
	EditingToolsRedeyeInstance _tmp8_;
	gint _tmp9_;
	EditingToolsPhotoCanvas* _tmp10_;
	cairo_t* _tmp11_;
	EditingToolsRedeyeInstance _tmp12_;
	GdkPoint _tmp13_;
	gint _tmp14_;
	EditingToolsRedeyeInstance _tmp15_;
	GdkPoint _tmp16_;
	gint _tmp17_;
	EditingToolsRedeyeInstance _tmp18_;
	gint _tmp19_;
#line 1962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 1962 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (inst != NULL);
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->wider_gray_ctx;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = *inst;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_.center;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.x;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = *inst;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_.center;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = *inst;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.radius;
#line 1963 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_draw_circle (_tmp0_, _tmp1_, _tmp4_, _tmp7_, _tmp9_);
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->thin_white_ctx;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = *inst;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.center;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.x;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = *inst;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.center;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_.y;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = *inst;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.radius;
#line 1965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_draw_circle (_tmp10_, _tmp11_, _tmp14_, _tmp17_, _tmp19_);
#line 13445 "EditingTools.c"
}


static gboolean editing_tools_redeye_tool_on_size_slider_adjust (EditingToolsRedeyeTool* self, GtkScrollType type) {
	gboolean result = FALSE;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	EditingToolsPhotoCanvas* _tmp3_;
#line 1969 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self), FALSE);
#line 1970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->redeye_tool_window;
#line 1970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->slider;
#line 1970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 1970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.radius = (gint) _tmp2_;
#line 1973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp3_);
#line 1975 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 1975 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 13473 "EditingTools.c"
}


static void editing_tools_redeye_tool_on_apply (EditingToolsRedeyeTool* self) {
	GdkRectangle bounds_rect_user = {0};
	EditingToolsRedeyeInstance _tmp0_;
	GdkRectangle _tmp1_ = {0};
	GdkRectangle bounds_rect_active = {0};
	EditingToolsPhotoCanvas* _tmp2_;
	GdkRectangle _tmp3_;
	GdkRectangle _tmp4_ = {0};
	GdkRectangle bounds_rect_unscaled = {0};
	EditingToolsPhotoCanvas* _tmp5_;
	GdkRectangle _tmp6_;
	GdkRectangle _tmp7_ = {0};
	GdkRectangle bounds_rect_raw = {0};
	EditingToolsPhotoCanvas* _tmp8_;
	GdkRectangle _tmp9_;
	GdkRectangle _tmp10_ = {0};
	EditingToolsRedeyeInstance instance_raw = {0};
	GdkRectangle _tmp11_;
	EditingToolsRedeyeInstance _tmp12_ = {0};
	Dimensions dimensions = {0};
	EditingToolsPhotoCanvas* _tmp13_;
	Photo* _tmp14_;
	Photo* _tmp15_;
	Dimensions _tmp16_ = {0};
	Dimensions _tmp17_;
	gdouble theta = 0.0;
	EditingToolsPhotoCanvas* _tmp18_;
	Photo* _tmp19_;
	Photo* _tmp20_;
	gdouble _tmp21_ = 0.0;
	EditingToolsRedeyeInstance _tmp22_;
	GdkPoint _tmp23_;
	Dimensions _tmp24_;
	gint _tmp25_;
	Dimensions _tmp26_;
	gint _tmp27_;
	gdouble _tmp28_;
	GdkPoint _tmp29_ = {0};
	RedeyeCommand* command = NULL;
	EditingToolsPhotoCanvas* _tmp30_;
	Photo* _tmp31_;
	Photo* _tmp32_;
	EditingToolsRedeyeInstance _tmp33_;
	RedeyeCommand* _tmp34_;
	RedeyeCommand* _tmp35_;
	CommandManager* _tmp36_;
	CommandManager* _tmp37_;
#line 1978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 1979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->user_interaction_instance;
#line 1979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_instance_to_bounds_rect (&_tmp0_, &_tmp1_);
#line 1979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bounds_rect_user = _tmp1_;
#line 1982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = bounds_rect_user;
#line 1982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_user_to_active_rect (_tmp2_, &_tmp3_, &_tmp4_);
#line 1982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bounds_rect_active = _tmp4_;
#line 1984 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1984 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = bounds_rect_active;
#line 1984 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_active_to_unscaled_rect (_tmp5_, &_tmp6_, &_tmp7_);
#line 1984 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bounds_rect_unscaled = _tmp7_;
#line 1986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = bounds_rect_unscaled;
#line 1986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_unscaled_to_raw_rect (_tmp8_, &_tmp9_, &_tmp10_);
#line 1986 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bounds_rect_raw = _tmp10_;
#line 1989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = bounds_rect_raw;
#line 1989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_instance_from_bounds_rect (&_tmp11_, &_tmp12_);
#line 1989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	instance_raw = _tmp12_;
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = editing_tools_photo_canvas_get_photo (_tmp13_);
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_;
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp15_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_STRAIGHTEN | PHOTO_EXCEPTION_CROP, &_tmp16_);
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_;
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp15_);
#line 1994 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	dimensions = _tmp17_;
#line 1997 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	theta = 0.0;
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = editing_tools_photo_canvas_get_photo (_tmp18_);
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_;
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo_get_straighten (_tmp20_, &_tmp21_);
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	theta = _tmp21_;
#line 1999 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp20_);
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = instance_raw;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.center;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = dimensions;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_.width;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = dimensions;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_.height;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = theta;
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	derotate_point_arb (&_tmp23_, _tmp25_, _tmp27_, _tmp28_, &_tmp29_);
#line 2001 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	instance_raw.center = _tmp29_;
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = editing_tools_photo_canvas_get_photo (_tmp30_);
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = _tmp31_;
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = instance_raw;
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = redeye_command_new (_tmp32_, &_tmp33_, RESOURCES_RED_EYE_LABEL, RESOURCES_RED_EYE_TOOLTIP);
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = _tmp34_;
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp32_);
#line 2004 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command = _tmp35_;
#line 2006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = app_window_get_command_manager ();
#line 2006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = _tmp36_;
#line 2006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_manager_execute (_tmp37_, G_TYPE_CHECK_INSTANCE_CAST (command, TYPE_COMMAND, Command));
#line 2006 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_command_manager_unref0 (_tmp37_);
#line 1978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (command);
#line 13634 "EditingTools.c"
}


static void editing_tools_redeye_tool_on_photos_altered (EditingToolsRedeyeTool* self, GeeMap* map) {
	GeeMap* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
	Photo* _tmp2_;
	Photo* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	EditingToolsPhotoCanvas* _tmp17_;
	GError * _inner_error_ = NULL;
#line 2009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2009 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GEE_IS_MAP (map));
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = map;
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_photo_canvas_get_photo (_tmp1_);
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gee_map_has_key (_tmp0_, G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_DATA_OBJECT, DataObject));
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = !_tmp4_;
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp3_);
#line 2010 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_) {
#line 2011 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 13669 "EditingTools.c"
	}
	{
		GdkPixbuf* _tmp6_ = NULL;
		EditingToolsPhotoCanvas* _tmp7_;
		Photo* _tmp8_;
		Photo* _tmp9_;
		EditingToolsPhotoCanvas* _tmp10_;
		Scaling _tmp11_ = {0};
		GdkPixbuf* _tmp12_;
		GdkPixbuf* _tmp13_;
		GdkPixbuf* _tmp14_;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = editing_tools_photo_canvas_get_photo (_tmp7_);
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaling (_tmp10_, &_tmp11_);
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = photo_source_get_pixbuf (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, TYPE_PHOTO_SOURCE, PhotoSource), &_tmp11_, &_inner_error_);
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = _tmp12_;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp9_);
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp13_;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 13701 "EditingTools.c"
			goto __catch22_g_error;
		}
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = _tmp6_;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = NULL;
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->current_pixbuf);
#line 2014 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->current_pixbuf = _tmp14_;
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp6_);
#line 13714 "EditingTools.c"
	}
	goto __finally22;
	__catch22_g_error:
	{
		GError* err = NULL;
		GError* _tmp15_;
		const gchar* _tmp16_;
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		err = _inner_error_;
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_inner_error_ = NULL;
#line 2016 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = err;
#line 2016 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _tmp15_->message;
#line 2016 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_warning ("EditingTools.vala:2016: %s", _tmp16_);
#line 2017 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_emit (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_ABORTED_SIGNAL], 0);
#line 2019 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_error_free0 (err);
#line 2019 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 13738 "EditingTools.c"
	}
	__finally22:
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_clear_error (&_inner_error_);
#line 2013 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 13749 "EditingTools.c"
	}
#line 2022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2022 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp17_);
#line 13755 "EditingTools.c"
}


static void editing_tools_redeye_tool_on_close (EditingToolsRedeyeTool* self) {
	GdkPixbuf* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
	Photo* _tmp2_;
	Photo* _tmp3_;
	Dimensions _tmp4_ = {0};
#line 2025 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->current_pixbuf;
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_photo_canvas_get_photo (_tmp1_);
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp4_);
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_APPLIED_SIGNAL], 0, NULL, _tmp0_, &_tmp4_, FALSE);
#line 2026 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp3_);
#line 13781 "EditingTools.c"
}


static void editing_tools_redeye_tool_on_canvas_resize (EditingToolsRedeyeTool* self) {
	GdkRectangle scaled_pixbuf_position = {0};
	EditingToolsPhotoCanvas* _tmp0_;
	GdkRectangle _tmp1_ = {0};
	gint _tmp2_;
	GdkRectangle _tmp3_;
	gint _tmp4_;
	gint _tmp5_;
	GdkRectangle _tmp6_;
	gint _tmp7_;
	gdouble scale_factor = 0.0;
	GdkRectangle _tmp8_;
	gint _tmp9_;
	GdkRectangle _tmp10_;
	gint _tmp11_;
	EditingToolsRedeyeInstance _tmp12_;
	GdkPoint _tmp13_;
	gint _tmp14_;
	EditingToolsRedeyeInstance _tmp15_;
	GdkPoint _tmp16_;
	gint _tmp17_;
	gint _tmp18_;
	GdkRectangle _tmp19_;
	gint _tmp20_;
	gint _tmp21_;
	GdkRectangle _tmp22_;
	gint _tmp23_;
	GdkRectangle _tmp24_;
#line 2029 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp0_, &_tmp1_);
#line 2030 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scaled_pixbuf_position = _tmp1_;
#line 2033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->user_interaction_instance.center.x;
#line 2033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->old_scaled_pixbuf_position;
#line 2033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_.x;
#line 2033 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.x = _tmp2_ - _tmp4_;
#line 2034 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->user_interaction_instance.center.y;
#line 2034 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->old_scaled_pixbuf_position;
#line 2034 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_.y;
#line 2034 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.y = _tmp5_ - _tmp7_;
#line 2036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = scaled_pixbuf_position;
#line 2036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_.width;
#line 2036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->old_scaled_pixbuf_position;
#line 2036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_.width;
#line 2036 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	scale_factor = ((gdouble) _tmp9_) / ((gdouble) _tmp11_);
#line 2039 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->user_interaction_instance;
#line 2039 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_.center;
#line 2039 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_.x;
#line 2039 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.x = (gint) ((((gdouble) _tmp14_) * scale_factor) + 0.5);
#line 2042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->user_interaction_instance;
#line 2042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_.center;
#line 2042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_.y;
#line 2042 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.y = (gint) ((((gdouble) _tmp17_) * scale_factor) + 0.5);
#line 2046 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->user_interaction_instance.center.x;
#line 2046 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = scaled_pixbuf_position;
#line 2046 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = _tmp19_.x;
#line 2046 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.x = _tmp18_ + _tmp20_;
#line 2047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->user_interaction_instance.center.y;
#line 2047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = scaled_pixbuf_position;
#line 2047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_.y;
#line 2047 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance.center.y = _tmp21_ + _tmp23_;
#line 2049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = scaled_pixbuf_position;
#line 2049 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->old_scaled_pixbuf_position = _tmp24_;
#line 2051 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->current_pixbuf);
#line 2051 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->current_pixbuf = NULL;
#line 13887 "EditingTools.c"
}


static void _editing_tools_redeye_tool_on_photos_altered_data_collection_items_altered (DataCollection* _sender, GeeMap* items, gpointer self) {
#line 2075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_on_photos_altered ((EditingToolsRedeyeTool*) self, items);
#line 13894 "EditingTools.c"
}


static void editing_tools_redeye_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas) {
	EditingToolsRedeyeTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsRedeyeInstance _tmp1_ = {0};
	EditingToolsPhotoCanvas* _tmp2_;
	cairo_t* _tmp3_;
	cairo_t* _tmp4_;
	EditingToolsPhotoCanvas* _tmp5_;
	Dimensions _tmp6_ = {0};
	EditingToolsPhotoCanvas* _tmp7_;
	EditingToolsPhotoCanvas* _tmp8_;
	GdkRectangle _tmp9_ = {0};
	EditingToolsPhotoCanvas* _tmp10_;
	GdkPixbuf* _tmp11_;
	EditingToolsPhotoCanvas* _tmp12_;
	GtkWindow* _tmp13_;
	GtkWindow* _tmp14_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp15_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp16_;
	GtkScale* _tmp17_;
	EditingToolsRedeyeInstance _tmp18_;
	gint _tmp19_;
	GdkDisplay* display = NULL;
	EditingToolsPhotoCanvas* _tmp20_;
	GdkWindow* _tmp21_;
	GdkWindow* _tmp22_;
	GdkDisplay* _tmp23_;
	GdkDisplay* _tmp24_;
	GdkDisplay* _tmp25_;
	GdkDisplay* _tmp26_;
	GdkCursor* _tmp27_;
	GdkDisplay* _tmp28_;
	GdkCursor* _tmp29_;
	DataCollection* owner = NULL;
	EditingToolsPhotoCanvas* _tmp30_;
	Photo* _tmp31_;
	Photo* _tmp32_;
	DataCollection* _tmp33_;
	DataCollection* _tmp34_;
	DataCollection* _tmp35_;
	EditingToolsPhotoCanvas* _tmp37_;
#line 2054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_new_interaction_instance (self, _tmp0_, &_tmp1_);
#line 2055 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->user_interaction_instance = _tmp1_;
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = canvas;
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_photo_canvas_get_default_ctx (_tmp2_);
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = canvas;
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_surface_dim (_tmp5_, &_tmp6_);
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_prepare_ctx (self, _tmp4_, &_tmp6_);
#line 2057 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (_tmp4_);
#line 2059 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = canvas;
#line 2059 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_bind_canvas_handlers (self, _tmp7_);
#line 2061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = canvas;
#line 2061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp8_, &_tmp9_);
#line 2061 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->old_scaled_pixbuf_position = _tmp9_;
#line 2062 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = canvas;
#line 2062 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp10_);
#line 2062 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->current_pixbuf);
#line 2062 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->current_pixbuf = _tmp11_;
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = canvas;
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = editing_tools_photo_canvas_get_container (_tmp12_);
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_;
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = editing_tools_redeye_tool_redeye_tool_window_new (_tmp14_);
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp15_);
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->redeye_tool_window);
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->redeye_tool_window = _tmp15_;
#line 2064 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp14_);
#line 2065 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->redeye_tool_window;
#line 2065 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_->slider;
#line 2065 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->user_interaction_instance;
#line 2065 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_.radius;
#line 2065 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp17_, gtk_range_get_type (), GtkRange), (gdouble) _tmp19_);
#line 2067 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_bind_window_handlers (self);
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = canvas;
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = editing_tools_photo_canvas_get_drawing_window (_tmp20_);
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_;
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = gdk_window_get_display (_tmp22_);
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = _g_object_ref0 (_tmp23_);
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_;
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp22_);
#line 2069 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	display = _tmp25_;
#line 2070 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = display;
#line 2070 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = gdk_cursor_new_for_display (_tmp26_, GDK_LEFT_PTR);
#line 2070 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->cached_arrow_cursor);
#line 2070 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->cached_arrow_cursor = _tmp27_;
#line 2071 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = display;
#line 2071 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = gdk_cursor_new_for_display (_tmp28_, GDK_FLEUR);
#line 2071 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->cached_grab_cursor);
#line 2071 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->cached_grab_cursor = _tmp29_;
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = canvas;
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = editing_tools_photo_canvas_get_photo (_tmp30_);
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = _tmp31_;
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = data_object_get_membership (G_TYPE_CHECK_INSTANCE_CAST (_tmp32_, TYPE_DATA_OBJECT, DataObject));
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_;
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp32_);
#line 2073 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	owner = _tmp34_;
#line 2074 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = owner;
#line 2074 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp35_ != NULL) {
#line 14059 "EditingTools.c"
		DataCollection* _tmp36_;
#line 2075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp36_ = owner;
#line 2075 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_connect (_tmp36_, "items-altered", (GCallback) _editing_tools_redeye_tool_on_photos_altered_data_collection_items_altered, self);
#line 14065 "EditingTools.c"
	}
#line 2077 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = canvas;
#line 2077 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_redeye_tool_parent_class)->activate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp37_);
#line 2054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_data_collection_unref0 (owner);
#line 2054 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (display);
#line 14075 "EditingTools.c"
}


static void editing_tools_redeye_tool_real_deactivate (EditingToolsEditingTool* base) {
	EditingToolsRedeyeTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp10_;
#line 2080 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2081 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2081 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != NULL) {
#line 14089 "EditingTools.c"
		DataCollection* owner = NULL;
		EditingToolsPhotoCanvas* _tmp1_;
		Photo* _tmp2_;
		Photo* _tmp3_;
		DataCollection* _tmp4_;
		DataCollection* _tmp5_;
		DataCollection* _tmp6_;
		EditingToolsPhotoCanvas* _tmp9_;
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = editing_tools_photo_canvas_get_photo (_tmp1_);
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_;
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = data_object_get_membership (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_DATA_OBJECT, DataObject));
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = _tmp4_;
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp3_);
#line 2082 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		owner = _tmp5_;
#line 2083 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = owner;
#line 2083 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp6_ != NULL) {
#line 14116 "EditingTools.c"
			DataCollection* _tmp7_;
			guint _tmp8_;
#line 2084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = owner;
#line 2084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			g_signal_parse_name ("items-altered", TYPE_DATA_COLLECTION, &_tmp8_, NULL, FALSE);
#line 2084 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			g_signal_handlers_disconnect_matched (_tmp7_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp8_, 0, NULL, (GCallback) _editing_tools_redeye_tool_on_photos_altered_data_collection_items_altered, self);
#line 14125 "EditingTools.c"
		}
#line 2086 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2086 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_redeye_tool_unbind_canvas_handlers (self, _tmp9_);
#line 2081 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_data_collection_unref0 (owner);
#line 14133 "EditingTools.c"
	}
#line 2089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->redeye_tool_window;
#line 2089 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp10_ != NULL) {
#line 14139 "EditingTools.c"
		EditingToolsRedeyeToolRedeyeToolWindow* _tmp11_;
		EditingToolsRedeyeToolRedeyeToolWindow* _tmp12_;
#line 2090 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_redeye_tool_unbind_window_handlers (self);
#line 2091 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = self->priv->redeye_tool_window;
#line 2091 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_hide (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_widget_get_type (), GtkWidget));
#line 2092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = self->priv->redeye_tool_window;
#line 2092 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_destroy (G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, gtk_widget_get_type (), GtkWidget));
#line 2093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->redeye_tool_window);
#line 2093 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->redeye_tool_window = NULL;
#line 14156 "EditingTools.c"
	}
#line 2096 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_redeye_tool_parent_class)->deactivate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 14160 "EditingTools.c"
}


static void _editing_tools_redeye_tool_prepare_ctx_editing_tools_photo_canvas_new_surface (EditingToolsPhotoCanvas* _sender, cairo_t* ctx, Dimensions* dim, gpointer self) {
#line 2100 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_prepare_ctx ((EditingToolsRedeyeTool*) self, ctx, dim);
#line 14167 "EditingTools.c"
}


static void _editing_tools_redeye_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self) {
#line 2101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_on_canvas_resize ((EditingToolsRedeyeTool*) self);
#line 14174 "EditingTools.c"
}


static void editing_tools_redeye_tool_bind_canvas_handlers (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
#line 2099 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2099 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2100 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2100 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp0_, "new-surface", (GCallback) _editing_tools_redeye_tool_prepare_ctx_editing_tools_photo_canvas_new_surface, self);
#line 2101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = canvas;
#line 2101 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp1_, "resized-scaled-pixbuf", (GCallback) _editing_tools_redeye_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 14193 "EditingTools.c"
}


static void editing_tools_redeye_tool_unbind_canvas_handlers (EditingToolsRedeyeTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	guint _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	guint _tmp3_;
#line 2104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2104 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("new-surface", EDITING_TOOLS_TYPE_PHOTO_CANVAS, &_tmp1_, NULL, FALSE);
#line 2105 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _editing_tools_redeye_tool_prepare_ctx_editing_tools_photo_canvas_new_surface, self);
#line 2106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = canvas;
#line 2106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("resized-scaled-pixbuf", EDITING_TOOLS_TYPE_PHOTO_CANVAS, &_tmp3_, NULL, FALSE);
#line 2106 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp2_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp3_, 0, NULL, (GCallback) _editing_tools_redeye_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 14218 "EditingTools.c"
}


static void _editing_tools_redeye_tool_on_apply_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 2110 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_on_apply ((EditingToolsRedeyeTool*) self);
#line 14225 "EditingTools.c"
}


static void _editing_tools_redeye_tool_on_close_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 2111 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_on_close ((EditingToolsRedeyeTool*) self);
#line 14232 "EditingTools.c"
}


static gboolean _editing_tools_redeye_tool_on_size_slider_adjust_gtk_range_change_value (GtkRange* _sender, GtkScrollType scroll, gdouble new_value, gpointer self) {
	gboolean result;
	result = editing_tools_redeye_tool_on_size_slider_adjust ((EditingToolsRedeyeTool*) self, scroll);
#line 2112 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 14241 "EditingTools.c"
}


static void editing_tools_redeye_tool_bind_window_handlers (EditingToolsRedeyeTool* self) {
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp0_;
	GtkButton* _tmp1_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp2_;
	GtkButton* _tmp3_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp4_;
	GtkScale* _tmp5_;
#line 2109 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2110 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->redeye_tool_window;
#line 2110 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->apply_button;
#line 2110 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp1_, "clicked", (GCallback) _editing_tools_redeye_tool_on_apply_gtk_button_clicked, self);
#line 2111 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->redeye_tool_window;
#line 2111 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->close_button;
#line 2111 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp3_, "clicked", (GCallback) _editing_tools_redeye_tool_on_close_gtk_button_clicked, self);
#line 2112 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->redeye_tool_window;
#line 2112 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_->slider;
#line 2112 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, gtk_range_get_type (), GtkRange), "change-value", (GCallback) _editing_tools_redeye_tool_on_size_slider_adjust_gtk_range_change_value, self);
#line 14272 "EditingTools.c"
}


static void editing_tools_redeye_tool_unbind_window_handlers (EditingToolsRedeyeTool* self) {
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp0_;
	GtkButton* _tmp1_;
	guint _tmp2_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp3_;
	GtkButton* _tmp4_;
	guint _tmp5_;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp6_;
	GtkScale* _tmp7_;
	guint _tmp8_;
#line 2115 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_REDEYE_TOOL (self));
#line 2116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->redeye_tool_window;
#line 2116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->apply_button;
#line 2116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp2_, NULL, FALSE);
#line 2116 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _editing_tools_redeye_tool_on_apply_gtk_button_clicked, self);
#line 2117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->redeye_tool_window;
#line 2117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->close_button;
#line 2117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp5_, NULL, FALSE);
#line 2117 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp4_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _editing_tools_redeye_tool_on_close_gtk_button_clicked, self);
#line 2118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->redeye_tool_window;
#line 2118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_->slider;
#line 2118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("change-value", gtk_range_get_type (), &_tmp8_, NULL, FALSE);
#line 2118 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp8_, 0, NULL, (GCallback) _editing_tools_redeye_tool_on_size_slider_adjust_gtk_range_change_value, self);
#line 14312 "EditingTools.c"
}


static EditingToolsEditingToolWindow* editing_tools_redeye_tool_real_get_tool_window (EditingToolsEditingTool* base) {
	EditingToolsRedeyeTool * self;
	EditingToolsEditingToolWindow* result = NULL;
	EditingToolsRedeyeToolRedeyeToolWindow* _tmp0_;
	EditingToolsEditingToolWindow* _tmp1_;
#line 2121 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->redeye_tool_window;
#line 2122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow));
#line 2122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 2122 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 14331 "EditingTools.c"
}


static void editing_tools_redeye_tool_real_paint (EditingToolsEditingTool* base, cairo_t* ctx) {
	EditingToolsRedeyeTool * self;
	GdkPixbuf* _tmp0_ = NULL;
	GdkPixbuf* _tmp1_;
	EditingToolsPhotoCanvas* _tmp6_;
	EditingToolsRedeyeInstance active_inst = {0};
	EditingToolsRedeyeInstance _tmp7_;
	EditingToolsPhotoCanvas* _tmp8_;
	EditingToolsRedeyeInstance _tmp9_;
	GdkPoint _tmp10_;
	GdkPoint _tmp11_ = {0};
	EditingToolsRedeyeInstance _tmp12_;
#line 2125 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2125 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->current_pixbuf;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_ != NULL) {
#line 14355 "EditingTools.c"
		GdkPixbuf* _tmp2_;
		GdkPixbuf* _tmp3_;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->current_pixbuf;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _g_object_ref0 (_tmp2_);
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp0_);
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = _tmp3_;
#line 14366 "EditingTools.c"
	} else {
		EditingToolsPhotoCanvas* _tmp4_;
		GdkPixbuf* _tmp5_;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp4_);
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp0_);
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = _tmp5_;
#line 14378 "EditingTools.c"
	}
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2126 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_paint_pixbuf (_tmp6_, _tmp0_);
#line 2130 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = self->priv->user_interaction_instance;
#line 2130 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_inst = _tmp7_;
#line 2131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->user_interaction_instance;
#line 2131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_.center;
#line 2131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_user_to_active_point (_tmp8_, &_tmp10_, &_tmp11_);
#line 2131 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	active_inst.center = _tmp11_;
#line 2133 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = active_inst;
#line 2133 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_draw_redeye_instance (self, &_tmp12_);
#line 2125 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp0_);
#line 14404 "EditingTools.c"
}


static void editing_tools_redeye_tool_real_on_left_click (EditingToolsEditingTool* base, gint x, gint y) {
	EditingToolsRedeyeTool * self;
	GdkRectangle bounds_rect = {0};
	EditingToolsRedeyeInstance _tmp0_;
	GdkRectangle _tmp1_ = {0};
	gint _tmp2_;
	gint _tmp3_;
	GdkRectangle _tmp4_;
	gboolean _tmp5_;
#line 2136 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->user_interaction_instance;
#line 2137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_instance_to_bounds_rect (&_tmp0_, &_tmp1_);
#line 2137 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	bounds_rect = _tmp1_;
#line 2140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = x;
#line 2140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = y;
#line 2140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = bounds_rect;
#line 2140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = coord_in_rectangle (_tmp2_, _tmp3_, &_tmp4_);
#line 2140 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_) {
#line 14435 "EditingTools.c"
		gint _tmp6_;
		gint _tmp7_;
		EditingToolsRedeyeInstance _tmp8_;
		GdkPoint _tmp9_;
#line 2141 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->is_reticle_move_in_progress = TRUE;
#line 2142 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = x;
#line 2142 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->reticle_move_mouse_start_point.x = _tmp6_;
#line 2143 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = y;
#line 2143 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->reticle_move_mouse_start_point.y = _tmp7_;
#line 2144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = self->priv->user_interaction_instance;
#line 2144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_.center;
#line 2144 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->reticle_move_anchor = _tmp9_;
#line 14456 "EditingTools.c"
	}
}


static void editing_tools_redeye_tool_real_on_left_released (EditingToolsEditingTool* base, gint x, gint y) {
	EditingToolsRedeyeTool * self;
#line 2148 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2149 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->is_reticle_move_in_progress = FALSE;
#line 14467 "EditingTools.c"
}


static void editing_tools_redeye_tool_real_on_motion (EditingToolsEditingTool* base, gint x, gint y, GdkModifierType mask) {
	EditingToolsRedeyeTool * self;
	gboolean _tmp0_;
#line 2152 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2153 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->is_reticle_move_in_progress;
#line 2153 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 14480 "EditingTools.c"
		GdkRectangle active_region_rect = {0};
		EditingToolsPhotoCanvas* _tmp1_;
		GdkRectangle _tmp2_ = {0};
		gint x_clamp_low = 0;
		GdkRectangle _tmp3_;
		gint _tmp4_;
		EditingToolsRedeyeInstance _tmp5_;
		gint _tmp6_;
		gint y_clamp_low = 0;
		GdkRectangle _tmp7_;
		gint _tmp8_;
		EditingToolsRedeyeInstance _tmp9_;
		gint _tmp10_;
		gint x_clamp_high = 0;
		GdkRectangle _tmp11_;
		gint _tmp12_;
		GdkRectangle _tmp13_;
		gint _tmp14_;
		EditingToolsRedeyeInstance _tmp15_;
		gint _tmp16_;
		gint y_clamp_high = 0;
		GdkRectangle _tmp17_;
		gint _tmp18_;
		GdkRectangle _tmp19_;
		gint _tmp20_;
		EditingToolsRedeyeInstance _tmp21_;
		gint _tmp22_;
		gint delta_x = 0;
		gint _tmp23_;
		GdkPoint _tmp24_;
		gint _tmp25_;
		gint delta_y = 0;
		gint _tmp26_;
		GdkPoint _tmp27_;
		gint _tmp28_;
		GdkPoint _tmp29_;
		gint _tmp30_;
		gint _tmp31_;
		GdkPoint _tmp32_;
		gint _tmp33_;
		gint _tmp34_;
		GdkPoint _tmp35_;
		gint _tmp36_;
		gint _tmp37_;
		gint _tmp38_;
		gint _tmp39_;
		gint _tmp40_;
		GdkPoint _tmp41_;
		gint _tmp42_;
		gint _tmp43_;
		gint _tmp44_;
		gint _tmp45_;
		gint _tmp46_;
		EditingToolsPhotoCanvas* _tmp47_;
#line 2155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_get_scaled_pixbuf_position (_tmp1_, &_tmp2_);
#line 2155 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		active_region_rect = _tmp2_;
#line 2158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = active_region_rect;
#line 2158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = _tmp3_.x;
#line 2158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->user_interaction_instance;
#line 2158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_.radius;
#line 2158 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x_clamp_low = (_tmp4_ + _tmp6_) + 1;
#line 2160 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = active_region_rect;
#line 2160 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = _tmp7_.y;
#line 2160 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = self->priv->user_interaction_instance;
#line 2160 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = _tmp9_.radius;
#line 2160 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y_clamp_low = (_tmp8_ + _tmp10_) + 1;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = active_region_rect;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = _tmp11_.x;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp13_ = active_region_rect;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp14_ = _tmp13_.width;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp15_ = self->priv->user_interaction_instance;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp16_ = _tmp15_.radius;
#line 2162 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		x_clamp_high = ((_tmp12_ + _tmp14_) - _tmp16_) - 1;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp17_ = active_region_rect;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp18_ = _tmp17_.y;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp19_ = active_region_rect;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp20_ = _tmp19_.height;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp21_ = self->priv->user_interaction_instance;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp22_ = _tmp21_.radius;
#line 2165 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		y_clamp_high = ((_tmp18_ + _tmp20_) - _tmp22_) - 1;
#line 2169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp23_ = x;
#line 2169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp24_ = self->priv->reticle_move_mouse_start_point;
#line 2169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp25_ = _tmp24_.x;
#line 2169 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		delta_x = _tmp23_ - _tmp25_;
#line 2170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp26_ = y;
#line 2170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp27_ = self->priv->reticle_move_mouse_start_point;
#line 2170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp28_ = _tmp27_.y;
#line 2170 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		delta_y = _tmp26_ - _tmp28_;
#line 2172 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp29_ = self->priv->reticle_move_anchor;
#line 2172 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp30_ = _tmp29_.x;
#line 2172 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp31_ = delta_x;
#line 2172 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->user_interaction_instance.center.x = _tmp30_ + _tmp31_;
#line 2174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp32_ = self->priv->reticle_move_anchor;
#line 2174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp33_ = _tmp32_.y;
#line 2174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp34_ = delta_y;
#line 2174 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->user_interaction_instance.center.y = _tmp33_ + _tmp34_;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp35_ = self->priv->reticle_move_anchor;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp36_ = _tmp35_.x;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp37_ = delta_x;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp38_ = x_clamp_low;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp39_ = x_clamp_high;
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp40_ = CLAMP (_tmp36_ + _tmp37_, _tmp38_, _tmp39_);
#line 2177 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->user_interaction_instance.center.x = _tmp40_;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp41_ = self->priv->reticle_move_anchor;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp42_ = _tmp41_.y;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp43_ = delta_y;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp44_ = y_clamp_low;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp45_ = y_clamp_high;
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp46_ = CLAMP (_tmp42_ + _tmp43_, _tmp44_, _tmp45_);
#line 2180 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->user_interaction_instance.center.y = _tmp46_;
#line 2184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp47_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2184 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_photo_canvas_repaint (_tmp47_);
#line 14653 "EditingTools.c"
	} else {
		GdkRectangle bounds = {0};
		EditingToolsRedeyeInstance _tmp48_;
		GdkRectangle _tmp49_ = {0};
		gint _tmp50_;
		gint _tmp51_;
		GdkRectangle _tmp52_;
		gboolean _tmp53_;
#line 2186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp48_ = self->priv->user_interaction_instance;
#line 2186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_redeye_instance_to_bounds_rect (&_tmp48_, &_tmp49_);
#line 2186 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		bounds = _tmp49_;
#line 2189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp50_ = x;
#line 2189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp51_ = y;
#line 2189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp52_ = bounds;
#line 2189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp53_ = coord_in_rectangle (_tmp50_, _tmp51_, &_tmp52_);
#line 2189 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp53_) {
#line 14678 "EditingTools.c"
			EditingToolsPhotoCanvas* _tmp54_;
			GdkWindow* _tmp55_;
			GdkWindow* _tmp56_;
			GdkCursor* _tmp57_;
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp54_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp55_ = editing_tools_photo_canvas_get_drawing_window (_tmp54_);
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp56_ = _tmp55_;
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp57_ = self->priv->cached_grab_cursor;
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gdk_window_set_cursor (_tmp56_, _tmp57_);
#line 2190 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (_tmp56_);
#line 14695 "EditingTools.c"
		} else {
			EditingToolsPhotoCanvas* _tmp58_;
			GdkWindow* _tmp59_;
			GdkWindow* _tmp60_;
			GdkCursor* _tmp61_;
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp58_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp59_ = editing_tools_photo_canvas_get_drawing_window (_tmp58_);
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp60_ = _tmp59_;
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp61_ = self->priv->cached_arrow_cursor;
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gdk_window_set_cursor (_tmp60_, _tmp61_);
#line 2192 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_g_object_unref0 (_tmp60_);
#line 14713 "EditingTools.c"
		}
	}
}


static gboolean editing_tools_redeye_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event) {
	EditingToolsRedeyeTool * self;
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GdkEventKey* _tmp2_;
	guint _tmp3_;
	const gchar* _tmp4_;
	GdkEventKey* _tmp11_;
	gboolean _tmp12_;
#line 2197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 2197 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = event;
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->keyval;
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gdk_keyval_name (_tmp3_);
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_strcmp0 (_tmp4_, "KP_Enter") == 0) {
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = TRUE;
#line 14743 "EditingTools.c"
	} else {
		GdkEventKey* _tmp5_;
		guint _tmp6_;
		const gchar* _tmp7_;
#line 2199 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = event;
#line 2199 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_->keyval;
#line 2199 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = gdk_keyval_name (_tmp6_);
#line 2199 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = g_strcmp0 (_tmp7_, "Enter") == 0;
#line 14756 "EditingTools.c"
	}
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = TRUE;
#line 14762 "EditingTools.c"
	} else {
		GdkEventKey* _tmp8_;
		guint _tmp9_;
		const gchar* _tmp10_;
#line 2200 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = event;
#line 2200 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_->keyval;
#line 2200 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = gdk_keyval_name (_tmp9_);
#line 2200 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = g_strcmp0 (_tmp10_, "Return") == 0;
#line 14775 "EditingTools.c"
	}
#line 2198 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 2201 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_redeye_tool_on_close (self);
#line 2202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 2202 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 14785 "EditingTools.c"
	}
#line 2205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = event;
#line 2205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_redeye_tool_parent_class)->on_keypress (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp11_);
#line 2205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp12_;
#line 2205 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 14795 "EditingTools.c"
}


static EditingToolsRedeyeToolRedeyeToolWindow* editing_tools_redeye_tool_redeye_tool_window_construct (GType object_type, GtkWindow* container) {
	EditingToolsRedeyeToolRedeyeToolWindow * self = NULL;
	GtkWindow* _tmp0_;
	GtkScale* _tmp1_;
	GtkScale* _tmp2_;
	GtkButton* _tmp3_;
	GtkButton* _tmp4_;
	GtkButton* _tmp5_;
	GtkButton* _tmp6_;
	GtkBox* layout = NULL;
	GtkBox* _tmp7_;
	GtkLabel* _tmp8_;
	GtkScale* _tmp9_;
	GtkButton* _tmp10_;
	GtkButton* _tmp11_;
#line 1889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WINDOW (container), NULL);
#line 1890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = container;
#line 1890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsRedeyeToolRedeyeToolWindow*) editing_tools_editing_tool_window_construct (object_type, _tmp0_);
#line 1892 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->slider;
#line 1892 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_widget_get_type (), GtkWidget), 80, -1);
#line 1893 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->slider;
#line 1893 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp2_, FALSE);
#line 1895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->close_button;
#line 1895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_tooltip_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_widget_get_type (), GtkWidget), _ ("Close the red-eye tool"));
#line 1896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->close_button;
#line 1896 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_button_set_image_position (_tmp4_, GTK_POS_LEFT);
#line 1898 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->apply_button;
#line 1898 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_tooltip_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, gtk_widget_get_type (), GtkWidget), _ ("Remove any red-eye effects in the selected region"));
#line 1899 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->apply_button;
#line 1899 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_button_set_image_position (_tmp6_, GTK_POS_LEFT);
#line 1901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_CONTROL_SPACING);
#line 1901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp7_);
#line 1901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	layout = _tmp7_;
#line 1902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->slider_label;
#line 1902 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (layout, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, gtk_widget_get_type (), GtkWidget));
#line 1903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->slider;
#line 1903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (layout, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, gtk_widget_get_type (), GtkWidget));
#line 1904 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->close_button;
#line 1904 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (layout, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, gtk_widget_get_type (), GtkWidget));
#line 1905 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->apply_button;
#line 1905 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (layout, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_widget_get_type (), GtkWidget));
#line 1907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (layout, gtk_widget_get_type (), GtkWidget));
#line 1889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (layout);
#line 1889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 14872 "EditingTools.c"
}


static EditingToolsRedeyeToolRedeyeToolWindow* editing_tools_redeye_tool_redeye_tool_window_new (GtkWindow* container) {
#line 1889 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_redeye_tool_redeye_tool_window_construct (EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, container);
#line 14879 "EditingTools.c"
}


static void editing_tools_redeye_tool_redeye_tool_window_class_init (EditingToolsRedeyeToolRedeyeToolWindowClass * klass) {
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_redeye_tool_window_parent_class = g_type_class_peek_parent (klass);
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsRedeyeToolRedeyeToolWindowPrivate));
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_redeye_tool_redeye_tool_window_finalize;
#line 14890 "EditingTools.c"
}


static void editing_tools_redeye_tool_redeye_tool_window_instance_init (EditingToolsRedeyeToolRedeyeToolWindow * self) {
	GtkLabel* _tmp0_;
	GtkButton* _tmp1_;
	GtkButton* _tmp2_;
	GtkScale* _tmp3_;
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_REDEYE_TOOL_REDEYE_TOOL_WINDOW_GET_PRIVATE (self);
#line 1880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Size:"));
#line 1880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp0_);
#line 1880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->slider_label = _tmp0_;
#line 1882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = (GtkButton*) gtk_button_new_with_mnemonic (RESOURCES_APPLY_LABEL);
#line 1882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp1_);
#line 1882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->apply_button = _tmp1_;
#line 1884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = (GtkButton*) gtk_button_new_with_mnemonic (RESOURCES_CANCEL_LABEL);
#line 1884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp2_);
#line 1884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->close_button = _tmp2_;
#line 1886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) EDITING_TOOLS_REDEYE_INSTANCE_MIN_RADIUS, (gdouble) EDITING_TOOLS_REDEYE_INSTANCE_MAX_RADIUS, 1.0);
#line 1886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp3_);
#line 1886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->slider = _tmp3_;
#line 14925 "EditingTools.c"
}


static void editing_tools_redeye_tool_redeye_tool_window_finalize (GObject * obj) {
	EditingToolsRedeyeToolRedeyeToolWindow * self;
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_REDEYE_TOOL_TYPE_REDEYE_TOOL_WINDOW, EditingToolsRedeyeToolRedeyeToolWindow);
#line 1880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->slider_label);
#line 1882 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->apply_button);
#line 1884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->close_button);
#line 1886 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->slider);
#line 1877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_redeye_tool_redeye_tool_window_parent_class)->finalize (obj);
#line 14943 "EditingTools.c"
}


static GType editing_tools_redeye_tool_redeye_tool_window_get_type (void) {
	static volatile gsize editing_tools_redeye_tool_redeye_tool_window_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_redeye_tool_redeye_tool_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsRedeyeToolRedeyeToolWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_redeye_tool_redeye_tool_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsRedeyeToolRedeyeToolWindow), 0, (GInstanceInitFunc) editing_tools_redeye_tool_redeye_tool_window_instance_init, NULL };
		GType editing_tools_redeye_tool_redeye_tool_window_type_id;
		editing_tools_redeye_tool_redeye_tool_window_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, "EditingToolsRedeyeToolRedeyeToolWindow", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_redeye_tool_redeye_tool_window_type_id__volatile, editing_tools_redeye_tool_redeye_tool_window_type_id);
	}
	return editing_tools_redeye_tool_redeye_tool_window_type_id__volatile;
}


static void editing_tools_redeye_tool_class_init (EditingToolsRedeyeToolClass * klass) {
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_redeye_tool_parent_class = g_type_class_peek_parent (klass);
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->finalize = editing_tools_redeye_tool_finalize;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsRedeyeToolPrivate));
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->activate = (void (*) (EditingToolsEditingTool *, EditingToolsPhotoCanvas*)) editing_tools_redeye_tool_real_activate;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->deactivate = (void (*) (EditingToolsEditingTool *)) editing_tools_redeye_tool_real_deactivate;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_tool_window = (EditingToolsEditingToolWindow* (*) (EditingToolsEditingTool *)) editing_tools_redeye_tool_real_get_tool_window;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->paint = (void (*) (EditingToolsEditingTool *, cairo_t*)) editing_tools_redeye_tool_real_paint;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_click = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_redeye_tool_real_on_left_click;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_left_released = (void (*) (EditingToolsEditingTool *, gint, gint)) editing_tools_redeye_tool_real_on_left_released;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_motion = (void (*) (EditingToolsEditingTool *, gint, gint, GdkModifierType)) editing_tools_redeye_tool_real_on_motion;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_keypress = (gboolean (*) (EditingToolsEditingTool *, GdkEventKey*)) editing_tools_redeye_tool_real_on_keypress;
#line 14982 "EditingTools.c"
}


static void editing_tools_redeye_tool_instance_init (EditingToolsRedeyeTool * self) {
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_REDEYE_TOOL_GET_PRIVATE (self);
#line 1911 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->thin_white_ctx = NULL;
#line 1912 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->wider_gray_ctx = NULL;
#line 1913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->redeye_tool_window = NULL;
#line 1915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->is_reticle_move_in_progress = FALSE;
#line 1921 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->current_pixbuf = NULL;
#line 14999 "EditingTools.c"
}


static void editing_tools_redeye_tool_finalize (EditingToolsEditingTool * obj) {
	EditingToolsRedeyeTool * self;
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_REDEYE_TOOL, EditingToolsRedeyeTool);
#line 1911 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->thin_white_ctx);
#line 1912 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_cairo_destroy0 (self->priv->wider_gray_ctx);
#line 1913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->redeye_tool_window);
#line 1918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->cached_arrow_cursor);
#line 1919 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->cached_grab_cursor);
#line 1921 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->current_pixbuf);
#line 1876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_redeye_tool_parent_class)->finalize (obj);
#line 15021 "EditingTools.c"
}


GType editing_tools_redeye_tool_get_type (void) {
	static volatile gsize editing_tools_redeye_tool_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_redeye_tool_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsRedeyeToolClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_redeye_tool_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsRedeyeTool), 0, (GInstanceInitFunc) editing_tools_redeye_tool_instance_init, NULL };
		GType editing_tools_redeye_tool_type_id;
		editing_tools_redeye_tool_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL, "EditingToolsRedeyeTool", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_redeye_tool_type_id__volatile, editing_tools_redeye_tool_type_id);
	}
	return editing_tools_redeye_tool_type_id__volatile;
}


static EditingToolsAdjustTool* editing_tools_adjust_tool_construct (GType object_type) {
	EditingToolsAdjustTool* self = NULL;
#line 2520 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustTool*) editing_tools_editing_tool_construct (object_type, "AdjustTool");
#line 2519 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 15043 "EditingTools.c"
}


static EditingToolsAdjustTool* editing_tools_adjust_tool_new (void) {
#line 2519 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_adjust_tool_construct (EDITING_TOOLS_TYPE_ADJUST_TOOL);
#line 15050 "EditingTools.c"
}


EditingToolsAdjustTool* editing_tools_adjust_tool_factory (void) {
	EditingToolsAdjustTool* result = NULL;
	EditingToolsAdjustTool* _tmp0_;
#line 2524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_adjust_tool_new ();
#line 2524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp0_;
#line 2524 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 15063 "EditingTools.c"
}


gboolean editing_tools_adjust_tool_is_available (Photo* photo, Scaling* scaling) {
	gboolean result = FALSE;
#line 2527 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), FALSE);
#line 2527 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, FALSE);
#line 2528 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 2528 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 15077 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_photos_altered_data_collection_items_altered (DataCollection* _sender, GeeMap* items, gpointer self) {
#line 2617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_photos_altered ((EditingToolsAdjustTool*) self, items);
#line 15084 "EditingTools.c"
}


static void editing_tools_adjust_tool_real_activate (EditingToolsEditingTool* base, EditingToolsPhotoCanvas* canvas) {
	EditingToolsAdjustTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	GtkWindow* _tmp1_;
	GtkWindow* _tmp2_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp3_;
	Photo* photo = NULL;
	EditingToolsPhotoCanvas* _tmp4_;
	Photo* _tmp5_;
	Photo* _tmp6_;
	PixelTransformationBundle* _tmp7_;
	PixelTransformationBundle* _tmp8_;
	PixelTransformer* _tmp9_;
	PixelTransformer* _tmp10_;
	ExpansionTransformation* expansion_trans = NULL;
	PixelTransformationBundle* _tmp11_;
	PixelTransformation* _tmp12_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp13_;
	RGBHistogramManipulator* _tmp14_;
	ExpansionTransformation* _tmp15_;
	gint _tmp16_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp17_;
	RGBHistogramManipulator* _tmp18_;
	ExpansionTransformation* _tmp19_;
	gint _tmp20_;
	ShadowDetailTransformation* shadows_trans = NULL;
	PixelTransformationBundle* _tmp21_;
	PixelTransformation* _tmp22_;
	PixelTransformer* _tmp23_;
	ShadowDetailTransformation* _tmp24_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp25_;
	GtkScale* _tmp26_;
	ShadowDetailTransformation* _tmp27_;
	gfloat _tmp28_;
	HighlightDetailTransformation* highlights_trans = NULL;
	PixelTransformationBundle* _tmp29_;
	PixelTransformation* _tmp30_;
	PixelTransformer* _tmp31_;
	HighlightDetailTransformation* _tmp32_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp33_;
	GtkScale* _tmp34_;
	HighlightDetailTransformation* _tmp35_;
	gfloat _tmp36_;
	TemperatureTransformation* temp_trans = NULL;
	PixelTransformationBundle* _tmp37_;
	PixelTransformation* _tmp38_;
	PixelTransformer* _tmp39_;
	TemperatureTransformation* _tmp40_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp41_;
	GtkScale* _tmp42_;
	TemperatureTransformation* _tmp43_;
	gfloat _tmp44_;
	TintTransformation* tint_trans = NULL;
	PixelTransformationBundle* _tmp45_;
	PixelTransformation* _tmp46_;
	PixelTransformer* _tmp47_;
	TintTransformation* _tmp48_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp49_;
	GtkScale* _tmp50_;
	TintTransformation* _tmp51_;
	gfloat _tmp52_;
	SaturationTransformation* sat_trans = NULL;
	PixelTransformationBundle* _tmp53_;
	PixelTransformation* _tmp54_;
	PixelTransformer* _tmp55_;
	SaturationTransformation* _tmp56_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp57_;
	GtkScale* _tmp58_;
	SaturationTransformation* _tmp59_;
	gfloat _tmp60_;
	ExposureTransformation* exposure_trans = NULL;
	PixelTransformationBundle* _tmp61_;
	PixelTransformation* _tmp62_;
	PixelTransformer* _tmp63_;
	ExposureTransformation* _tmp64_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp65_;
	GtkScale* _tmp66_;
	ExposureTransformation* _tmp67_;
	gfloat _tmp68_;
	ContrastTransformation* contrast_trans = NULL;
	PixelTransformationBundle* _tmp69_;
	PixelTransformation* _tmp70_;
	PixelTransformer* _tmp71_;
	ContrastTransformation* _tmp72_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp73_;
	GtkScale* _tmp74_;
	ContrastTransformation* _tmp75_;
	gfloat _tmp76_;
	EditingToolsPhotoCanvas* _tmp77_;
	EditingToolsPhotoCanvas* _tmp78_;
	GdkPixbuf* _tmp79_;
	GdkPixbuf* _tmp80_;
	GdkPixbuf* _tmp81_;
	EditingToolsPhotoCanvas* _tmp82_;
	GdkPixbuf* _tmp83_;
	GdkPixbuf* _tmp84_;
	gboolean _tmp85_ = FALSE;
	GdkPixbuf* _tmp86_;
	gint _tmp87_;
	gint _tmp88_;
	gboolean _tmp92_ = FALSE;
	gboolean _tmp93_ = FALSE;
	GdkPixbuf* _tmp94_;
	gint _tmp95_;
	gint _tmp96_;
	GdkPixbuf* _tmp97_;
	gint _tmp98_;
	gint _tmp99_;
	GdkPixbuf* _tmp116_;
	GdkPixbuf* _tmp117_;
	DataCollection* owner = NULL;
	EditingToolsPhotoCanvas* _tmp118_;
	Photo* _tmp119_;
	Photo* _tmp120_;
	DataCollection* _tmp121_;
	DataCollection* _tmp122_;
	DataCollection* _tmp123_;
	EditingToolsPhotoCanvas* _tmp125_;
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_photo_canvas_get_container (_tmp0_);
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_;
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_adjust_tool_adjust_tool_window_new (_tmp2_);
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp3_);
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->adjust_tool_window);
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->adjust_tool_window = _tmp3_;
#line 2532 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 2534 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = canvas;
#line 2534 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = editing_tools_photo_canvas_get_photo (_tmp4_);
#line 2534 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	photo = _tmp5_;
#line 2535 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = photo;
#line 2535 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = photo_get_color_adjustments (_tmp6_);
#line 2535 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->transformations);
#line 2535 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->transformations = _tmp7_;
#line 2536 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->transformations;
#line 2536 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = pixel_transformation_bundle_generate_transformer (_tmp8_);
#line 2536 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformer_unref0 (self->priv->transformer);
#line 2536 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->transformer = _tmp9_;
#line 2539 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = pixel_transformer_new ();
#line 2539 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformer_unref0 (self->priv->histogram_transformer);
#line 2539 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->histogram_transformer = _tmp10_;
#line 2542 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->transformations;
#line 2542 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = pixel_transformation_bundle_get_transformation (_tmp11_, PIXEL_TRANSFORMATION_TYPE_TONE_EXPANSION);
#line 2542 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	expansion_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, TYPE_EXPANSION_TRANSFORMATION, ExpansionTransformation);
#line 2544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->priv->adjust_tool_window;
#line 2544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = _tmp13_->histogram_manipulator;
#line 2544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = expansion_trans;
#line 2544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = expansion_transformation_get_black_point (_tmp15_);
#line 2544 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rgb_histogram_manipulator_set_left_nub_position (_tmp14_, _tmp16_);
#line 2546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = self->priv->adjust_tool_window;
#line 2546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = _tmp17_->histogram_manipulator;
#line 2546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = expansion_trans;
#line 2546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = expansion_transformation_get_white_point (_tmp19_);
#line 2546 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	rgb_histogram_manipulator_set_right_nub_position (_tmp18_, _tmp20_);
#line 2550 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->transformations;
#line 2550 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = pixel_transformation_bundle_get_transformation (_tmp21_, PIXEL_TRANSFORMATION_TYPE_SHADOWS);
#line 2550 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	shadows_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, TYPE_SHADOW_DETAIL_TRANSFORMATION, ShadowDetailTransformation);
#line 2552 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->priv->histogram_transformer;
#line 2552 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = shadows_trans;
#line 2552 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp23_, G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2553 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->priv->adjust_tool_window;
#line 2553 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = _tmp25_->shadows_slider;
#line 2553 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = shadows_trans;
#line 2553 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = shadow_detail_transformation_get_parameter (_tmp27_);
#line 2553 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_range_get_type (), GtkRange), (gdouble) _tmp28_);
#line 2556 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->priv->transformations;
#line 2556 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = pixel_transformation_bundle_get_transformation (_tmp29_, PIXEL_TRANSFORMATION_TYPE_HIGHLIGHTS);
#line 2556 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	highlights_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp30_, TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION, HighlightDetailTransformation);
#line 2558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = self->priv->histogram_transformer;
#line 2558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = highlights_trans;
#line 2558 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp31_, G_TYPE_CHECK_INSTANCE_CAST (_tmp32_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->adjust_tool_window;
#line 2559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_->highlights_slider;
#line 2559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = highlights_trans;
#line 2559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = highlight_detail_transformation_get_parameter (_tmp35_);
#line 2559 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_range_get_type (), GtkRange), (gdouble) _tmp36_);
#line 2562 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = self->priv->transformations;
#line 2562 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = pixel_transformation_bundle_get_transformation (_tmp37_, PIXEL_TRANSFORMATION_TYPE_TEMPERATURE);
#line 2562 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	temp_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, TYPE_TEMPERATURE_TRANSFORMATION, TemperatureTransformation);
#line 2564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = self->priv->histogram_transformer;
#line 2564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = temp_trans;
#line 2564 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp39_, G_TYPE_CHECK_INSTANCE_CAST (_tmp40_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41_ = self->priv->adjust_tool_window;
#line 2565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = _tmp41_->temperature_slider;
#line 2565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43_ = temp_trans;
#line 2565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp44_ = temperature_transformation_get_parameter (_tmp43_);
#line 2565 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp42_, gtk_range_get_type (), GtkRange), (gdouble) _tmp44_);
#line 2567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45_ = self->priv->transformations;
#line 2567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp46_ = pixel_transformation_bundle_get_transformation (_tmp45_, PIXEL_TRANSFORMATION_TYPE_TINT);
#line 2567 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	tint_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp46_, TYPE_TINT_TRANSFORMATION, TintTransformation);
#line 2569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp47_ = self->priv->histogram_transformer;
#line 2569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp48_ = tint_trans;
#line 2569 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp47_, G_TYPE_CHECK_INSTANCE_CAST (_tmp48_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp49_ = self->priv->adjust_tool_window;
#line 2570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp50_ = _tmp49_->tint_slider;
#line 2570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp51_ = tint_trans;
#line 2570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp52_ = tint_transformation_get_parameter (_tmp51_);
#line 2570 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp50_, gtk_range_get_type (), GtkRange), (gdouble) _tmp52_);
#line 2573 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp53_ = self->priv->transformations;
#line 2573 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp54_ = pixel_transformation_bundle_get_transformation (_tmp53_, PIXEL_TRANSFORMATION_TYPE_SATURATION);
#line 2573 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	sat_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp54_, TYPE_SATURATION_TRANSFORMATION, SaturationTransformation);
#line 2575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp55_ = self->priv->histogram_transformer;
#line 2575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp56_ = sat_trans;
#line 2575 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp55_, G_TYPE_CHECK_INSTANCE_CAST (_tmp56_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp57_ = self->priv->adjust_tool_window;
#line 2576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp58_ = _tmp57_->saturation_slider;
#line 2576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp59_ = sat_trans;
#line 2576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp60_ = saturation_transformation_get_parameter (_tmp59_);
#line 2576 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp58_, gtk_range_get_type (), GtkRange), (gdouble) _tmp60_);
#line 2579 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp61_ = self->priv->transformations;
#line 2579 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp62_ = pixel_transformation_bundle_get_transformation (_tmp61_, PIXEL_TRANSFORMATION_TYPE_EXPOSURE);
#line 2579 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	exposure_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp62_, TYPE_EXPOSURE_TRANSFORMATION, ExposureTransformation);
#line 2581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp63_ = self->priv->histogram_transformer;
#line 2581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp64_ = exposure_trans;
#line 2581 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp63_, G_TYPE_CHECK_INSTANCE_CAST (_tmp64_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp65_ = self->priv->adjust_tool_window;
#line 2582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp66_ = _tmp65_->exposure_slider;
#line 2582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp67_ = exposure_trans;
#line 2582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp68_ = exposure_transformation_get_parameter (_tmp67_);
#line 2582 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp66_, gtk_range_get_type (), GtkRange), (gdouble) _tmp68_);
#line 2585 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp69_ = self->priv->transformations;
#line 2585 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp70_ = pixel_transformation_bundle_get_transformation (_tmp69_, PIXEL_TRANSFORMATION_TYPE_CONTRAST);
#line 2585 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	contrast_trans = G_TYPE_CHECK_INSTANCE_CAST (_tmp70_, TYPE_CONTRAST_TRANSFORMATION, ContrastTransformation);
#line 2587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp71_ = self->priv->histogram_transformer;
#line 2587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp72_ = contrast_trans;
#line 2587 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_attach_transformation (_tmp71_, G_TYPE_CHECK_INSTANCE_CAST (_tmp72_, TYPE_PIXEL_TRANSFORMATION, PixelTransformation));
#line 2588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp73_ = self->priv->adjust_tool_window;
#line 2588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp74_ = _tmp73_->contrast_slider;
#line 2588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp75_ = contrast_trans;
#line 2588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp76_ = contrast_transformation_get_parameter (_tmp75_);
#line 2588 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp74_, gtk_range_get_type (), GtkRange), (gdouble) _tmp76_);
#line 2590 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp77_ = canvas;
#line 2590 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_bind_canvas_handlers (self, _tmp77_);
#line 2591 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_bind_window_handlers (self);
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp78_ = canvas;
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp79_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp78_);
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp80_ = _tmp79_;
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp81_ = gdk_pixbuf_copy (_tmp80_);
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->draw_to_pixbuf);
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->draw_to_pixbuf = _tmp81_;
#line 2593 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp80_);
#line 2594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp82_ = canvas;
#line 2594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp83_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp82_);
#line 2594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp84_ = _tmp83_;
#line 2594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_init_fp_pixel_cache (self, _tmp84_);
#line 2594 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp84_);
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp86_ = self->priv->draw_to_pixbuf;
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp87_ = gdk_pixbuf_get_width (_tmp86_);
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp88_ = _tmp87_;
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp88_ == 1) {
#line 15472 "EditingTools.c"
		GdkPixbuf* _tmp89_;
		gint _tmp90_;
		gint _tmp91_;
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp89_ = self->priv->draw_to_pixbuf;
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp90_ = gdk_pixbuf_get_height (_tmp89_);
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp91_ = _tmp90_;
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp85_ = _tmp91_ == 1;
#line 15484 "EditingTools.c"
	} else {
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp85_ = FALSE;
#line 15488 "EditingTools.c"
	}
#line 2600 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp85_) {
#line 2601 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->disable_histogram_refresh = TRUE;
#line 15494 "EditingTools.c"
	}
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp94_ = self->priv->draw_to_pixbuf;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp95_ = gdk_pixbuf_get_width (_tmp94_);
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp96_ = _tmp95_;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp97_ = self->priv->draw_to_pixbuf;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp98_ = gdk_pixbuf_get_height (_tmp97_);
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp99_ = _tmp98_;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if ((_tmp96_ * _tmp99_) > 8192) {
#line 15510 "EditingTools.c"
		GdkPixbuf* _tmp100_;
		gint _tmp101_;
		gint _tmp102_;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp100_ = self->priv->draw_to_pixbuf;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp101_ = gdk_pixbuf_get_width (_tmp100_);
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp102_ = _tmp101_;
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp93_ = _tmp102_ > 1;
#line 15522 "EditingTools.c"
	} else {
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp93_ = FALSE;
#line 15526 "EditingTools.c"
	}
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp93_) {
#line 15530 "EditingTools.c"
		GdkPixbuf* _tmp103_;
		gint _tmp104_;
		gint _tmp105_;
#line 2607 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp103_ = self->priv->draw_to_pixbuf;
#line 2607 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp104_ = gdk_pixbuf_get_height (_tmp103_);
#line 2607 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp105_ = _tmp104_;
#line 2607 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp92_ = _tmp105_ > 1;
#line 15542 "EditingTools.c"
	} else {
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp92_ = FALSE;
#line 15546 "EditingTools.c"
	}
#line 2606 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp92_) {
#line 15550 "EditingTools.c"
		GdkPixbuf* _tmp106_;
		GdkPixbuf* _tmp107_;
		gint _tmp108_;
		gint _tmp109_;
		GdkPixbuf* _tmp110_;
		gint _tmp111_;
		gint _tmp112_;
		GdkPixbuf* _tmp113_;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp106_ = self->priv->draw_to_pixbuf;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp107_ = self->priv->draw_to_pixbuf;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp108_ = gdk_pixbuf_get_width (_tmp107_);
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp109_ = _tmp108_;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp110_ = self->priv->draw_to_pixbuf;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp111_ = gdk_pixbuf_get_height (_tmp110_);
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp112_ = _tmp111_;
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp113_ = gdk_pixbuf_scale_simple (_tmp106_, _tmp109_ / 2, _tmp112_ / 2, GDK_INTERP_HYPER);
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->histogram_pixbuf);
#line 2608 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->histogram_pixbuf = _tmp113_;
#line 15579 "EditingTools.c"
	} else {
		GdkPixbuf* _tmp114_;
		GdkPixbuf* _tmp115_;
#line 2611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp114_ = self->priv->draw_to_pixbuf;
#line 2611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp115_ = gdk_pixbuf_copy (_tmp114_);
#line 2611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->histogram_pixbuf);
#line 2611 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->histogram_pixbuf = _tmp115_;
#line 15591 "EditingTools.c"
	}
#line 2613 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp116_ = self->priv->histogram_pixbuf;
#line 2613 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp117_ = gdk_pixbuf_copy (_tmp116_);
#line 2613 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->virgin_histogram_pixbuf);
#line 2613 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->virgin_histogram_pixbuf = _tmp117_;
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp118_ = canvas;
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp119_ = editing_tools_photo_canvas_get_photo (_tmp118_);
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp120_ = _tmp119_;
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp121_ = data_object_get_membership (G_TYPE_CHECK_INSTANCE_CAST (_tmp120_, TYPE_DATA_OBJECT, DataObject));
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp122_ = _tmp121_;
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp120_);
#line 2615 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	owner = _tmp122_;
#line 2616 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp123_ = owner;
#line 2616 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp123_ != NULL) {
#line 15619 "EditingTools.c"
		DataCollection* _tmp124_;
#line 2617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp124_ = owner;
#line 2617 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_connect (_tmp124_, "items-altered", (GCallback) _editing_tools_adjust_tool_on_photos_altered_data_collection_items_altered, self);
#line 15625 "EditingTools.c"
	}
#line 2619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp125_ = canvas;
#line 2619 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_adjust_tool_parent_class)->activate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp125_);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_data_collection_unref0 (owner);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (contrast_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (exposure_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (sat_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (tint_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (temp_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (highlights_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (shadows_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (expansion_trans);
#line 2531 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (photo);
#line 15651 "EditingTools.c"
}


static EditingToolsEditingToolWindow* editing_tools_adjust_tool_real_get_tool_window (EditingToolsEditingTool* base) {
	EditingToolsAdjustTool * self;
	EditingToolsEditingToolWindow* result = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	EditingToolsEditingToolWindow* _tmp1_;
#line 2622 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, EditingToolsEditingToolWindow));
#line 2623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp1_;
#line 2623 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 15670 "EditingTools.c"
}


static void editing_tools_adjust_tool_real_deactivate (EditingToolsEditingTool* base) {
	EditingToolsAdjustTool * self;
	EditingToolsPhotoCanvas* _tmp0_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp10_;
#line 2626 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2627 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2627 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != NULL) {
#line 15684 "EditingTools.c"
		DataCollection* owner = NULL;
		EditingToolsPhotoCanvas* _tmp1_;
		Photo* _tmp2_;
		Photo* _tmp3_;
		DataCollection* _tmp4_;
		DataCollection* _tmp5_;
		DataCollection* _tmp6_;
		EditingToolsPhotoCanvas* _tmp9_;
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = editing_tools_photo_canvas_get_photo (_tmp1_);
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_;
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = data_object_get_membership (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_DATA_OBJECT, DataObject));
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = _tmp4_;
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp3_);
#line 2628 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		owner = _tmp5_;
#line 2629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = owner;
#line 2629 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (_tmp6_ != NULL) {
#line 15711 "EditingTools.c"
			DataCollection* _tmp7_;
			guint _tmp8_;
#line 2630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = owner;
#line 2630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			g_signal_parse_name ("items-altered", TYPE_DATA_COLLECTION, &_tmp8_, NULL, FALSE);
#line 2630 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			g_signal_handlers_disconnect_matched (_tmp7_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp8_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_photos_altered_data_collection_items_altered, self);
#line 15720 "EditingTools.c"
		}
#line 2632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2632 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_adjust_tool_unbind_canvas_handlers (self, _tmp9_);
#line 2627 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_data_collection_unref0 (owner);
#line 15728 "EditingTools.c"
	}
#line 2635 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->adjust_tool_window;
#line 2635 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp10_ != NULL) {
#line 15734 "EditingTools.c"
		EditingToolsAdjustToolAdjustToolWindow* _tmp11_;
		EditingToolsAdjustToolAdjustToolWindow* _tmp12_;
#line 2636 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_adjust_tool_unbind_window_handlers (self);
#line 2637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = self->priv->adjust_tool_window;
#line 2637 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_hide (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_widget_get_type (), GtkWidget));
#line 2638 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp12_ = self->priv->adjust_tool_window;
#line 2638 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_widget_destroy (G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, gtk_widget_get_type (), GtkWidget));
#line 2639 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (self->priv->adjust_tool_window);
#line 2639 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->adjust_tool_window = NULL;
#line 15751 "EditingTools.c"
	}
#line 2642 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->draw_to_pixbuf);
#line 2642 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->draw_to_pixbuf = NULL;
#line 2643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = (g_free (self->priv->fp_pixel_cache), NULL);
#line 2643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = NULL;
#line 2643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache_length1 = 0;
#line 2643 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->_fp_pixel_cache_size_ = self->priv->fp_pixel_cache_length1;
#line 2645 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_adjust_tool_parent_class)->deactivate (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 15767 "EditingTools.c"
}


static void editing_tools_adjust_tool_real_paint (EditingToolsEditingTool* base, cairo_t* ctx) {
	EditingToolsAdjustTool * self;
	gboolean _tmp0_;
	EditingToolsPhotoCanvas* _tmp10_;
	GdkPixbuf* _tmp11_;
#line 2648 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2648 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (ctx != NULL);
#line 2649 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->suppress_effect_redraw;
#line 2649 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!_tmp0_) {
#line 15784 "EditingTools.c"
		PixelTransformer* _tmp1_;
		GdkPixbuf* _tmp2_;
		PixelTransformer* _tmp3_;
		GdkPixbuf* _tmp4_;
		GdkPixbuf* _tmp5_;
		gboolean _tmp6_;
#line 2650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = self->priv->transformer;
#line 2650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = self->priv->draw_to_pixbuf;
#line 2650 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		pixel_transformer_transform_from_fp (_tmp1_, &self->priv->fp_pixel_cache, &self->priv->fp_pixel_cache_length1, _tmp2_);
#line 2651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = self->priv->histogram_transformer;
#line 2651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = self->priv->virgin_histogram_pixbuf;
#line 2651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = self->priv->histogram_pixbuf;
#line 2651 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		pixel_transformer_transform_to_other_pixbuf (_tmp3_, _tmp4_, _tmp5_, NULL);
#line 2653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = self->priv->disable_histogram_refresh;
#line 2653 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (!_tmp6_) {
#line 15809 "EditingTools.c"
			EditingToolsAdjustToolAdjustToolWindow* _tmp7_;
			RGBHistogramManipulator* _tmp8_;
			GdkPixbuf* _tmp9_;
#line 2654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = self->priv->adjust_tool_window;
#line 2654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp8_ = _tmp7_->histogram_manipulator;
#line 2654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp9_ = self->priv->histogram_pixbuf;
#line 2654 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			rgb_histogram_manipulator_update_histogram (_tmp8_, _tmp9_);
#line 15821 "EditingTools.c"
		}
	}
#line 2657 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2657 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->draw_to_pixbuf;
#line 2657 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_paint_pixbuf (_tmp10_, _tmp11_);
#line 15830 "EditingTools.c"
}


static GdkPixbuf* editing_tools_adjust_tool_real_get_display_pixbuf (EditingToolsEditingTool* base, Scaling* scaling, Photo* photo, Dimensions* max_dim, GError** error) {
	EditingToolsAdjustTool * self;
	Dimensions _vala_max_dim = {0};
	GdkPixbuf* result = NULL;
	Photo* _tmp0_;
	gboolean _tmp1_;
	Photo* _tmp2_;
	Dimensions _tmp3_ = {0};
	GdkPixbuf* _tmp4_ = NULL;
	Photo* _tmp5_;
	Scaling _tmp6_;
	GdkPixbuf* _tmp7_;
	GdkPixbuf* _tmp8_;
	GError * _inner_error_ = NULL;
#line 2660 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2660 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (scaling != NULL, NULL);
#line 2660 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), NULL);
#line 2662 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = photo;
#line 2662 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = photo_has_color_adjustments (_tmp0_);
#line 2662 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (!_tmp1_) {
#line 2663 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		dimensions_init (&_vala_max_dim, 0, 0);
#line 2665 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = NULL;
#line 2665 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		if (max_dim) {
#line 2665 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			*max_dim = _vala_max_dim;
#line 15868 "EditingTools.c"
		}
#line 2665 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 15872 "EditingTools.c"
	}
#line 2668 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = photo;
#line 2668 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp3_);
#line 2668 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_max_dim = _tmp3_;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = photo;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = *scaling;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = photo_get_pixbuf_with_options (_tmp5_, &_tmp6_, PHOTO_EXCEPTION_ADJUST, BACKING_FETCH_MODE_BASELINE, &_inner_error_);
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp7_;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_propagate_error (error, _inner_error_);
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return NULL;
#line 15894 "EditingTools.c"
	}
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp4_;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = NULL;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp8_;
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp4_);
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (max_dim) {
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		*max_dim = _vala_max_dim;
#line 15908 "EditingTools.c"
	}
#line 2670 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 15912 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_reset (EditingToolsAdjustTool* self) {
	EditingToolsAdjustToolAdjustResetCommand* command = NULL;
	PixelTransformationBundle* _tmp0_;
	EditingToolsAdjustToolAdjustResetCommand* _tmp1_;
	CommandManager* _tmp2_;
	CommandManager* _tmp3_;
#line 2673 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->transformations;
#line 2674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_adjust_tool_adjust_reset_command_new (self, _tmp0_);
#line 2674 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command = _tmp1_;
#line 2675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = app_window_get_command_manager ();
#line 2675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 2675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_manager_execute (_tmp3_, G_TYPE_CHECK_INSTANCE_CAST (command, TYPE_COMMAND, Command));
#line 2675 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_command_manager_unref0 (_tmp3_);
#line 2673 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (command);
#line 15940 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_ok (EditingToolsAdjustTool* self) {
	EditingToolsEditingToolWindow* _tmp0_;
	EditingToolsEditingToolWindow* _tmp1_;
	EditingToolsPhotoCanvas* _tmp2_;
	Photo* _tmp3_;
	Photo* _tmp4_;
	PixelTransformationBundle* _tmp5_;
	AdjustColorsSingleCommand* _tmp6_;
	AdjustColorsSingleCommand* _tmp7_;
	GdkPixbuf* _tmp8_;
	EditingToolsPhotoCanvas* _tmp9_;
	Photo* _tmp10_;
	Photo* _tmp11_;
	Dimensions _tmp12_ = {0};
#line 2678 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2679 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->suppress_effect_redraw = TRUE;
#line 2681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = editing_tools_editing_tool_get_tool_window (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 2681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 2681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_hide (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_widget_get_type (), GtkWidget));
#line 2681 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp1_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_photo_canvas_get_photo (_tmp2_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->priv->transformations;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = adjust_colors_single_command_new (_tmp4_, _tmp5_, RESOURCES_ADJUST_LABEL, RESOURCES_ADJUST_TOOLTIP);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->draw_to_pixbuf;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = editing_tools_photo_canvas_get_photo (_tmp9_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_;
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	media_source_get_dimensions (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, TYPE_MEDIA_SOURCE, MediaSource), PHOTO_EXCEPTION_NONE, &_tmp12_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_emit (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), editing_tools_editing_tool_signals[EDITING_TOOLS_EDITING_TOOL_APPLIED_SIGNAL], 0, G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, TYPE_COMMAND, Command), _tmp8_, &_tmp12_, FALSE);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp11_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp7_);
#line 2683 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp4_);
#line 16000 "EditingTools.c"
}


static void editing_tools_adjust_tool_update_transformations (EditingToolsAdjustTool* self, PixelTransformationBundle* new_transformations) {
#line 2688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2688 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (IS_PIXEL_TRANSFORMATION_BUNDLE (new_transformations));
#line 16009 "EditingTools.c"
	{
		GeeIterator* _transformation_it = NULL;
		PixelTransformationBundle* _tmp0_;
		GeeIterable* _tmp1_;
		GeeIterable* _tmp2_;
		GeeIterator* _tmp3_;
		GeeIterator* _tmp4_;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = new_transformations;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = pixel_transformation_bundle_get_transformations (_tmp0_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = _tmp1_;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = gee_iterable_iterator (_tmp2_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = _tmp3_;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp2_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_transformation_it = _tmp4_;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		while (TRUE) {
#line 16033 "EditingTools.c"
			GeeIterator* _tmp5_;
			gboolean _tmp6_;
			PixelTransformation* transformation = NULL;
			GeeIterator* _tmp7_;
			gpointer _tmp8_;
			PixelTransformation* _tmp9_;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp5_ = _transformation_it;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp6_ = gee_iterator_next (_tmp5_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (!_tmp6_) {
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 16048 "EditingTools.c"
			}
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = _transformation_it;
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp8_ = gee_iterator_get (_tmp7_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			transformation = (PixelTransformation*) _tmp8_;
#line 2690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp9_ = transformation;
#line 2690 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			editing_tools_adjust_tool_update_transformation (self, _tmp9_);
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_pixel_transformation_unref0 (transformation);
#line 16062 "EditingTools.c"
		}
#line 2689 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_transformation_it);
#line 16066 "EditingTools.c"
	}
}


static void editing_tools_adjust_tool_update_transformation (EditingToolsAdjustTool* self, PixelTransformation* new_transformation) {
	PixelTransformation* old_transformation = NULL;
	PixelTransformationBundle* _tmp0_;
	PixelTransformation* _tmp1_;
	PixelTransformationType _tmp2_;
	PixelTransformation* _tmp3_;
	PixelTransformer* _tmp4_;
	PixelTransformation* _tmp5_;
	PixelTransformation* _tmp6_;
	PixelTransformation* _tmp7_;
	PixelTransformationType _tmp8_;
	PixelTransformationBundle* _tmp12_;
	PixelTransformation* _tmp13_;
#line 2693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (IS_PIXEL_TRANSFORMATION (new_transformation));
#line 2694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->transformations;
#line 2694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = new_transformation;
#line 2694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = pixel_transformation_get_transformation_type (_tmp1_);
#line 2694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = pixel_transformation_bundle_get_transformation (_tmp0_, _tmp2_);
#line 2694 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old_transformation = _tmp3_;
#line 2697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->transformer;
#line 2697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = old_transformation;
#line 2697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = new_transformation;
#line 2697 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformer_replace_transformation (_tmp4_, _tmp5_, _tmp6_);
#line 2698 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = new_transformation;
#line 2698 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = pixel_transformation_get_transformation_type (_tmp7_);
#line 2698 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp8_ != PIXEL_TRANSFORMATION_TYPE_TONE_EXPANSION) {
#line 16112 "EditingTools.c"
		PixelTransformer* _tmp9_;
		PixelTransformation* _tmp10_;
		PixelTransformation* _tmp11_;
#line 2699 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = self->priv->histogram_transformer;
#line 2699 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = old_transformation;
#line 2699 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = new_transformation;
#line 2699 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		pixel_transformer_replace_transformation (_tmp9_, _tmp10_, _tmp11_);
#line 16124 "EditingTools.c"
	}
#line 2701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->transformations;
#line 2701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = new_transformation;
#line 2701 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformation_bundle_set (_tmp12_, _tmp13_);
#line 2693 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (old_transformation);
#line 16134 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_updated (EditingToolsAdjustTool* self, PixelTransformation* new_transformation, const gchar* name) {
	PixelTransformation* old_transformation = NULL;
	PixelTransformationBundle* _tmp0_;
	PixelTransformation* _tmp1_;
	PixelTransformationType _tmp2_;
	PixelTransformation* _tmp3_;
	EditingToolsAdjustToolSliderAdjustmentCommand* command = NULL;
	PixelTransformation* _tmp4_;
	const gchar* _tmp5_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp6_;
	CommandManager* _tmp7_;
	CommandManager* _tmp8_;
#line 2704 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2704 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (IS_PIXEL_TRANSFORMATION (new_transformation));
#line 2704 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (name != NULL);
#line 2705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->transformations;
#line 2705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = new_transformation;
#line 2705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = pixel_transformation_get_transformation_type (_tmp1_);
#line 2705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = pixel_transformation_bundle_get_transformation (_tmp0_, _tmp2_);
#line 2705 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	old_transformation = _tmp3_;
#line 2707 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = new_transformation;
#line 2707 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = name;
#line 2707 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = editing_tools_adjust_tool_slider_adjustment_command_new (self, old_transformation, _tmp4_, _tmp5_);
#line 2707 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command = _tmp6_;
#line 2709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = app_window_get_command_manager ();
#line 2709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_;
#line 2709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_manager_execute (_tmp8_, G_TYPE_CHECK_INSTANCE_CAST (command, TYPE_COMMAND, Command));
#line 2709 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_command_manager_unref0 (_tmp8_);
#line 2704 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (command);
#line 2704 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (old_transformation);
#line 16186 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_temperature_adjustment_one_shot_callback (gpointer self) {
#line 2714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_temperature_adjustment ((EditingToolsAdjustTool*) self);
#line 16193 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_temperature_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2712 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2713 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->temperature_scheduler;
#line 2713 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16206 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("temperature", _editing_tools_adjust_tool_on_delayed_temperature_adjustment_one_shot_callback, self);
#line 2714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->temperature_scheduler);
#line 2714 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->temperature_scheduler = _tmp1_;
#line 16214 "EditingTools.c"
	}
#line 2716 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->temperature_scheduler;
#line 2716 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16220 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_temperature_adjustment (EditingToolsAdjustTool* self) {
	TemperatureTransformation* new_temp_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	TemperatureTransformation* _tmp3_;
#line 2719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2720 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2720 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->temperature_slider;
#line 2720 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2720 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = temperature_transformation_new ((gfloat) _tmp2_);
#line 2720 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_temp_trans = _tmp3_;
#line 2722 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_temp_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Temperature"));
#line 2719 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_temp_trans);
#line 16246 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_tint_adjustment_one_shot_callback (gpointer self) {
#line 2727 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_tint_adjustment ((EditingToolsAdjustTool*) self);
#line 16253 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_tint_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2725 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->tint_scheduler;
#line 2726 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16266 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2727 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("tint", _editing_tools_adjust_tool_on_delayed_tint_adjustment_one_shot_callback, self);
#line 2727 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->tint_scheduler);
#line 2727 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->tint_scheduler = _tmp1_;
#line 16274 "EditingTools.c"
	}
#line 2728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->tint_scheduler;
#line 2728 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16280 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_tint_adjustment (EditingToolsAdjustTool* self) {
	TintTransformation* new_tint_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	TintTransformation* _tmp3_;
#line 2731 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->tint_slider;
#line 2732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = tint_transformation_new ((gfloat) _tmp2_);
#line 2732 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_tint_trans = _tmp3_;
#line 2734 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_tint_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Tint"));
#line 2731 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_tint_trans);
#line 16306 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_contrast_adjustment_one_shot_callback (gpointer self) {
#line 2739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_contrast_adjustment ((EditingToolsAdjustTool*) self);
#line 16313 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_contrast_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2737 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2738 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->contrast_scheduler;
#line 2738 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16326 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("contrast", _editing_tools_adjust_tool_on_delayed_contrast_adjustment_one_shot_callback, self);
#line 2739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->contrast_scheduler);
#line 2739 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->contrast_scheduler = _tmp1_;
#line 16334 "EditingTools.c"
	}
#line 2740 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->contrast_scheduler;
#line 2740 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16340 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_contrast_adjustment (EditingToolsAdjustTool* self) {
	ContrastTransformation* new_exp_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	ContrastTransformation* _tmp3_;
#line 2743 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->contrast_slider;
#line 2744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = contrast_transformation_new ((gfloat) _tmp2_);
#line 2744 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_exp_trans = _tmp3_;
#line 2746 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_exp_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Contrast"));
#line 2743 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_exp_trans);
#line 16366 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_saturation_adjustment_one_shot_callback (gpointer self) {
#line 2752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_saturation_adjustment ((EditingToolsAdjustTool*) self);
#line 16373 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_saturation_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2750 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2751 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->saturation_scheduler;
#line 2751 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16386 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("saturation", _editing_tools_adjust_tool_on_delayed_saturation_adjustment_one_shot_callback, self);
#line 2752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->saturation_scheduler);
#line 2752 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->saturation_scheduler = _tmp1_;
#line 16394 "EditingTools.c"
	}
#line 2754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->saturation_scheduler;
#line 2754 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16400 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_saturation_adjustment (EditingToolsAdjustTool* self) {
	SaturationTransformation* new_sat_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	SaturationTransformation* _tmp3_;
#line 2757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->saturation_slider;
#line 2758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = saturation_transformation_new ((gfloat) _tmp2_);
#line 2758 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_sat_trans = _tmp3_;
#line 2760 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_sat_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Saturation"));
#line 2757 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_sat_trans);
#line 16426 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_exposure_adjustment_one_shot_callback (gpointer self) {
#line 2765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_exposure_adjustment ((EditingToolsAdjustTool*) self);
#line 16433 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_exposure_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2763 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->exposure_scheduler;
#line 2764 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16446 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("exposure", _editing_tools_adjust_tool_on_delayed_exposure_adjustment_one_shot_callback, self);
#line 2765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->exposure_scheduler);
#line 2765 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->exposure_scheduler = _tmp1_;
#line 16454 "EditingTools.c"
	}
#line 2767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->exposure_scheduler;
#line 2767 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16460 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_exposure_adjustment (EditingToolsAdjustTool* self) {
	ExposureTransformation* new_exp_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	ExposureTransformation* _tmp3_;
#line 2770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->exposure_slider;
#line 2771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = exposure_transformation_new ((gfloat) _tmp2_);
#line 2771 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_exp_trans = _tmp3_;
#line 2773 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_exp_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Exposure"));
#line 2770 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_exp_trans);
#line 16486 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_shadows_adjustment_one_shot_callback (gpointer self) {
#line 2778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_shadows_adjustment ((EditingToolsAdjustTool*) self);
#line 16493 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_shadows_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2776 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->shadows_scheduler;
#line 2777 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16506 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("shadows", _editing_tools_adjust_tool_on_delayed_shadows_adjustment_one_shot_callback, self);
#line 2778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->shadows_scheduler);
#line 2778 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->shadows_scheduler = _tmp1_;
#line 16514 "EditingTools.c"
	}
#line 2780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->shadows_scheduler;
#line 2780 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16520 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_shadows_adjustment (EditingToolsAdjustTool* self) {
	ShadowDetailTransformation* new_shadows_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	ShadowDetailTransformation* _tmp3_;
#line 2783 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->shadows_slider;
#line 2784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = shadow_detail_transformation_new ((gfloat) _tmp2_);
#line 2784 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_shadows_trans = _tmp3_;
#line 2786 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_shadows_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Shadows"));
#line 2783 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_shadows_trans);
#line 16546 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_delayed_highlights_adjustment_one_shot_callback (gpointer self) {
#line 2791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_delayed_highlights_adjustment ((EditingToolsAdjustTool*) self);
#line 16553 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_highlights_adjustment (EditingToolsAdjustTool* self) {
	OneShotScheduler* _tmp0_;
	OneShotScheduler* _tmp2_;
#line 2789 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2790 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->highlights_scheduler;
#line 2790 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 16566 "EditingTools.c"
		OneShotScheduler* _tmp1_;
#line 2791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = one_shot_scheduler_new ("highlights", _editing_tools_adjust_tool_on_delayed_highlights_adjustment_one_shot_callback, self);
#line 2791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_one_shot_scheduler_unref0 (self->priv->highlights_scheduler);
#line 2791 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->highlights_scheduler = _tmp1_;
#line 16574 "EditingTools.c"
	}
#line 2793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->highlights_scheduler;
#line 2793 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	one_shot_scheduler_after_timeout (_tmp2_, EDITING_TOOLS_ADJUST_TOOL_SLIDER_DELAY_MSEC, TRUE);
#line 16580 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_delayed_highlights_adjustment (EditingToolsAdjustTool* self) {
	HighlightDetailTransformation* new_highlights_trans = NULL;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkScale* _tmp1_;
	gdouble _tmp2_;
	HighlightDetailTransformation* _tmp3_;
#line 2796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->highlights_slider;
#line 2797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = gtk_range_get_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, gtk_range_get_type (), GtkRange));
#line 2797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = highlight_detail_transformation_new ((gfloat) _tmp2_);
#line 2797 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_highlights_trans = _tmp3_;
#line 2799 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_highlights_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Highlights"));
#line 2796 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_highlights_trans);
#line 16606 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_histogram_constraint (EditingToolsAdjustTool* self) {
	gint expansion_black_point = 0;
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	RGBHistogramManipulator* _tmp1_;
	gint _tmp2_;
	gint expansion_white_point = 0;
	EditingToolsAdjustToolAdjustToolWindow* _tmp3_;
	RGBHistogramManipulator* _tmp4_;
	gint _tmp5_;
	ExpansionTransformation* new_exp_trans = NULL;
	ExpansionTransformation* _tmp6_;
#line 2802 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->histogram_manipulator;
#line 2803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = rgb_histogram_manipulator_get_left_nub_position (_tmp1_);
#line 2803 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	expansion_black_point = _tmp2_;
#line 2805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->adjust_tool_window;
#line 2805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->histogram_manipulator;
#line 2805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = rgb_histogram_manipulator_get_right_nub_position (_tmp4_);
#line 2805 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	expansion_white_point = _tmp5_;
#line 2807 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = expansion_transformation_new_from_extrema (expansion_black_point, expansion_white_point);
#line 2807 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	new_exp_trans = _tmp6_;
#line 2809 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_updated (self, G_TYPE_CHECK_INSTANCE_CAST (new_exp_trans, TYPE_PIXEL_TRANSFORMATION, PixelTransformation), _ ("Contrast Expansion"));
#line 2802 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (new_exp_trans);
#line 16647 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_canvas_resize (EditingToolsAdjustTool* self) {
	EditingToolsPhotoCanvas* _tmp0_;
	GdkPixbuf* _tmp1_;
	GdkPixbuf* _tmp2_;
	GdkPixbuf* _tmp3_;
	EditingToolsPhotoCanvas* _tmp4_;
	GdkPixbuf* _tmp5_;
	GdkPixbuf* _tmp6_;
#line 2812 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp0_);
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_;
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = gdk_pixbuf_copy (_tmp2_);
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->draw_to_pixbuf);
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->draw_to_pixbuf = _tmp3_;
#line 2813 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 2814 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2814 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = editing_tools_photo_canvas_get_scaled_pixbuf (_tmp4_);
#line 2814 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_;
#line 2814 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_init_fp_pixel_cache (self, _tmp6_);
#line 2814 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp6_);
#line 16685 "EditingTools.c"
}


static gboolean editing_tools_adjust_tool_on_hscale_reset (EditingToolsAdjustTool* self, GtkWidget* widget, GdkEventButton* event) {
	gboolean result = FALSE;
	GtkScale* source = NULL;
	GtkWidget* _tmp0_;
	GtkScale* _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	GdkEventButton* _tmp4_;
	guint _tmp5_;
#line 2817 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self), FALSE);
#line 2817 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WIDGET (widget), FALSE);
#line 2817 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 2818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = widget;
#line 2818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_scale_get_type (), GtkScale));
#line 2818 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source = _tmp1_;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = event;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_->button;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_ == ((guint) 1)) {
#line 16716 "EditingTools.c"
		GdkEventButton* _tmp6_;
		GdkEventType _tmp7_;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = event;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = _tmp6_->type;
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp7_ == GDK_BUTTON_PRESS;
#line 16725 "EditingTools.c"
	} else {
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = FALSE;
#line 16729 "EditingTools.c"
	}
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp3_) {
#line 16733 "EditingTools.c"
		GdkEventButton* _tmp8_;
		GdkModifierType _tmp9_;
		gboolean _tmp10_;
#line 2821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = event;
#line 2821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_->state;
#line 2821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = has_only_key_modifier (_tmp9_, GDK_CONTROL_MASK);
#line 2821 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = _tmp10_;
#line 16745 "EditingTools.c"
	} else {
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = FALSE;
#line 16749 "EditingTools.c"
	}
#line 2820 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_) {
#line 16753 "EditingTools.c"
		GtkScale* _tmp11_;
#line 2823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = source;
#line 2823 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_range_get_type (), GtkRange), (gdouble) 0);
#line 2825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 2825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (source);
#line 2825 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 16765 "EditingTools.c"
	}
#line 2828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = FALSE;
#line 2828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (source);
#line 2828 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 16773 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf (EditingToolsPhotoCanvas* _sender, Dimensions* old_dim, GdkPixbuf* scaled, GdkRectangle* scaled_position, gpointer self) {
#line 2832 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_canvas_resize ((EditingToolsAdjustTool*) self);
#line 16780 "EditingTools.c"
}


static void editing_tools_adjust_tool_bind_canvas_handlers (EditingToolsAdjustTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
#line 2831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2831 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2832 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2832 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp0_, "resized-scaled-pixbuf", (GCallback) _editing_tools_adjust_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 16794 "EditingTools.c"
}


static void editing_tools_adjust_tool_unbind_canvas_handlers (EditingToolsAdjustTool* self, EditingToolsPhotoCanvas* canvas) {
	EditingToolsPhotoCanvas* _tmp0_;
	guint _tmp1_;
#line 2835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2835 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_PHOTO_CANVAS (canvas));
#line 2836 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = canvas;
#line 2836 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("resized-scaled-pixbuf", EDITING_TOOLS_TYPE_PHOTO_CANVAS, &_tmp1_, NULL, FALSE);
#line 2836 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp0_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp1_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_canvas_resize_editing_tools_photo_canvas_resized_scaled_pixbuf, self);
#line 16811 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_ok_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 2840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_ok ((EditingToolsAdjustTool*) self);
#line 16818 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_reset_gtk_button_clicked (GtkButton* _sender, gpointer self) {
#line 2841 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_reset ((EditingToolsAdjustTool*) self);
#line 16825 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_exposure_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_exposure_adjustment ((EditingToolsAdjustTool*) self);
#line 16832 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_contrast_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_contrast_adjustment ((EditingToolsAdjustTool*) self);
#line 16839 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_saturation_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2845 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_saturation_adjustment ((EditingToolsAdjustTool*) self);
#line 16846 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_tint_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_tint_adjustment ((EditingToolsAdjustTool*) self);
#line 16853 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_temperature_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2847 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_temperature_adjustment ((EditingToolsAdjustTool*) self);
#line 16860 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_shadows_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_shadows_adjustment ((EditingToolsAdjustTool*) self);
#line 16867 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_highlights_adjustment_gtk_range_value_changed (GtkRange* _sender, gpointer self) {
#line 2849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_highlights_adjustment ((EditingToolsAdjustTool*) self);
#line 16874 "EditingTools.c"
}


static void _editing_tools_adjust_tool_on_histogram_constraint_rgb_histogram_manipulator_nub_position_changed (RGBHistogramManipulator* _sender, gpointer self) {
#line 2850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_on_histogram_constraint ((EditingToolsAdjustTool*) self);
#line 16881 "EditingTools.c"
}


static gboolean _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = editing_tools_adjust_tool_on_hscale_reset ((EditingToolsAdjustTool*) self, _sender, event);
#line 2852 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 16890 "EditingTools.c"
}


static void editing_tools_adjust_tool_bind_window_handlers (EditingToolsAdjustTool* self) {
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkButton* _tmp1_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp2_;
	GtkButton* _tmp3_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp4_;
	GtkButton* _tmp5_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp6_;
	GtkScale* _tmp7_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp8_;
	GtkScale* _tmp9_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp10_;
	GtkScale* _tmp11_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp12_;
	GtkScale* _tmp13_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp14_;
	GtkScale* _tmp15_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp16_;
	GtkScale* _tmp17_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp18_;
	GtkScale* _tmp19_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp20_;
	RGBHistogramManipulator* _tmp21_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp22_;
	GtkScale* _tmp23_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp24_;
	GtkScale* _tmp25_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp26_;
	GtkScale* _tmp27_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp28_;
	GtkScale* _tmp29_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp30_;
	GtkScale* _tmp31_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp32_;
	GtkScale* _tmp33_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp34_;
	GtkScale* _tmp35_;
#line 2839 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->ok_button;
#line 2840 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp1_, "clicked", (GCallback) _editing_tools_adjust_tool_on_ok_gtk_button_clicked, self);
#line 2841 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = self->priv->adjust_tool_window;
#line 2841 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->reset_button;
#line 2841 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp3_, "clicked", (GCallback) _editing_tools_adjust_tool_on_reset_gtk_button_clicked, self);
#line 2842 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->adjust_tool_window;
#line 2842 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = _tmp4_->cancel_button;
#line 2842 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp5_, "clicked", (GCallback) _editing_tools_editing_tool_notify_cancel_gtk_button_clicked, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 2843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->adjust_tool_window;
#line 2843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_->exposure_slider;
#line 2843 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp7_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_exposure_adjustment_gtk_range_value_changed, self);
#line 2844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->adjust_tool_window;
#line 2844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = _tmp8_->contrast_slider;
#line 2844 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_contrast_adjustment_gtk_range_value_changed, self);
#line 2845 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->priv->adjust_tool_window;
#line 2845 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_->saturation_slider;
#line 2845 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_saturation_adjustment_gtk_range_value_changed, self);
#line 2846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->adjust_tool_window;
#line 2846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_->tint_slider;
#line 2846 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_tint_adjustment_gtk_range_value_changed, self);
#line 2847 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->priv->adjust_tool_window;
#line 2847 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = _tmp14_->temperature_slider;
#line 2847 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp15_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_temperature_adjustment_gtk_range_value_changed, self);
#line 2848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->priv->adjust_tool_window;
#line 2848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = _tmp16_->shadows_slider;
#line 2848 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp17_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_shadows_adjustment_gtk_range_value_changed, self);
#line 2849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->adjust_tool_window;
#line 2849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_->highlights_slider;
#line 2849 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, gtk_range_get_type (), GtkRange), "value-changed", (GCallback) _editing_tools_adjust_tool_on_highlights_adjustment_gtk_range_value_changed, self);
#line 2850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->priv->adjust_tool_window;
#line 2850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = _tmp20_->histogram_manipulator;
#line 2850 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (_tmp21_, "nub-position-changed", (GCallback) _editing_tools_adjust_tool_on_histogram_constraint_rgb_histogram_manipulator_nub_position_changed, self);
#line 2852 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = self->priv->adjust_tool_window;
#line 2852 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = _tmp22_->saturation_slider;
#line 2852 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2853 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->adjust_tool_window;
#line 2853 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_->exposure_slider;
#line 2853 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp25_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = self->priv->adjust_tool_window;
#line 2854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = _tmp26_->contrast_slider;
#line 2854 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp27_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2855 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = self->priv->adjust_tool_window;
#line 2855 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = _tmp28_->tint_slider;
#line 2855 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp29_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = self->priv->adjust_tool_window;
#line 2856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = _tmp30_->temperature_slider;
#line 2856 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = self->priv->adjust_tool_window;
#line 2857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = _tmp32_->shadows_slider;
#line 2857 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp33_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = self->priv->adjust_tool_window;
#line 2858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = _tmp34_->highlights_slider;
#line 2858 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect (G_TYPE_CHECK_INSTANCE_CAST (_tmp35_, gtk_widget_get_type (), GtkWidget), "button-press-event", (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 17041 "EditingTools.c"
}


static void editing_tools_adjust_tool_unbind_window_handlers (EditingToolsAdjustTool* self) {
	EditingToolsAdjustToolAdjustToolWindow* _tmp0_;
	GtkButton* _tmp1_;
	guint _tmp2_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp3_;
	GtkButton* _tmp4_;
	guint _tmp5_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp6_;
	GtkButton* _tmp7_;
	guint _tmp8_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp9_;
	GtkScale* _tmp10_;
	guint _tmp11_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp12_;
	GtkScale* _tmp13_;
	guint _tmp14_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp15_;
	GtkScale* _tmp16_;
	guint _tmp17_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp18_;
	GtkScale* _tmp19_;
	guint _tmp20_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp21_;
	GtkScale* _tmp22_;
	guint _tmp23_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp24_;
	GtkScale* _tmp25_;
	guint _tmp26_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp27_;
	GtkScale* _tmp28_;
	guint _tmp29_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp30_;
	RGBHistogramManipulator* _tmp31_;
	guint _tmp32_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp33_;
	GtkScale* _tmp34_;
	guint _tmp35_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp36_;
	GtkScale* _tmp37_;
	guint _tmp38_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp39_;
	GtkScale* _tmp40_;
	guint _tmp41_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp42_;
	GtkScale* _tmp43_;
	guint _tmp44_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp45_;
	GtkScale* _tmp46_;
	guint _tmp47_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp48_;
	GtkScale* _tmp49_;
	guint _tmp50_;
	EditingToolsAdjustToolAdjustToolWindow* _tmp51_;
	GtkScale* _tmp52_;
	guint _tmp53_;
#line 2861 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->adjust_tool_window;
#line 2862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_->ok_button;
#line 2862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp2_, NULL, FALSE);
#line 2862 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp1_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_ok_gtk_button_clicked, self);
#line 2863 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->priv->adjust_tool_window;
#line 2863 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_->reset_button;
#line 2863 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp5_, NULL, FALSE);
#line 2863 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp4_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp5_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_reset_gtk_button_clicked, self);
#line 2864 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->priv->adjust_tool_window;
#line 2864 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_->cancel_button;
#line 2864 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("clicked", gtk_button_get_type (), &_tmp8_, NULL, FALSE);
#line 2864 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp7_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp8_, 0, NULL, (GCallback) _editing_tools_editing_tool_notify_cancel_gtk_button_clicked, G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool));
#line 2865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->priv->adjust_tool_window;
#line 2865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_->exposure_slider;
#line 2865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp11_, NULL, FALSE);
#line 2865 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp11_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_exposure_adjustment_gtk_range_value_changed, self);
#line 2866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = self->priv->adjust_tool_window;
#line 2866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _tmp12_->contrast_slider;
#line 2866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp14_, NULL, FALSE);
#line 2866 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp14_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_contrast_adjustment_gtk_range_value_changed, self);
#line 2867 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->priv->adjust_tool_window;
#line 2867 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = _tmp15_->saturation_slider;
#line 2867 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp17_, NULL, FALSE);
#line 2867 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp17_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_saturation_adjustment_gtk_range_value_changed, self);
#line 2868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->priv->adjust_tool_window;
#line 2868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = _tmp18_->tint_slider;
#line 2868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp20_, NULL, FALSE);
#line 2868 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp20_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_tint_adjustment_gtk_range_value_changed, self);
#line 2869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->priv->adjust_tool_window;
#line 2869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = _tmp21_->temperature_slider;
#line 2869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp23_, NULL, FALSE);
#line 2869 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp23_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_temperature_adjustment_gtk_range_value_changed, self);
#line 2870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->priv->adjust_tool_window;
#line 2870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = _tmp24_->shadows_slider;
#line 2870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp26_, NULL, FALSE);
#line 2870 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp25_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp26_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_shadows_adjustment_gtk_range_value_changed, self);
#line 2871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = self->priv->adjust_tool_window;
#line 2871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = _tmp27_->highlights_slider;
#line 2871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("value-changed", gtk_range_get_type (), &_tmp29_, NULL, FALSE);
#line 2871 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp28_, gtk_range_get_type (), GtkRange), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp29_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_highlights_adjustment_gtk_range_value_changed, self);
#line 2872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = self->priv->adjust_tool_window;
#line 2872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = _tmp30_->histogram_manipulator;
#line 2872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("nub-position-changed", TYPE_RGB_HISTOGRAM_MANIPULATOR, &_tmp32_, NULL, FALSE);
#line 2872 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (_tmp31_, G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp32_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_histogram_constraint_rgb_histogram_manipulator_nub_position_changed, self);
#line 2874 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->priv->adjust_tool_window;
#line 2874 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = _tmp33_->saturation_slider;
#line 2874 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp35_, NULL, FALSE);
#line 2874 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp35_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = self->priv->adjust_tool_window;
#line 2875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = _tmp36_->exposure_slider;
#line 2875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp38_, NULL, FALSE);
#line 2875 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp37_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp38_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = self->priv->adjust_tool_window;
#line 2876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = _tmp39_->contrast_slider;
#line 2876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp41_, NULL, FALSE);
#line 2876 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp40_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp41_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = self->priv->adjust_tool_window;
#line 2877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43_ = _tmp42_->tint_slider;
#line 2877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp44_, NULL, FALSE);
#line 2877 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp43_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp44_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45_ = self->priv->adjust_tool_window;
#line 2878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp46_ = _tmp45_->temperature_slider;
#line 2878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp47_, NULL, FALSE);
#line 2878 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp46_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp47_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2879 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp48_ = self->priv->adjust_tool_window;
#line 2879 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp49_ = _tmp48_->shadows_slider;
#line 2879 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp50_, NULL, FALSE);
#line 2879 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp49_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp50_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 2880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp51_ = self->priv->adjust_tool_window;
#line 2880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp52_ = _tmp51_->highlights_slider;
#line 2880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_parse_name ("button-press-event", gtk_widget_get_type (), &_tmp53_, NULL, FALSE);
#line 2880 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp52_, gtk_widget_get_type (), GtkWidget), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp53_, 0, NULL, (GCallback) _editing_tools_adjust_tool_on_hscale_reset_gtk_widget_button_press_event, self);
#line 17246 "EditingTools.c"
}


gboolean editing_tools_adjust_tool_enhance (EditingToolsAdjustTool* self) {
	gboolean result = FALSE;
	EditingToolsAdjustToolAdjustEnhanceCommand* command = NULL;
	EditingToolsPhotoCanvas* _tmp0_;
	Photo* _tmp1_;
	Photo* _tmp2_;
	EditingToolsAdjustToolAdjustEnhanceCommand* _tmp3_;
	EditingToolsAdjustToolAdjustEnhanceCommand* _tmp4_;
	CommandManager* _tmp5_;
	CommandManager* _tmp6_;
#line 2883 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self), FALSE);
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = editing_tools_photo_canvas_get_photo (_tmp0_);
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _tmp1_;
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = editing_tools_adjust_tool_adjust_enhance_command_new (self, _tmp2_);
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _tmp3_;
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp2_);
#line 2884 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command = _tmp4_;
#line 2885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = app_window_get_command_manager ();
#line 2885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _tmp5_;
#line 2885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_manager_execute (_tmp6_, G_TYPE_CHECK_INSTANCE_CAST (command, TYPE_COMMAND, Command));
#line 2885 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_command_manager_unref0 (_tmp6_);
#line 2887 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 2887 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (command);
#line 2887 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 17290 "EditingTools.c"
}


static void editing_tools_adjust_tool_on_photos_altered (EditingToolsAdjustTool* self, GeeMap* map) {
	GeeMap* _tmp0_;
	EditingToolsPhotoCanvas* _tmp1_;
	Photo* _tmp2_;
	Photo* _tmp3_;
	gboolean _tmp4_;
	gboolean _tmp5_;
	PixelTransformationBundle* adjustments = NULL;
	EditingToolsPhotoCanvas* _tmp6_;
	Photo* _tmp7_;
	Photo* _tmp8_;
	PixelTransformationBundle* _tmp9_;
	PixelTransformationBundle* _tmp10_;
	PixelTransformationBundle* _tmp11_;
#line 2890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GEE_IS_MAP (map));
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = map;
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = editing_tools_photo_canvas_get_photo (_tmp1_);
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_;
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gee_map_has_key (_tmp0_, G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_DATA_OBJECT, DataObject));
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = !_tmp4_;
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp3_);
#line 2891 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp5_) {
#line 2892 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return;
#line 17330 "EditingTools.c"
	}
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = editing_tools_photo_canvas_get_photo (_tmp6_);
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = _tmp7_;
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = photo_get_color_adjustments (_tmp8_);
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = _tmp9_;
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (_tmp8_);
#line 2894 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	adjustments = _tmp10_;
#line 2895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = adjustments;
#line 2895 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_set_adjustments (self, _tmp11_);
#line 2890 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (adjustments);
#line 17352 "EditingTools.c"
}


static void editing_tools_adjust_tool_set_adjustments (EditingToolsAdjustTool* self, PixelTransformationBundle* new_adjustments) {
	PixelTransformationBundle* _tmp0_;
	EditingToolsPhotoCanvas* _tmp11_;
#line 2898 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2898 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (IS_PIXEL_TRANSFORMATION_BUNDLE (new_adjustments));
#line 2899 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_unbind_window_handlers (self);
#line 2901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = new_adjustments;
#line 2901 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_transformations (self, _tmp0_);
#line 17369 "EditingTools.c"
	{
		GeeIterator* _adjustment_it = NULL;
		PixelTransformationBundle* _tmp1_;
		GeeIterable* _tmp2_;
		GeeIterable* _tmp3_;
		GeeIterator* _tmp4_;
		GeeIterator* _tmp5_;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = new_adjustments;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = pixel_transformation_bundle_get_transformations (_tmp1_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = _tmp2_;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = gee_iterable_iterator (_tmp3_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = _tmp4_;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp3_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_adjustment_it = _tmp5_;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		while (TRUE) {
#line 17393 "EditingTools.c"
			GeeIterator* _tmp6_;
			gboolean _tmp7_;
			PixelTransformation* adjustment = NULL;
			GeeIterator* _tmp8_;
			gpointer _tmp9_;
			PixelTransformation* _tmp10_;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp6_ = _adjustment_it;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp7_ = gee_iterator_next (_tmp6_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (!_tmp7_) {
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				break;
#line 17408 "EditingTools.c"
			}
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp8_ = _adjustment_it;
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp9_ = gee_iterator_get (_tmp8_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			adjustment = (PixelTransformation*) _tmp9_;
#line 2904 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp10_ = adjustment;
#line 2904 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			editing_tools_adjust_tool_update_slider (self, _tmp10_);
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_pixel_transformation_unref0 (adjustment);
#line 17422 "EditingTools.c"
		}
#line 2903 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_adjustment_it);
#line 17426 "EditingTools.c"
	}
#line 2906 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_bind_window_handlers (self);
#line 2907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2907 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp11_);
#line 17434 "EditingTools.c"
}


static gpointer _pixel_transformation_ref0 (gpointer self) {
#line 2915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self ? pixel_transformation_ref (self) : NULL;
#line 17441 "EditingTools.c"
}


static void editing_tools_adjust_tool_update_slider (EditingToolsAdjustTool* self, PixelTransformation* transformation) {
	PixelTransformation* _tmp0_;
	PixelTransformationType _tmp1_;
#line 2912 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2912 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (IS_PIXEL_TRANSFORMATION (transformation));
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = transformation;
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = pixel_transformation_get_transformation_type (_tmp0_);
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	switch (_tmp1_) {
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_TONE_EXPANSION:
#line 17460 "EditingTools.c"
		{
			ExpansionTransformation* expansion = NULL;
			PixelTransformation* _tmp2_;
			ExpansionTransformation* _tmp3_;
			gboolean _tmp4_;
#line 2915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp2_ = transformation;
#line 2915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp3_ = _pixel_transformation_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, TYPE_EXPANSION_TRANSFORMATION, ExpansionTransformation));
#line 2915 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			expansion = _tmp3_;
#line 2917 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp4_ = self->priv->disable_histogram_refresh;
#line 2917 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			if (!_tmp4_) {
#line 17476 "EditingTools.c"
				EditingToolsAdjustToolAdjustToolWindow* _tmp5_;
				RGBHistogramManipulator* _tmp6_;
				ExpansionTransformation* _tmp7_;
				gint _tmp8_;
				EditingToolsAdjustToolAdjustToolWindow* _tmp9_;
				RGBHistogramManipulator* _tmp10_;
				ExpansionTransformation* _tmp11_;
				gint _tmp12_;
#line 2918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp5_ = self->priv->adjust_tool_window;
#line 2918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp6_ = _tmp5_->histogram_manipulator;
#line 2918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp7_ = expansion;
#line 2918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp8_ = expansion_transformation_get_black_point (_tmp7_);
#line 2918 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				rgb_histogram_manipulator_set_left_nub_position (_tmp6_, _tmp8_);
#line 2920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp9_ = self->priv->adjust_tool_window;
#line 2920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp10_ = _tmp9_->histogram_manipulator;
#line 2920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp11_ = expansion;
#line 2920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp12_ = expansion_transformation_get_white_point (_tmp11_);
#line 2920 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				rgb_histogram_manipulator_set_right_nub_position (_tmp10_, _tmp12_);
#line 17505 "EditingTools.c"
			}
#line 2923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_pixel_transformation_unref0 (expansion);
#line 2923 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17511 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_SHADOWS:
#line 17515 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp13_;
			GtkScale* _tmp14_;
			PixelTransformation* _tmp15_;
			gfloat _tmp16_;
#line 2926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp13_ = self->priv->adjust_tool_window;
#line 2926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp14_ = _tmp13_->shadows_slider;
#line 2926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp15_ = transformation;
#line 2926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp16_ = shadow_detail_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp15_, TYPE_SHADOW_DETAIL_TRANSFORMATION, ShadowDetailTransformation));
#line 2926 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, gtk_range_get_type (), GtkRange), (gdouble) _tmp16_);
#line 2928 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17533 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_CONTRAST:
#line 17537 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp17_;
			GtkScale* _tmp18_;
			PixelTransformation* _tmp19_;
			gfloat _tmp20_;
#line 2931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp17_ = self->priv->adjust_tool_window;
#line 2931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp18_ = _tmp17_->contrast_slider;
#line 2931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp19_ = transformation;
#line 2931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp20_ = contrast_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, TYPE_CONTRAST_TRANSFORMATION, ContrastTransformation));
#line 2931 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, gtk_range_get_type (), GtkRange), (gdouble) _tmp20_);
#line 2933 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17555 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_HIGHLIGHTS:
#line 17559 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp21_;
			GtkScale* _tmp22_;
			PixelTransformation* _tmp23_;
			gfloat _tmp24_;
#line 2936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp21_ = self->priv->adjust_tool_window;
#line 2936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp22_ = _tmp21_->highlights_slider;
#line 2936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp23_ = transformation;
#line 2936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp24_ = highlight_detail_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, TYPE_HIGHLIGHT_DETAIL_TRANSFORMATION, HighlightDetailTransformation));
#line 2936 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp22_, gtk_range_get_type (), GtkRange), (gdouble) _tmp24_);
#line 2938 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17577 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_EXPOSURE:
#line 17581 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp25_;
			GtkScale* _tmp26_;
			PixelTransformation* _tmp27_;
			gfloat _tmp28_;
#line 2941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp25_ = self->priv->adjust_tool_window;
#line 2941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp26_ = _tmp25_->exposure_slider;
#line 2941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp27_ = transformation;
#line 2941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp28_ = exposure_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp27_, TYPE_EXPOSURE_TRANSFORMATION, ExposureTransformation));
#line 2941 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_range_get_type (), GtkRange), (gdouble) _tmp28_);
#line 2943 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17599 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_SATURATION:
#line 17603 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp29_;
			GtkScale* _tmp30_;
			PixelTransformation* _tmp31_;
			gfloat _tmp32_;
#line 2946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp29_ = self->priv->adjust_tool_window;
#line 2946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp30_ = _tmp29_->saturation_slider;
#line 2946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp31_ = transformation;
#line 2946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp32_ = saturation_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, TYPE_SATURATION_TRANSFORMATION, SaturationTransformation));
#line 2946 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp30_, gtk_range_get_type (), GtkRange), (gdouble) _tmp32_);
#line 2948 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17621 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_TINT:
#line 17625 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp33_;
			GtkScale* _tmp34_;
			PixelTransformation* _tmp35_;
			gfloat _tmp36_;
#line 2951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp33_ = self->priv->adjust_tool_window;
#line 2951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp34_ = _tmp33_->tint_slider;
#line 2951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp35_ = transformation;
#line 2951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp36_ = tint_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp35_, TYPE_TINT_TRANSFORMATION, TintTransformation));
#line 2951 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_range_get_type (), GtkRange), (gdouble) _tmp36_);
#line 2953 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17643 "EditingTools.c"
		}
#line 2913 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		case PIXEL_TRANSFORMATION_TYPE_TEMPERATURE:
#line 17647 "EditingTools.c"
		{
			EditingToolsAdjustToolAdjustToolWindow* _tmp37_;
			GtkScale* _tmp38_;
			PixelTransformation* _tmp39_;
			gfloat _tmp40_;
#line 2956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp37_ = self->priv->adjust_tool_window;
#line 2956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp38_ = _tmp37_->temperature_slider;
#line 2956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp39_ = transformation;
#line 2956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp40_ = temperature_transformation_get_parameter (G_TYPE_CHECK_INSTANCE_CAST (_tmp39_, TYPE_TEMPERATURE_TRANSFORMATION, TemperatureTransformation));
#line 2956 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			gtk_range_set_value (G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, gtk_range_get_type (), GtkRange), (gdouble) _tmp40_);
#line 2958 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			break;
#line 17665 "EditingTools.c"
		}
		default:
		{
			PixelTransformation* _tmp41_;
			PixelTransformationType _tmp42_;
#line 2961 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp41_ = transformation;
#line 2961 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp42_ = pixel_transformation_get_transformation_type (_tmp41_);
#line 2961 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			g_error ("EditingTools.vala:2961: Unknown adjustment: %d", (gint) _tmp42_);
#line 17677 "EditingTools.c"
		}
	}
}


static void editing_tools_adjust_tool_init_fp_pixel_cache (EditingToolsAdjustTool* self, GdkPixbuf* source) {
	gint source_width = 0;
	GdkPixbuf* _tmp0_;
	gint _tmp1_;
	gint source_height = 0;
	GdkPixbuf* _tmp2_;
	gint _tmp3_;
	gint source_num_channels = 0;
	GdkPixbuf* _tmp4_;
	gint _tmp5_;
	gint source_rowstride = 0;
	GdkPixbuf* _tmp6_;
	gint _tmp7_;
	guchar* source_pixels = NULL;
	GdkPixbuf* _tmp8_;
	guint8* _tmp9_;
	gint source_pixels_length1;
	gint _source_pixels_size_;
	gint _tmp10_;
	gint _tmp11_;
	gfloat* _tmp12_;
	gint cache_pixel_index = 0;
	gfloat INV_255 = 0.0F;
#line 2965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (self));
#line 2965 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (GDK_IS_PIXBUF (source));
#line 2966 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = source;
#line 2966 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = gdk_pixbuf_get_width (_tmp0_);
#line 2966 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_width = _tmp1_;
#line 2967 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = source;
#line 2967 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = gdk_pixbuf_get_height (_tmp2_);
#line 2967 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_height = _tmp3_;
#line 2968 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = source;
#line 2968 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = gdk_pixbuf_get_n_channels (_tmp4_);
#line 2968 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_num_channels = _tmp5_;
#line 2969 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = source;
#line 2969 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = gdk_pixbuf_get_rowstride (_tmp6_);
#line 2969 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_rowstride = _tmp7_;
#line 2970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = source;
#line 2970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = gdk_pixbuf_get_pixels (_tmp8_);
#line 2970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_pixels = _tmp9_;
#line 2970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	source_pixels_length1 = -1;
#line 2970 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_source_pixels_size_ = source_pixels_length1;
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = source_width;
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = source_height;
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = g_new0 (gfloat, (3 * _tmp10_) * _tmp11_);
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = (g_free (self->priv->fp_pixel_cache), NULL);
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = _tmp12_;
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache_length1 = (3 * _tmp10_) * _tmp11_;
#line 2972 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->_fp_pixel_cache_size_ = self->priv->fp_pixel_cache_length1;
#line 2973 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	cache_pixel_index = 0;
#line 2974 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	INV_255 = 1.0f / 255.0f;
#line 17762 "EditingTools.c"
	{
		gint j = 0;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		j = 0;
#line 17767 "EditingTools.c"
		{
			gboolean _tmp13_ = FALSE;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			_tmp13_ = TRUE;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
			while (TRUE) {
#line 17774 "EditingTools.c"
				gint _tmp15_;
				gint _tmp16_;
				gint row_start_index = 0;
				gint _tmp17_;
				gint _tmp18_;
				gint row_end_index = 0;
				gint _tmp19_;
				gint _tmp20_;
				gint _tmp21_;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (!_tmp13_) {
#line 17786 "EditingTools.c"
					gint _tmp14_;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp14_ = j;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					j = _tmp14_ + 1;
#line 17792 "EditingTools.c"
				}
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp13_ = FALSE;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp15_ = j;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp16_ = source_height;
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				if (!(_tmp15_ < _tmp16_)) {
#line 2976 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					break;
#line 17804 "EditingTools.c"
				}
#line 2977 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp17_ = j;
#line 2977 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp18_ = source_rowstride;
#line 2977 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				row_start_index = _tmp17_ * _tmp18_;
#line 2978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp19_ = row_start_index;
#line 2978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp20_ = source_width;
#line 2978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				_tmp21_ = source_num_channels;
#line 2978 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
				row_end_index = _tmp19_ + (_tmp20_ * _tmp21_);
#line 17820 "EditingTools.c"
				{
					gint i = 0;
					gint _tmp22_;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					_tmp22_ = row_start_index;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
					i = _tmp22_;
#line 17828 "EditingTools.c"
					{
						gboolean _tmp23_ = FALSE;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						_tmp23_ = TRUE;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
						while (TRUE) {
#line 17835 "EditingTools.c"
							gint _tmp26_;
							gint _tmp27_;
							gfloat* _tmp28_;
							gint _tmp28__length1;
							gint _tmp29_;
							guchar* _tmp30_;
							gint _tmp30__length1;
							gint _tmp31_;
							guchar _tmp32_;
							gfloat _tmp33_;
							gfloat _tmp34_;
							gfloat* _tmp35_;
							gint _tmp35__length1;
							gint _tmp36_;
							guchar* _tmp37_;
							gint _tmp37__length1;
							gint _tmp38_;
							guchar _tmp39_;
							gfloat _tmp40_;
							gfloat _tmp41_;
							gfloat* _tmp42_;
							gint _tmp42__length1;
							gint _tmp43_;
							guchar* _tmp44_;
							gint _tmp44__length1;
							gint _tmp45_;
							guchar _tmp46_;
							gfloat _tmp47_;
							gfloat _tmp48_;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							if (!_tmp23_) {
#line 17867 "EditingTools.c"
								gint _tmp24_;
								gint _tmp25_;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
								_tmp24_ = i;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
								_tmp25_ = source_num_channels;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
								i = _tmp24_ + _tmp25_;
#line 17876 "EditingTools.c"
							}
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp23_ = FALSE;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp26_ = i;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp27_ = row_end_index;
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							if (!(_tmp26_ < _tmp27_)) {
#line 2979 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
								break;
#line 17888 "EditingTools.c"
							}
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp28_ = self->priv->fp_pixel_cache;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp28__length1 = self->priv->fp_pixel_cache_length1;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp29_ = cache_pixel_index;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							cache_pixel_index = _tmp29_ + 1;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp30_ = source_pixels;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp30__length1 = source_pixels_length1;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp31_ = i;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp32_ = _tmp30_[_tmp31_];
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp33_ = INV_255;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp28_[_tmp29_] = ((gfloat) _tmp32_) * _tmp33_;
#line 2980 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp34_ = _tmp28_[_tmp29_];
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp35_ = self->priv->fp_pixel_cache;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp35__length1 = self->priv->fp_pixel_cache_length1;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp36_ = cache_pixel_index;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							cache_pixel_index = _tmp36_ + 1;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp37_ = source_pixels;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp37__length1 = source_pixels_length1;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp38_ = i;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp39_ = _tmp37_[_tmp38_ + 1];
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp40_ = INV_255;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp35_[_tmp36_] = ((gfloat) _tmp39_) * _tmp40_;
#line 2981 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp41_ = _tmp35_[_tmp36_];
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp42_ = self->priv->fp_pixel_cache;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp42__length1 = self->priv->fp_pixel_cache_length1;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp43_ = cache_pixel_index;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							cache_pixel_index = _tmp43_ + 1;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp44_ = source_pixels;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp44__length1 = source_pixels_length1;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp45_ = i;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp46_ = _tmp44_[_tmp45_ + 2];
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp47_ = INV_255;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp42_[_tmp43_] = ((gfloat) _tmp46_) * _tmp47_;
#line 2982 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
							_tmp48_ = _tmp42_[_tmp43_];
#line 17956 "EditingTools.c"
						}
					}
				}
			}
		}
	}
}


static gboolean editing_tools_adjust_tool_real_on_keypress (EditingToolsEditingTool* base, GdkEventKey* event) {
	EditingToolsAdjustTool * self;
	gboolean result = FALSE;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GdkEventKey* _tmp2_;
	guint _tmp3_;
	const gchar* _tmp4_;
	GdkEventKey* _tmp11_;
	gboolean _tmp12_;
#line 2987 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2987 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = event;
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = _tmp2_->keyval;
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = gdk_keyval_name (_tmp3_);
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (g_strcmp0 (_tmp4_, "KP_Enter") == 0) {
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = TRUE;
#line 17990 "EditingTools.c"
	} else {
		GdkEventKey* _tmp5_;
		guint _tmp6_;
		const gchar* _tmp7_;
#line 2989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = event;
#line 2989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = _tmp5_->keyval;
#line 2989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = gdk_keyval_name (_tmp6_);
#line 2989 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = g_strcmp0 (_tmp7_, "Enter") == 0;
#line 18003 "EditingTools.c"
	}
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp1_) {
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = TRUE;
#line 18009 "EditingTools.c"
	} else {
		GdkEventKey* _tmp8_;
		guint _tmp9_;
		const gchar* _tmp10_;
#line 2990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = event;
#line 2990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_->keyval;
#line 2990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = gdk_keyval_name (_tmp9_);
#line 2990 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp0_ = g_strcmp0 (_tmp10_, "Return") == 0;
#line 18022 "EditingTools.c"
	}
#line 2988 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_) {
#line 2991 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		editing_tools_adjust_tool_on_ok (self);
#line 2992 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = TRUE;
#line 2992 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 18032 "EditingTools.c"
	}
#line 2995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = event;
#line 2995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_adjust_tool_parent_class)->on_keypress (G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), _tmp11_);
#line 2995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = _tmp12_;
#line 2995 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 18042 "EditingTools.c"
}


static EditingToolsAdjustToolAdjustToolWindow* editing_tools_adjust_tool_adjust_tool_window_construct (GType object_type, GtkWindow* container) {
	EditingToolsAdjustToolAdjustToolWindow * self = NULL;
	GtkWindow* _tmp0_;
	GtkGrid* slider_organizer = NULL;
	GtkGrid* _tmp1_;
	GtkLabel* exposure_label = NULL;
	GtkLabel* _tmp2_;
	GtkScale* _tmp3_;
	GtkScale* _tmp4_;
	GtkScale* _tmp5_;
	GtkScale* _tmp6_;
	GtkLabel* contrast_label = NULL;
	GtkLabel* _tmp7_;
	GtkScale* _tmp8_;
	GtkScale* _tmp9_;
	GtkScale* _tmp10_;
	GtkScale* _tmp11_;
	GtkLabel* saturation_label = NULL;
	GtkLabel* _tmp12_;
	GtkScale* _tmp13_;
	GtkScale* _tmp14_;
	GtkScale* _tmp15_;
	GtkScale* _tmp16_;
	GtkLabel* tint_label = NULL;
	GtkLabel* _tmp17_;
	GtkScale* _tmp18_;
	GtkScale* _tmp19_;
	GtkScale* _tmp20_;
	GtkScale* _tmp21_;
	GtkLabel* temperature_label = NULL;
	GtkLabel* _tmp22_;
	GtkScale* _tmp23_;
	GtkScale* _tmp24_;
	GtkScale* _tmp25_;
	GtkScale* _tmp26_;
	GtkLabel* shadows_label = NULL;
	GtkLabel* _tmp27_;
	GtkScale* _tmp28_;
	GtkScale* _tmp29_;
	GtkScale* _tmp30_;
	GtkScale* _tmp31_;
	GtkLabel* highlights_label = NULL;
	GtkLabel* _tmp32_;
	GtkScale* _tmp33_;
	GtkScale* _tmp34_;
	GtkScale* _tmp35_;
	GtkBox* button_layouter = NULL;
	GtkBox* _tmp36_;
	GtkButton* _tmp37_;
	GtkButton* _tmp38_;
	GtkButton* _tmp39_;
	RGBHistogramManipulator* _tmp40_;
	RGBHistogramManipulator* _tmp41_;
	RGBHistogramManipulator* _tmp42_;
	RGBHistogramManipulator* _tmp43_;
	GtkBox* pane_layouter = NULL;
	GtkBox* _tmp44_;
	RGBHistogramManipulator* _tmp45_;
	RGBHistogramManipulator* _tmp46_;
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (GTK_IS_WINDOW (container), NULL);
#line 2243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = container;
#line 2243 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustToolAdjustToolWindow*) editing_tools_editing_tool_window_construct (object_type, _tmp0_);
#line 2245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = (GtkGrid*) gtk_grid_new ();
#line 2245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp1_);
#line 2245 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	slider_organizer = _tmp1_;
#line 2246 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_set_column_homogeneous (slider_organizer, FALSE);
#line 2247 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_set_row_spacing (slider_organizer, (guint) 12);
#line 2248 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_set_column_spacing (slider_organizer, (guint) 12);
#line 2249 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_start (G_TYPE_CHECK_INSTANCE_CAST (slider_organizer, gtk_widget_get_type (), GtkWidget), 12);
#line 2250 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_bottom (G_TYPE_CHECK_INSTANCE_CAST (slider_organizer, gtk_widget_get_type (), GtkWidget), 12);
#line 2252 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Exposure:"));
#line 2252 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp2_);
#line 2252 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	exposure_label = _tmp2_;
#line 2253 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (exposure_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2254 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (exposure_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2255 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (exposure_label, gtk_widget_get_type (), GtkWidget), 0, 0, 1, 1);
#line 2256 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = self->exposure_slider;
#line 2256 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, gtk_widget_get_type (), GtkWidget), 1, 0, 1, 1);
#line 2257 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->exposure_slider;
#line 2257 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = self->exposure_slider;
#line 2258 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp5_, FALSE);
#line 2259 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = self->exposure_slider;
#line 2259 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, gtk_widget_get_type (), GtkWidget), 0);
#line 2261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Contrast:"));
#line 2261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp7_);
#line 2261 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	contrast_label = _tmp7_;
#line 2262 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (contrast_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2263 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (contrast_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2264 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (contrast_label, gtk_widget_get_type (), GtkWidget), 0, 1, 1, 1);
#line 2265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->contrast_slider;
#line 2265 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp8_, gtk_widget_get_type (), GtkWidget), 1, 1, 1, 1);
#line 2266 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = self->contrast_slider;
#line 2266 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2267 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = self->contrast_slider;
#line 2267 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp10_, FALSE);
#line 2268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->contrast_slider;
#line 2268 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp11_, gtk_widget_get_type (), GtkWidget), 0);
#line 2270 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Saturation:"));
#line 2270 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp12_);
#line 2270 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	saturation_label = _tmp12_;
#line 2271 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (saturation_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2272 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (saturation_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2273 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (saturation_label, gtk_widget_get_type (), GtkWidget), 0, 2, 1, 1);
#line 2274 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = self->saturation_slider;
#line 2274 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp13_, gtk_widget_get_type (), GtkWidget), 1, 2, 1, 1);
#line 2275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = self->saturation_slider;
#line 2275 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp14_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2276 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = self->saturation_slider;
#line 2276 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp15_, FALSE);
#line 2277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = self->saturation_slider;
#line 2277 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp16_, gtk_widget_get_type (), GtkWidget), 0);
#line 2279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Tint:"));
#line 2279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp17_);
#line 2279 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	tint_label = _tmp17_;
#line 2280 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (tint_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2281 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (tint_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2282 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (tint_label, gtk_widget_get_type (), GtkWidget), 0, 3, 1, 1);
#line 2283 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp18_ = self->tint_slider;
#line 2283 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp18_, gtk_widget_get_type (), GtkWidget), 1, 3, 1, 1);
#line 2284 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp19_ = self->tint_slider;
#line 2284 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp20_ = self->tint_slider;
#line 2285 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp20_, FALSE);
#line 2286 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp21_ = self->tint_slider;
#line 2286 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp21_, gtk_widget_get_type (), GtkWidget), 0);
#line 2288 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp22_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Temperature:"));
#line 2288 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp22_);
#line 2288 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	temperature_label = _tmp22_;
#line 2290 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (temperature_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2291 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (temperature_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2292 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (temperature_label, gtk_widget_get_type (), GtkWidget), 0, 4, 1, 1);
#line 2293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp23_ = self->temperature_slider;
#line 2293 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, gtk_widget_get_type (), GtkWidget), 1, 4, 1, 1);
#line 2294 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp24_ = self->temperature_slider;
#line 2294 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp24_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp25_ = self->temperature_slider;
#line 2295 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp25_, FALSE);
#line 2296 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp26_ = self->temperature_slider;
#line 2296 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp26_, gtk_widget_get_type (), GtkWidget), 0);
#line 2298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp27_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Shadows:"));
#line 2298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp27_);
#line 2298 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	shadows_label = _tmp27_;
#line 2299 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (shadows_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2300 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (shadows_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2301 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (shadows_label, gtk_widget_get_type (), GtkWidget), 0, 5, 1, 1);
#line 2302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp28_ = self->shadows_slider;
#line 2302 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp28_, gtk_widget_get_type (), GtkWidget), 1, 5, 1, 1);
#line 2303 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp29_ = self->shadows_slider;
#line 2303 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp29_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp30_ = self->shadows_slider;
#line 2304 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp30_, FALSE);
#line 2305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp31_ = self->shadows_slider;
#line 2305 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp31_, gtk_widget_get_type (), GtkWidget), 0);
#line 2307 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp32_ = (GtkLabel*) gtk_label_new_with_mnemonic (_ ("Highlights:"));
#line 2307 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp32_);
#line 2307 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	highlights_label = _tmp32_;
#line 2308 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_halign (G_TYPE_CHECK_INSTANCE_CAST (highlights_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_START);
#line 2309 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_valign (G_TYPE_CHECK_INSTANCE_CAST (highlights_label, gtk_widget_get_type (), GtkWidget), GTK_ALIGN_CENTER);
#line 2310 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (highlights_label, gtk_widget_get_type (), GtkWidget), 0, 6, 1, 1);
#line 2311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp33_ = self->highlights_slider;
#line 2311 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_grid_attach (slider_organizer, G_TYPE_CHECK_INSTANCE_CAST (_tmp33_, gtk_widget_get_type (), GtkWidget), 1, 6, 1, 1);
#line 2312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp34_ = self->highlights_slider;
#line 2312 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_size_request (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_widget_get_type (), GtkWidget), EDITING_TOOLS_ADJUST_TOOL_SLIDER_WIDTH, -1);
#line 2313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp35_ = self->highlights_slider;
#line 2313 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_scale_set_draw_value (_tmp35_, FALSE);
#line 2315 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp36_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 8);
#line 2315 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp36_);
#line 2315 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	button_layouter = _tmp36_;
#line 2316 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_set_homogeneous (button_layouter, TRUE);
#line 2317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp37_ = self->cancel_button;
#line 2317 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_pack_start (button_layouter, G_TYPE_CHECK_INSTANCE_CAST (_tmp37_, gtk_widget_get_type (), GtkWidget), TRUE, TRUE, (guint) 1);
#line 2318 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp38_ = self->reset_button;
#line 2318 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_pack_start (button_layouter, G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, gtk_widget_get_type (), GtkWidget), TRUE, TRUE, (guint) 1);
#line 2319 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp39_ = self->ok_button;
#line 2319 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_pack_start (button_layouter, G_TYPE_CHECK_INSTANCE_CAST (_tmp39_, gtk_widget_get_type (), GtkWidget), TRUE, TRUE, (guint) 1);
#line 2321 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp40_ = self->histogram_manipulator;
#line 2321 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_start (G_TYPE_CHECK_INSTANCE_CAST (_tmp40_, gtk_widget_get_type (), GtkWidget), 12);
#line 2322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp41_ = self->histogram_manipulator;
#line 2322 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_end (G_TYPE_CHECK_INSTANCE_CAST (_tmp41_, gtk_widget_get_type (), GtkWidget), 12);
#line 2323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp42_ = self->histogram_manipulator;
#line 2323 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_top (G_TYPE_CHECK_INSTANCE_CAST (_tmp42_, gtk_widget_get_type (), GtkWidget), 12);
#line 2324 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp43_ = self->histogram_manipulator;
#line 2324 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_widget_set_margin_bottom (G_TYPE_CHECK_INSTANCE_CAST (_tmp43_, gtk_widget_get_type (), GtkWidget), 8);
#line 2326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp44_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 8);
#line 2326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp44_);
#line 2326 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pane_layouter = _tmp44_;
#line 2327 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp45_ = self->histogram_manipulator;
#line 2327 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (pane_layouter, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (_tmp45_, gtk_widget_get_type (), GtkWidget));
#line 2328 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (pane_layouter, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (slider_organizer, gtk_widget_get_type (), GtkWidget));
#line 2329 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (pane_layouter, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (button_layouter, gtk_widget_get_type (), GtkWidget));
#line 2330 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp46_ = self->histogram_manipulator;
#line 2330 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_box_set_child_packing (pane_layouter, G_TYPE_CHECK_INSTANCE_CAST (_tmp46_, gtk_widget_get_type (), GtkWidget), TRUE, TRUE, (guint) 0, GTK_PACK_START);
#line 2332 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	gtk_container_add (G_TYPE_CHECK_INSTANCE_CAST (self, gtk_container_get_type (), GtkContainer), G_TYPE_CHECK_INSTANCE_CAST (pane_layouter, gtk_widget_get_type (), GtkWidget));
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (pane_layouter);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (button_layouter);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (highlights_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (shadows_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (temperature_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (tint_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (saturation_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (contrast_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (exposure_label);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (slider_organizer);
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 18397 "EditingTools.c"
}


static EditingToolsAdjustToolAdjustToolWindow* editing_tools_adjust_tool_adjust_tool_window_new (GtkWindow* container) {
#line 2242 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_adjust_tool_adjust_tool_window_construct (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW, container);
#line 18404 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_window_class_init (EditingToolsAdjustToolAdjustToolWindowClass * klass) {
#line 2213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_adjust_tool_window_parent_class = g_type_class_peek_parent (klass);
#line 2213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_adjust_tool_adjust_tool_window_finalize;
#line 18413 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_window_instance_init (EditingToolsAdjustToolAdjustToolWindow * self) {
	GtkScale* _tmp0_;
	GtkScale* _tmp1_;
	GtkScale* _tmp2_;
	GtkScale* _tmp3_;
	GtkScale* _tmp4_;
	GtkScale* _tmp5_;
	GtkScale* _tmp6_;
	GtkButton* _tmp7_;
	GtkButton* _tmp8_;
	GtkButton* _tmp9_;
	RGBHistogramManipulator* _tmp10_;
#line 2214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) EXPOSURE_TRANSFORMATION_MIN_PARAMETER, (gdouble) EXPOSURE_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp0_);
#line 2214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->exposure_slider = _tmp0_;
#line 2217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) CONTRAST_TRANSFORMATION_MIN_PARAMETER, (gdouble) CONTRAST_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp1_);
#line 2217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->contrast_slider = _tmp1_;
#line 2220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) SATURATION_TRANSFORMATION_MIN_PARAMETER, (gdouble) SATURATION_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp2_);
#line 2220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->saturation_slider = _tmp2_;
#line 2223 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) TINT_TRANSFORMATION_MIN_PARAMETER, (gdouble) TINT_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2223 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp3_);
#line 2223 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->tint_slider = _tmp3_;
#line 2225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) TEMPERATURE_TRANSFORMATION_MIN_PARAMETER, (gdouble) TEMPERATURE_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp4_);
#line 2225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->temperature_slider = _tmp4_;
#line 2229 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) SHADOW_DETAIL_TRANSFORMATION_MIN_PARAMETER, (gdouble) SHADOW_DETAIL_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2229 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp5_);
#line 2229 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->shadows_slider = _tmp5_;
#line 2233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = (GtkScale*) gtk_scale_new_with_range (GTK_ORIENTATION_HORIZONTAL, (gdouble) HIGHLIGHT_DETAIL_TRANSFORMATION_MIN_PARAMETER, (gdouble) HIGHLIGHT_DETAIL_TRANSFORMATION_MAX_PARAMETER, 1.0);
#line 2233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp6_);
#line 2233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->highlights_slider = _tmp6_;
#line 2237 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = (GtkButton*) gtk_button_new_with_mnemonic (RESOURCES_OK_LABEL);
#line 2237 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp7_);
#line 2237 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->ok_button = _tmp7_;
#line 2238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = (GtkButton*) gtk_button_new_with_mnemonic (_ ("_Reset"));
#line 2238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp8_);
#line 2238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->reset_button = _tmp8_;
#line 2239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = (GtkButton*) gtk_button_new_with_mnemonic (RESOURCES_CANCEL_LABEL);
#line 2239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp9_);
#line 2239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->cancel_button = _tmp9_;
#line 2240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = rgb_histogram_manipulator_new ();
#line 2240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_object_ref_sink (_tmp10_);
#line 2240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->histogram_manipulator = _tmp10_;
#line 18495 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_window_finalize (GObject * obj) {
	EditingToolsAdjustToolAdjustToolWindow * self;
#line 2213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_WINDOW, EditingToolsAdjustToolAdjustToolWindow);
#line 2214 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->exposure_slider);
#line 2217 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->contrast_slider);
#line 2220 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->saturation_slider);
#line 2223 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->tint_slider);
#line 2225 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->temperature_slider);
#line 2229 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->shadows_slider);
#line 2233 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->highlights_slider);
#line 2237 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->ok_button);
#line 2238 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->reset_button);
#line 2239 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->cancel_button);
#line 2240 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->histogram_manipulator);
#line 2213 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_adjust_tool_adjust_tool_window_parent_class)->finalize (obj);
#line 18527 "EditingTools.c"
}


static GType editing_tools_adjust_tool_adjust_tool_window_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_adjust_tool_window_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_adjust_tool_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolAdjustToolWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_adjust_tool_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustToolAdjustToolWindow), 0, (GInstanceInitFunc) editing_tools_adjust_tool_adjust_tool_window_instance_init, NULL };
		GType editing_tools_adjust_tool_adjust_tool_window_type_id;
		editing_tools_adjust_tool_adjust_tool_window_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL_WINDOW, "EditingToolsAdjustToolAdjustToolWindow", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_adjust_tool_adjust_tool_window_type_id__volatile, editing_tools_adjust_tool_adjust_tool_window_type_id);
	}
	return editing_tools_adjust_tool_adjust_tool_window_type_id__volatile;
}


static void _editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated_editing_tools_editing_tool_deactivated (EditingToolsEditingTool* _sender, gpointer self) {
#line 2348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated ((EditingToolsAdjustToolAdjustToolCommand*) self);
#line 18546 "EditingTools.c"
}


static EditingToolsAdjustToolAdjustToolCommand* editing_tools_adjust_tool_adjust_tool_command_construct (GType object_type, EditingToolsAdjustTool* owner, const gchar* name, const gchar* explanation) {
	EditingToolsAdjustToolAdjustToolCommand * self = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	EditingToolsAdjustTool* _tmp2_;
	EditingToolsAdjustTool* _tmp3_;
#line 2339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (owner), NULL);
#line 2339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 2339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (explanation != NULL, NULL);
#line 2340 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = name;
#line 2340 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = explanation;
#line 2340 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustToolAdjustToolCommand*) command_construct (object_type, _tmp0_, _tmp1_);
#line 2342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = owner;
#line 2342 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->owner = _tmp2_;
#line 2343 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = owner;
#line 2343 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_signal_connect_object (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), "deactivated", (GCallback) _editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated_editing_tools_editing_tool_deactivated, self, 0);
#line 2339 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 18578 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated (EditingToolsAdjustToolAdjustToolCommand* self) {
	CommandManager* _tmp0_;
	CommandManager* _tmp1_;
#line 2351 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_if_fail (EDITING_TOOLS_ADJUST_TOOL_IS_ADJUST_TOOL_COMMAND (self));
#line 2354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = app_window_get_command_manager ();
#line 2354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _tmp0_;
#line 2354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_manager_reset (_tmp1_);
#line 2354 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_command_manager_unref0 (_tmp1_);
#line 18595 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_command_class_init (EditingToolsAdjustToolAdjustToolCommandClass * klass) {
#line 2336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_adjust_tool_command_parent_class = g_type_class_peek_parent (klass);
#line 2336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_adjust_tool_adjust_tool_command_finalize;
#line 18604 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_tool_command_instance_init (EditingToolsAdjustToolAdjustToolCommand * self) {
}


static void editing_tools_adjust_tool_adjust_tool_command_finalize (GObject * obj) {
	EditingToolsAdjustToolAdjustToolCommand * self;
	EditingToolsAdjustTool* _tmp0_;
#line 2336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand);
#line 2347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->owner;
#line 2347 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ != NULL) {
#line 18621 "EditingTools.c"
		EditingToolsAdjustTool* _tmp1_;
		guint _tmp2_;
#line 2348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = self->owner;
#line 2348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_parse_name ("deactivated", EDITING_TOOLS_TYPE_EDITING_TOOL, &_tmp2_, NULL, FALSE);
#line 2348 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		g_signal_handlers_disconnect_matched (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool), G_SIGNAL_MATCH_ID | G_SIGNAL_MATCH_FUNC | G_SIGNAL_MATCH_DATA, _tmp2_, 0, NULL, (GCallback) _editing_tools_adjust_tool_adjust_tool_command_on_owner_deactivated_editing_tools_editing_tool_deactivated, self);
#line 18630 "EditingTools.c"
	}
#line 2336 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_adjust_tool_adjust_tool_command_parent_class)->finalize (obj);
#line 18634 "EditingTools.c"
}


static GType editing_tools_adjust_tool_adjust_tool_command_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_adjust_tool_command_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_adjust_tool_command_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolAdjustToolCommandClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_adjust_tool_command_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustToolAdjustToolCommand), 0, (GInstanceInitFunc) editing_tools_adjust_tool_adjust_tool_command_instance_init, NULL };
		GType editing_tools_adjust_tool_adjust_tool_command_type_id;
		editing_tools_adjust_tool_adjust_tool_command_type_id = g_type_register_static (TYPE_COMMAND, "EditingToolsAdjustToolAdjustToolCommand", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&editing_tools_adjust_tool_adjust_tool_command_type_id__volatile, editing_tools_adjust_tool_adjust_tool_command_type_id);
	}
	return editing_tools_adjust_tool_adjust_tool_command_type_id__volatile;
}


static EditingToolsAdjustToolAdjustResetCommand* editing_tools_adjust_tool_adjust_reset_command_construct (GType object_type, EditingToolsAdjustTool* owner, PixelTransformationBundle* current) {
	EditingToolsAdjustToolAdjustResetCommand * self = NULL;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformationBundle* _tmp1_;
	PixelTransformationBundle* _tmp2_;
	PixelTransformationBundle* _tmp3_;
	PixelTransformationBundle* _tmp4_;
#line 2362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (owner), NULL);
#line 2362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PIXEL_TRANSFORMATION_BUNDLE (current), NULL);
#line 2363 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = owner;
#line 2363 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustToolAdjustResetCommand*) editing_tools_adjust_tool_adjust_tool_command_construct (object_type, _tmp0_, _ ("Reset Colors"), _ ("Reset all color adjustments to original"));
#line 2365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = current;
#line 2365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = pixel_transformation_bundle_copy (_tmp1_);
#line 2365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->original);
#line 2365 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->original = _tmp2_;
#line 2366 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = pixel_transformation_bundle_new ();
#line 2366 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->reset);
#line 2366 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->reset = _tmp3_;
#line 2367 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->reset;
#line 2367 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	pixel_transformation_bundle_set_to_identity (_tmp4_);
#line 2362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 18685 "EditingTools.c"
}


static EditingToolsAdjustToolAdjustResetCommand* editing_tools_adjust_tool_adjust_reset_command_new (EditingToolsAdjustTool* owner, PixelTransformationBundle* current) {
#line 2362 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_adjust_tool_adjust_reset_command_construct (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, owner, current);
#line 18692 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_reset_command_real_execute (Command* base) {
	EditingToolsAdjustToolAdjustResetCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformationBundle* _tmp1_;
#line 2370 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommand);
#line 2371 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2371 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->reset;
#line 2371 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_set_adjustments (_tmp0_, _tmp1_);
#line 18708 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_reset_command_real_undo (Command* base) {
	EditingToolsAdjustToolAdjustResetCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformationBundle* _tmp1_;
#line 2374 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommand);
#line 2375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->original;
#line 2375 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_set_adjustments (_tmp0_, _tmp1_);
#line 18724 "EditingTools.c"
}


static gboolean editing_tools_adjust_tool_adjust_reset_command_real_compress (Command* base, Command* command) {
	EditingToolsAdjustToolAdjustResetCommand * self;
	gboolean result = FALSE;
	EditingToolsAdjustToolAdjustResetCommand* reset_command = NULL;
	Command* _tmp0_;
	EditingToolsAdjustToolAdjustResetCommand* _tmp1_;
	EditingToolsAdjustToolAdjustResetCommand* _tmp2_;
	EditingToolsAdjustToolAdjustResetCommand* _tmp3_;
	EditingToolsAdjustTool* _tmp4_;
	EditingToolsAdjustTool* _tmp5_;
#line 2378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommand);
#line 2378 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_COMMAND (command), FALSE);
#line 2379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = command;
#line 2379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND) ? ((EditingToolsAdjustToolAdjustResetCommand*) _tmp0_) : NULL);
#line 2379 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	reset_command = _tmp1_;
#line 2380 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = reset_command;
#line 2380 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ == NULL) {
#line 2381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (reset_command);
#line 2381 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 18758 "EditingTools.c"
	}
#line 2383 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = reset_command;
#line 2383 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2383 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2383 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp4_ != _tmp5_) {
#line 2384 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2384 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (reset_command);
#line 2384 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 18774 "EditingTools.c"
	}
#line 2387 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 2387 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (reset_command);
#line 2387 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 18782 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_reset_command_class_init (EditingToolsAdjustToolAdjustResetCommandClass * klass) {
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_adjust_reset_command_parent_class = g_type_class_peek_parent (klass);
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsAdjustToolAdjustResetCommandPrivate));
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->execute = (void (*) (Command *)) editing_tools_adjust_tool_adjust_reset_command_real_execute;
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->undo = (void (*) (Command *)) editing_tools_adjust_tool_adjust_reset_command_real_undo;
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->compress = (gboolean (*) (Command *, Command*)) editing_tools_adjust_tool_adjust_reset_command_real_compress;
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_adjust_tool_adjust_reset_command_finalize;
#line 18799 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_reset_command_instance_init (EditingToolsAdjustToolAdjustResetCommand * self) {
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_ADJUST_TOOL_ADJUST_RESET_COMMAND_GET_PRIVATE (self);
#line 18806 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_reset_command_finalize (GObject * obj) {
	EditingToolsAdjustToolAdjustResetCommand * self;
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_RESET_COMMAND, EditingToolsAdjustToolAdjustResetCommand);
#line 2359 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->original);
#line 2360 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->reset);
#line 2358 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_adjust_tool_adjust_reset_command_parent_class)->finalize (obj);
#line 18820 "EditingTools.c"
}


static GType editing_tools_adjust_tool_adjust_reset_command_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_adjust_reset_command_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_adjust_reset_command_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolAdjustResetCommandClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_adjust_reset_command_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustToolAdjustResetCommand), 0, (GInstanceInitFunc) editing_tools_adjust_tool_adjust_reset_command_instance_init, NULL };
		GType editing_tools_adjust_tool_adjust_reset_command_type_id;
		editing_tools_adjust_tool_adjust_reset_command_type_id = g_type_register_static (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, "EditingToolsAdjustToolAdjustResetCommand", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_adjust_tool_adjust_reset_command_type_id__volatile, editing_tools_adjust_tool_adjust_reset_command_type_id);
	}
	return editing_tools_adjust_tool_adjust_reset_command_type_id__volatile;
}


static EditingToolsAdjustToolSliderAdjustmentCommand* editing_tools_adjust_tool_slider_adjustment_command_construct (GType object_type, EditingToolsAdjustTool* owner, PixelTransformation* old_transformation, PixelTransformation* new_transformation, const gchar* name) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self = NULL;
	EditingToolsAdjustTool* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	PixelTransformation* _tmp3_;
	PixelTransformation* _tmp4_;
	PixelTransformation* _tmp5_;
	PixelTransformation* _tmp6_;
	PixelTransformation* _tmp7_;
	PixelTransformationType _tmp8_;
	PixelTransformation* _tmp9_;
	PixelTransformationType _tmp10_;
	PixelTransformationType _tmp11_;
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (owner), NULL);
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PIXEL_TRANSFORMATION (old_transformation), NULL);
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PIXEL_TRANSFORMATION (new_transformation), NULL);
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (name != NULL, NULL);
#line 2398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = owner;
#line 2398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = name;
#line 2398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = name;
#line 2398 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustToolSliderAdjustmentCommand*) editing_tools_adjust_tool_adjust_tool_command_construct (object_type, _tmp0_, _tmp1_, _tmp2_);
#line 2400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = old_transformation;
#line 2400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = _pixel_transformation_ref0 (_tmp3_);
#line 2400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (self->priv->old_transformation);
#line 2400 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->old_transformation = _tmp4_;
#line 2401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = new_transformation;
#line 2401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = _pixel_transformation_ref0 (_tmp5_);
#line 2401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (self->priv->new_transformation);
#line 2401 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->new_transformation = _tmp6_;
#line 2402 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = old_transformation;
#line 2402 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = pixel_transformation_get_transformation_type (_tmp7_);
#line 2402 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->transformation_type = _tmp8_;
#line 2403 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = new_transformation;
#line 2403 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = pixel_transformation_get_transformation_type (_tmp9_);
#line 2403 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = self->priv->transformation_type;
#line 2403 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_vala_assert (_tmp10_ == _tmp11_, "new_transformation.get_transformation_type() == transformation_type");
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 18898 "EditingTools.c"
}


static EditingToolsAdjustToolSliderAdjustmentCommand* editing_tools_adjust_tool_slider_adjustment_command_new (EditingToolsAdjustTool* owner, PixelTransformation* old_transformation, PixelTransformation* new_transformation, const gchar* name) {
#line 2396 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_adjust_tool_slider_adjustment_command_construct (EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, owner, old_transformation, new_transformation, name);
#line 18905 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_real_execute (Command* base) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformation* _tmp1_;
	EditingToolsAdjustTool* _tmp2_;
	EditingToolsPhotoCanvas* _tmp3_;
#line 2406 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand);
#line 2408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->new_transformation;
#line 2408 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_transformation (_tmp0_, _tmp1_);
#line 2409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2409 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp3_);
#line 18929 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_real_undo (Command* base) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformation* _tmp1_;
	EditingToolsAdjustTool* _tmp2_;
	EditingToolsAdjustTool* _tmp3_;
	PixelTransformation* _tmp4_;
	EditingToolsAdjustTool* _tmp5_;
	EditingToolsAdjustTool* _tmp6_;
	EditingToolsPhotoCanvas* _tmp7_;
#line 2412 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand);
#line 2413 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2413 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->old_transformation;
#line 2413 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_transformation (_tmp0_, _tmp1_);
#line 2415 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2415 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_unbind_window_handlers (_tmp2_);
#line 2416 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2416 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->old_transformation;
#line 2416 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_slider (_tmp3_, _tmp4_);
#line 2417 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2417 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_bind_window_handlers (_tmp5_);
#line 2419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2419 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp7_);
#line 18971 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_real_redo (Command* base) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformation* _tmp1_;
	EditingToolsAdjustTool* _tmp2_;
	EditingToolsAdjustTool* _tmp3_;
	PixelTransformation* _tmp4_;
	EditingToolsAdjustTool* _tmp5_;
	EditingToolsAdjustTool* _tmp6_;
	EditingToolsPhotoCanvas* _tmp7_;
#line 2422 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand);
#line 2423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->new_transformation;
#line 2423 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_transformation (_tmp0_, _tmp1_);
#line 2425 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2425 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_unbind_window_handlers (_tmp2_);
#line 2426 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2426 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->new_transformation;
#line 2426 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_update_slider (_tmp3_, _tmp4_);
#line 2427 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2427 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_bind_window_handlers (_tmp5_);
#line 2429 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2429 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2429 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_photo_canvas_repaint (_tmp7_);
#line 19013 "EditingTools.c"
}


static gboolean editing_tools_adjust_tool_slider_adjustment_command_real_compress (Command* base, Command* command) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self;
	gboolean result = FALSE;
	EditingToolsAdjustToolSliderAdjustmentCommand* slider_adjustment = NULL;
	Command* _tmp0_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp1_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp2_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp3_;
	EditingToolsAdjustTool* _tmp4_;
	EditingToolsAdjustTool* _tmp5_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp6_;
	PixelTransformationType _tmp7_;
	PixelTransformationType _tmp8_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp9_;
	EditingToolsAdjustToolSliderAdjustmentCommand* _tmp10_;
	PixelTransformation* _tmp11_;
	PixelTransformation* _tmp12_;
#line 2432 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand);
#line 2432 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_COMMAND (command), FALSE);
#line 2433 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = command;
#line 2433 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND) ? ((EditingToolsAdjustToolSliderAdjustmentCommand*) _tmp0_) : NULL);
#line 2433 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	slider_adjustment = _tmp1_;
#line 2434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = slider_adjustment;
#line 2434 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ == NULL) {
#line 2435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (slider_adjustment);
#line 2435 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19054 "EditingTools.c"
	}
#line 2438 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = slider_adjustment;
#line 2438 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2438 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp5_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2438 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp4_ != _tmp5_) {
#line 2439 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2439 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (slider_adjustment);
#line 2439 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19070 "EditingTools.c"
	}
#line 2442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp6_ = slider_adjustment;
#line 2442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp7_ = _tmp6_->priv->transformation_type;
#line 2442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp8_ = self->priv->transformation_type;
#line 2442 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp7_ != _tmp8_) {
#line 2443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (slider_adjustment);
#line 2443 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19086 "EditingTools.c"
	}
#line 2446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp9_ = slider_adjustment;
#line 2446 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	command_execute (G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, TYPE_COMMAND, Command));
#line 2449 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp10_ = slider_adjustment;
#line 2449 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp11_ = _tmp10_->priv->new_transformation;
#line 2449 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = _pixel_transformation_ref0 (_tmp11_);
#line 2449 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (self->priv->new_transformation);
#line 2449 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->new_transformation = _tmp12_;
#line 2451 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 2451 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (slider_adjustment);
#line 2451 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 19108 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_class_init (EditingToolsAdjustToolSliderAdjustmentCommandClass * klass) {
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_slider_adjustment_command_parent_class = g_type_class_peek_parent (klass);
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsAdjustToolSliderAdjustmentCommandPrivate));
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->execute = (void (*) (Command *)) editing_tools_adjust_tool_slider_adjustment_command_real_execute;
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->undo = (void (*) (Command *)) editing_tools_adjust_tool_slider_adjustment_command_real_undo;
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->redo = (void (*) (Command *)) editing_tools_adjust_tool_slider_adjustment_command_real_redo;
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->compress = (gboolean (*) (Command *, Command*)) editing_tools_adjust_tool_slider_adjustment_command_real_compress;
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_adjust_tool_slider_adjustment_command_finalize;
#line 19127 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_instance_init (EditingToolsAdjustToolSliderAdjustmentCommand * self) {
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_ADJUST_TOOL_SLIDER_ADJUSTMENT_COMMAND_GET_PRIVATE (self);
#line 19134 "EditingTools.c"
}


static void editing_tools_adjust_tool_slider_adjustment_command_finalize (GObject * obj) {
	EditingToolsAdjustToolSliderAdjustmentCommand * self;
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_ADJUST_TOOL_TYPE_SLIDER_ADJUSTMENT_COMMAND, EditingToolsAdjustToolSliderAdjustmentCommand);
#line 2393 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (self->priv->new_transformation);
#line 2394 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_unref0 (self->priv->old_transformation);
#line 2391 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_adjust_tool_slider_adjustment_command_parent_class)->finalize (obj);
#line 19148 "EditingTools.c"
}


static GType editing_tools_adjust_tool_slider_adjustment_command_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_slider_adjustment_command_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_slider_adjustment_command_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolSliderAdjustmentCommandClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_slider_adjustment_command_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustToolSliderAdjustmentCommand), 0, (GInstanceInitFunc) editing_tools_adjust_tool_slider_adjustment_command_instance_init, NULL };
		GType editing_tools_adjust_tool_slider_adjustment_command_type_id;
		editing_tools_adjust_tool_slider_adjustment_command_type_id = g_type_register_static (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, "EditingToolsAdjustToolSliderAdjustmentCommand", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_adjust_tool_slider_adjustment_command_type_id__volatile, editing_tools_adjust_tool_slider_adjustment_command_type_id);
	}
	return editing_tools_adjust_tool_slider_adjustment_command_type_id__volatile;
}


static EditingToolsAdjustToolAdjustEnhanceCommand* editing_tools_adjust_tool_adjust_enhance_command_construct (GType object_type, EditingToolsAdjustTool* owner, Photo* photo) {
	EditingToolsAdjustToolAdjustEnhanceCommand * self = NULL;
	EditingToolsAdjustTool* _tmp0_;
	Photo* _tmp1_;
	Photo* _tmp2_;
	Photo* _tmp3_;
	PixelTransformationBundle* _tmp4_;
#line 2460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (EDITING_TOOLS_IS_ADJUST_TOOL (owner), NULL);
#line 2460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_PHOTO (photo), NULL);
#line 2461 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = owner;
#line 2461 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = (EditingToolsAdjustToolAdjustEnhanceCommand*) editing_tools_adjust_tool_adjust_tool_command_construct (object_type, _tmp0_, RESOURCES_ENHANCE_LABEL, RESOURCES_ENHANCE_TOOLTIP);
#line 2463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = photo;
#line 2463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = _g_object_ref0 (_tmp1_);
#line 2463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->photo);
#line 2463 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->photo = _tmp2_;
#line 2464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = photo;
#line 2464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = photo_get_color_adjustments (_tmp3_);
#line 2464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->original);
#line 2464 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->original = _tmp4_;
#line 2460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return self;
#line 19197 "EditingTools.c"
}


static EditingToolsAdjustToolAdjustEnhanceCommand* editing_tools_adjust_tool_adjust_enhance_command_new (EditingToolsAdjustTool* owner, Photo* photo) {
#line 2460 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return editing_tools_adjust_tool_adjust_enhance_command_construct (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, owner, photo);
#line 19204 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_enhance_command_real_execute (Command* base) {
	EditingToolsAdjustToolAdjustEnhanceCommand * self;
	PixelTransformationBundle* _tmp0_;
	EditingToolsAdjustTool* _tmp3_;
	PixelTransformationBundle* _tmp4_;
#line 2467 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommand);
#line 2468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = self->priv->enhanced;
#line 2468 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp0_ == NULL) {
#line 19219 "EditingTools.c"
		Photo* _tmp1_;
		PixelTransformationBundle* _tmp2_;
#line 2469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp1_ = self->priv->photo;
#line 2469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp2_ = photo_get_enhance_transformations (_tmp1_);
#line 2469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_pixel_transformation_bundle_unref0 (self->priv->enhanced);
#line 2469 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		self->priv->enhanced = _tmp2_;
#line 19230 "EditingTools.c"
	}
#line 2471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp3_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp4_ = self->priv->enhanced;
#line 2471 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_set_adjustments (_tmp3_, _tmp4_);
#line 19238 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_enhance_command_real_undo (Command* base) {
	EditingToolsAdjustToolAdjustEnhanceCommand * self;
	EditingToolsAdjustTool* _tmp0_;
	PixelTransformationBundle* _tmp1_;
#line 2474 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommand);
#line 2475 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2475 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = self->priv->original;
#line 2475 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_set_adjustments (_tmp0_, _tmp1_);
#line 19254 "EditingTools.c"
}


static gboolean editing_tools_adjust_tool_adjust_enhance_command_real_compress (Command* base, Command* command) {
	EditingToolsAdjustToolAdjustEnhanceCommand * self;
	gboolean result = FALSE;
	EnhanceSingleCommand* enhance_single = NULL;
	Command* _tmp0_;
	EnhanceSingleCommand* _tmp1_;
	EnhanceSingleCommand* _tmp2_;
	EditingToolsAdjustToolAdjustEnhanceCommand* enhance_command = NULL;
	Command* _tmp12_;
	EditingToolsAdjustToolAdjustEnhanceCommand* _tmp13_;
	EditingToolsAdjustToolAdjustEnhanceCommand* _tmp14_;
	EditingToolsAdjustToolAdjustEnhanceCommand* _tmp15_;
	EditingToolsAdjustTool* _tmp16_;
	EditingToolsAdjustTool* _tmp17_;
#line 2478 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (base, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommand);
#line 2478 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_return_val_if_fail (IS_COMMAND (command), FALSE);
#line 2480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp0_ = command;
#line 2480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, TYPE_ENHANCE_SINGLE_COMMAND) ? ((EnhanceSingleCommand*) _tmp0_) : NULL);
#line 2480 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	enhance_single = _tmp1_;
#line 2481 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp2_ = enhance_single;
#line 2481 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp2_ != NULL) {
#line 19286 "EditingTools.c"
		Photo* photo = NULL;
		EnhanceSingleCommand* _tmp3_;
		DataSource* _tmp4_;
		Photo* _tmp5_;
		EditingToolsAdjustTool* _tmp6_;
		EditingToolsPhotoCanvas* _tmp7_;
		Photo* _tmp8_;
		Photo* _tmp9_;
		gboolean _tmp10_;
		gboolean _tmp11_;
#line 2482 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp3_ = enhance_single;
#line 2482 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp4_ = single_data_source_command_get_source (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, TYPE_SINGLE_DATA_SOURCE_COMMAND, SingleDataSourceCommand));
#line 2482 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		photo = G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, TYPE_PHOTO, Photo);
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp5_ = photo;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp6_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp7_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp6_, EDITING_TOOLS_TYPE_EDITING_TOOL, EditingToolsEditingTool)->canvas;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp8_ = editing_tools_photo_canvas_get_photo (_tmp7_);
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp9_ = _tmp8_;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp10_ = data_source_equals (G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, TYPE_DATA_SOURCE, DataSource), G_TYPE_CHECK_INSTANCE_CAST (_tmp9_, TYPE_DATA_SOURCE, DataSource));
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_tmp11_ = _tmp10_;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (_tmp9_);
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = _tmp11_;
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (photo);
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (enhance_single);
#line 2486 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19327 "EditingTools.c"
	}
#line 2489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp12_ = command;
#line 2489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp13_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp12_, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND) ? ((EditingToolsAdjustToolAdjustEnhanceCommand*) _tmp12_) : NULL);
#line 2489 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	enhance_command = _tmp13_;
#line 2490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp14_ = enhance_command;
#line 2490 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp14_ == NULL) {
#line 2491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (enhance_command);
#line 2491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (enhance_single);
#line 2491 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19347 "EditingTools.c"
	}
#line 2493 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp15_ = enhance_command;
#line 2493 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp16_ = G_TYPE_CHECK_INSTANCE_CAST (_tmp15_, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2493 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_tmp17_ = G_TYPE_CHECK_INSTANCE_CAST (self, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, EditingToolsAdjustToolAdjustToolCommand)->owner;
#line 2493 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	if (_tmp16_ != _tmp17_) {
#line 2494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		result = FALSE;
#line 2494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (enhance_command);
#line 2494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		_g_object_unref0 (enhance_single);
#line 2494 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
		return result;
#line 19365 "EditingTools.c"
	}
#line 2497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	result = TRUE;
#line 2497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (enhance_command);
#line 2497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (enhance_single);
#line 2497 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	return result;
#line 19375 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_enhance_command_class_init (EditingToolsAdjustToolAdjustEnhanceCommandClass * klass) {
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_adjust_enhance_command_parent_class = g_type_class_peek_parent (klass);
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsAdjustToolAdjustEnhanceCommandPrivate));
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->execute = (void (*) (Command *)) editing_tools_adjust_tool_adjust_enhance_command_real_execute;
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->undo = (void (*) (Command *)) editing_tools_adjust_tool_adjust_enhance_command_real_undo;
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((CommandClass *) klass)->compress = (gboolean (*) (Command *, Command*)) editing_tools_adjust_tool_adjust_enhance_command_real_compress;
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (klass)->finalize = editing_tools_adjust_tool_adjust_enhance_command_finalize;
#line 19392 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_enhance_command_instance_init (EditingToolsAdjustToolAdjustEnhanceCommand * self) {
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_ADJUST_TOOL_ADJUST_ENHANCE_COMMAND_GET_PRIVATE (self);
#line 2458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->enhanced = NULL;
#line 19401 "EditingTools.c"
}


static void editing_tools_adjust_tool_adjust_enhance_command_finalize (GObject * obj) {
	EditingToolsAdjustToolAdjustEnhanceCommand * self;
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_ENHANCE_COMMAND, EditingToolsAdjustToolAdjustEnhanceCommand);
#line 2456 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->photo);
#line 2457 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->original);
#line 2458 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->enhanced);
#line 2455 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	G_OBJECT_CLASS (editing_tools_adjust_tool_adjust_enhance_command_parent_class)->finalize (obj);
#line 19417 "EditingTools.c"
}


static GType editing_tools_adjust_tool_adjust_enhance_command_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_adjust_enhance_command_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_adjust_enhance_command_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolAdjustEnhanceCommandClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_adjust_enhance_command_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustToolAdjustEnhanceCommand), 0, (GInstanceInitFunc) editing_tools_adjust_tool_adjust_enhance_command_instance_init, NULL };
		GType editing_tools_adjust_tool_adjust_enhance_command_type_id;
		editing_tools_adjust_tool_adjust_enhance_command_type_id = g_type_register_static (EDITING_TOOLS_ADJUST_TOOL_TYPE_ADJUST_TOOL_COMMAND, "EditingToolsAdjustToolAdjustEnhanceCommand", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_adjust_tool_adjust_enhance_command_type_id__volatile, editing_tools_adjust_tool_adjust_enhance_command_type_id);
	}
	return editing_tools_adjust_tool_adjust_enhance_command_type_id__volatile;
}


static void editing_tools_adjust_tool_class_init (EditingToolsAdjustToolClass * klass) {
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	editing_tools_adjust_tool_parent_class = g_type_class_peek_parent (klass);
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->finalize = editing_tools_adjust_tool_finalize;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	g_type_class_add_private (klass, sizeof (EditingToolsAdjustToolPrivate));
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->activate = (void (*) (EditingToolsEditingTool *, EditingToolsPhotoCanvas*)) editing_tools_adjust_tool_real_activate;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_tool_window = (EditingToolsEditingToolWindow* (*) (EditingToolsEditingTool *)) editing_tools_adjust_tool_real_get_tool_window;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->deactivate = (void (*) (EditingToolsEditingTool *)) editing_tools_adjust_tool_real_deactivate;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->paint = (void (*) (EditingToolsEditingTool *, cairo_t*)) editing_tools_adjust_tool_real_paint;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->get_display_pixbuf = (GdkPixbuf* (*) (EditingToolsEditingTool *, Scaling*, Photo*, Dimensions*, GError**)) editing_tools_adjust_tool_real_get_display_pixbuf;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	((EditingToolsEditingToolClass *) klass)->on_keypress = (gboolean (*) (EditingToolsEditingTool *, GdkEventKey*)) editing_tools_adjust_tool_real_on_keypress;
#line 19452 "EditingTools.c"
}


static void editing_tools_adjust_tool_instance_init (EditingToolsAdjustTool * self) {
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv = EDITING_TOOLS_ADJUST_TOOL_GET_PRIVATE (self);
#line 2501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->adjust_tool_window = NULL;
#line 2502 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->suppress_effect_redraw = FALSE;
#line 2503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->draw_to_pixbuf = NULL;
#line 2504 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->histogram_pixbuf = NULL;
#line 2505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->virgin_histogram_pixbuf = NULL;
#line 2506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->transformer = NULL;
#line 2507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->histogram_transformer = NULL;
#line 2508 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->transformations = NULL;
#line 2509 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = NULL;
#line 2509 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache_length1 = 0;
#line 2509 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->_fp_pixel_cache_size_ = self->priv->fp_pixel_cache_length1;
#line 2510 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->disable_histogram_refresh = FALSE;
#line 2511 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->temperature_scheduler = NULL;
#line 2512 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->tint_scheduler = NULL;
#line 2513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->contrast_scheduler = NULL;
#line 2514 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->saturation_scheduler = NULL;
#line 2515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->exposure_scheduler = NULL;
#line 2516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->shadows_scheduler = NULL;
#line 2517 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->highlights_scheduler = NULL;
#line 19497 "EditingTools.c"
}


static void editing_tools_adjust_tool_finalize (EditingToolsEditingTool * obj) {
	EditingToolsAdjustTool * self;
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, EDITING_TOOLS_TYPE_ADJUST_TOOL, EditingToolsAdjustTool);
#line 2501 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->adjust_tool_window);
#line 2503 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->draw_to_pixbuf);
#line 2504 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->histogram_pixbuf);
#line 2505 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_g_object_unref0 (self->priv->virgin_histogram_pixbuf);
#line 2506 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformer_unref0 (self->priv->transformer);
#line 2507 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformer_unref0 (self->priv->histogram_transformer);
#line 2508 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_pixel_transformation_bundle_unref0 (self->priv->transformations);
#line 2509 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	self->priv->fp_pixel_cache = (g_free (self->priv->fp_pixel_cache), NULL);
#line 2511 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->temperature_scheduler);
#line 2512 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->tint_scheduler);
#line 2513 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->contrast_scheduler);
#line 2514 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->saturation_scheduler);
#line 2515 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->exposure_scheduler);
#line 2516 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->shadows_scheduler);
#line 2517 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	_one_shot_scheduler_unref0 (self->priv->highlights_scheduler);
#line 2209 "/home/jens/Source/shotwell/src/editing_tools/EditingTools.vala"
	EDITING_TOOLS_EDITING_TOOL_CLASS (editing_tools_adjust_tool_parent_class)->finalize (obj);
#line 19537 "EditingTools.c"
}


GType editing_tools_adjust_tool_get_type (void) {
	static volatile gsize editing_tools_adjust_tool_type_id__volatile = 0;
	if (g_once_init_enter (&editing_tools_adjust_tool_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (EditingToolsAdjustToolClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) editing_tools_adjust_tool_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (EditingToolsAdjustTool), 0, (GInstanceInitFunc) editing_tools_adjust_tool_instance_init, NULL };
		GType editing_tools_adjust_tool_type_id;
		editing_tools_adjust_tool_type_id = g_type_register_static (EDITING_TOOLS_TYPE_EDITING_TOOL, "EditingToolsAdjustTool", &g_define_type_info, 0);
		g_once_init_leave (&editing_tools_adjust_tool_type_id__volatile, editing_tools_adjust_tool_type_id);
	}
	return editing_tools_adjust_tool_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



